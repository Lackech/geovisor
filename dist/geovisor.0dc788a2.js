parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MHZC":[function(require,module,exports) {
"use strict";function t(){return function(){throw new Error("Unimplemented abstract method.")}()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.abstract=t,exports.getUid=r,exports.VERSION=void 0;var e=0;function r(t){return t.ol_uid||(t.ol_uid=String(++e))}var o="latest";exports.VERSION=o;
},{}],"uhP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js");function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?o(t):r}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function i(t){var e="function"==typeof Map?new Map:void 0;return(i=function(t){if(null===t||!l(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return f(t,arguments,s(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p(r,t)})(t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function f(t,e,r){return(f=c()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&p(o,r.prototype),o}).apply(null,arguments)}function l(t){return-1!==Function.toString.call(t).indexOf("[native code]")}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var a=function(e){function o(e){var u;r(this,o);var i="Assertion failed. See https://openlayers.org/en/"+("latest"===t.VERSION?t.VERSION:"v"+t.VERSION.split("-")[0])+"/doc/errors/#"+e+" for details.";return(u=n(this,s(o).call(this,i))).code=e,u.name="AssertionError",u.message=i,u}return u(o,i(Error)),o}(),y=a;exports.default=y;
},{"./util.js":"MHZC"}],"XSCF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADD:"add",REMOVE:"remove"};exports.default=e;
},{}],"7xWn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PROPERTYCHANGE:"propertychange"};exports.default=e;
},{}],"dV1Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.isEmpty=n,exports.getValues=exports.assign=void 0;var e="function"==typeof Object.assign?Object.assign:function(e,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1,o=arguments.length;n<o;++n){var s=arguments[n];if(null!=s)for(var u in s)s.hasOwnProperty(u)&&(t[u]=s[u])}return t};function r(e){for(var r in e)delete e[r]}exports.assign=e;var t="function"==typeof Object.values?Object.values:function(e){var r=[];for(var t in e)r.push(e[t]);return r};function n(e){var r;for(r in e)return!1;return!r}exports.getValues=t;
},{}],"sgxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindListener=t,exports.findListener=n,exports.getListeners=r,exports.listen=s,exports.listenOnce=a,exports.unlisten=u,exports.unlistenByKey=c,exports.unlistenAll=f;var e=require("./obj.js");function t(e){var t=function(t){var n=e.listener,r=e.bindTo||e.target;return e.callOnce&&c(e),n.call(r,t)};return e.boundListener=t,t}function n(e,t,n,r){for(var i,l=0,o=e.length;l<o;++l)if((i=e[l]).listener===t&&i.bindTo===n)return r&&(i.deleteIndex=l),i}function r(e,t){var n=i(e);return n?n[t]:void 0}function i(e,t){var n=e.ol_lm;return!n&&t&&(n=e.ol_lm={}),n}function l(e){delete e.ol_lm}function o(t,n){var o=r(t,n);if(o){for(var s=0,a=o.length;s<a;++s)t.removeEventListener(n,o[s].boundListener),(0,e.clear)(o[s]);o.length=0;var u=i(t);u&&(delete u[n],0===Object.keys(u).length&&l(t))}}function s(e,r,l,o,s){var a=i(e,!0),u=a[r];u||(u=a[r]=[]);var c=n(u,l,o,!1);return c?s||(c.callOnce=!1):(c={bindTo:o,callOnce:!!s,listener:l,target:e,type:r},e.addEventListener(r,t(c)),u.push(c)),c}function a(e,t,n,r){return s(e,t,n,r,!0)}function u(e,t,i,l){var o=r(e,t);if(o){var s=n(o,i,l,!0);s&&c(s)}}function c(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var n=r(t.target,t.type);if(n){var i="deleteIndex"in t?t.deleteIndex:n.indexOf(t);-1!==i&&n.splice(i,1),0===n.length&&o(t.target,t.type)}(0,e.clear)(t)}}function f(e){var t=i(e);if(t)for(var n in t)o(e,n)}
},{"./obj.js":"dV1Q"}],"1A8/":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function t(){e(this,t),this.disposed_=!1}return n(t,[{key:"dispose",value:function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())}},{key:"disposeInternal",value:function(){}}]),t}(),i=o;exports.default=i;
},{}],"bH9H":[function(require,module,exports) {
"use strict";function e(){return!0}function t(){return!1}function r(){}Object.defineProperty(exports,"__esModule",{value:!0}),exports.TRUE=e,exports.FALSE=t,exports.VOID=r;
},{}],"nz3i":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.stopPropagation=r,exports.preventDefault=a,exports.default=void 0;var n=function(){function e(o){t(this,e),this.propagationStopped,this.type=o,this.target=null}return o(e,[{key:"preventDefault",value:function(){this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),e}();function r(t){t.stopPropagation()}function a(t){t.preventDefault()}var p=n;exports.default=p;
},{}],"B5sF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("../Disposable.js")),t=require("../events.js"),n=require("../functions.js"),i=r(require("./Event.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function a(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(r){function o(){var e;return s(this,o),(e=a(this,c(o).call(this))).pendingRemovals_={},e.dispatching_={},e.listeners_={},e}return p(o,e.default),l(o,[{key:"addEventListener",value:function(e,t){var n=this.listeners_[e];n||(n=this.listeners_[e]=[]),-1===n.indexOf(t)&&n.push(t)}},{key:"dispatchEvent",value:function(e){var t="string"==typeof e?new i.default(e):e,r=t.type;t.target=this;var o,s=this.listeners_[r];if(s){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var u=0,l=s.length;u<l;++u)if(!1===s[u].call(this,t)||t.propagationStopped){o=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var a=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];a--;)this.removeEventListener(r,n.VOID);delete this.dispatching_[r]}return o}}},{key:"disposeInternal",value:function(){(0,t.unlistenAll)(this)}},{key:"getListeners",value:function(e){return this.listeners_[e]}},{key:"hasListener",value:function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0}},{key:"removeEventListener",value:function(e,t){var i=this.listeners_[e];if(i){var r=i.indexOf(t);e in this.pendingRemovals_?(i[r]=n.VOID,++this.pendingRemovals_[e]):(i.splice(r,1),0===i.length&&delete this.listeners_[e])}}}]),o}(),d=v;exports.default=d;
},{"../Disposable.js":"1A8/","../events.js":"sgxS","../functions.js":"bH9H","./Event.js":"nz3i"}],"KZbn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CHANGE:"change",ERROR:"error",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"};exports.default=e;
},{}],"o8IP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unByKey=v,exports.default=void 0;var e=require("./events.js"),t=r(require("./events/Target.js")),n=r(require("./events/EventType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(r){function o(){var e;return i(this,o),(e=f(this,c(o).call(this))).revision_=0,e}return l(o,t.default),s(o,[{key:"changed",value:function(){++this.revision_,this.dispatchEvent(n.default.CHANGE)}},{key:"getRevision",value:function(){return this.revision_}},{key:"on",value:function(t,n){if(Array.isArray(t)){for(var r=t.length,o=new Array(r),i=0;i<r;++i)o[i]=(0,e.listen)(this,t[i],n);return o}return(0,e.listen)(this,t,n)}},{key:"once",value:function(t,n){if(Array.isArray(t)){for(var r=t.length,o=new Array(r),i=0;i<r;++i)o[i]=(0,e.listenOnce)(this,t[i],n);return o}return(0,e.listenOnce)(this,t,n)}},{key:"un",value:function(t,n){if(Array.isArray(t))for(var r=0,o=t.length;r<o;++r)(0,e.unlisten)(this,t[r],n);else(0,e.unlisten)(this,t,n)}}]),o}();function v(t){if(Array.isArray(t))for(var n=0,r=t.length;n<r;++n)(0,e.unlistenByKey)(t[n]);else(0,e.unlistenByKey)(t)}var h=p;exports.default=h;
},{"./events.js":"sgxS","./events/Target.js":"B5sF","./events/EventType.js":"KZbn"}],"luFO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChangeEventType=d,exports.default=exports.ObjectEvent=void 0;var e=require("./util.js"),t=u(require("./ObjectEventType.js")),n=u(require("./Observable.js")),r=u(require("./events/Event.js")),o=require("./obj.js");function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e,n,r){var o;return f(this,t),(o=l(this,v(t).call(this,e))).key=n,o.oldValue=r,o}return y(t,r.default),t}();exports.ObjectEvent=h;var b=function(r){function u(t){var n;return f(this,u),n=l(this,v(u).call(this)),(0,e.getUid)(c(n)),n.values_={},void 0!==t&&n.setProperties(t),n}return y(u,n.default),a(u,[{key:"get",value:function(e){var t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}},{key:"getKeys",value:function(){return Object.keys(this.values_)}},{key:"getProperties",value:function(){return(0,o.assign)({},this.values_)}},{key:"notify",value:function(e,n){var r;r=d(e),this.dispatchEvent(new h(r,e,n)),r=t.default.PROPERTYCHANGE,this.dispatchEvent(new h(r,e,n))}},{key:"set",value:function(e,t,n){if(n)this.values_[e]=t;else{var r=this.values_[e];this.values_[e]=t,r!==t&&this.notify(e,r)}}},{key:"setProperties",value:function(e,t){for(var n in e)this.set(n,e[n],t)}},{key:"unset",value:function(e,t){if(e in this.values_){var n=this.values_[e];delete this.values_[e],t||this.notify(e,n)}}}]),u}(),_={};function d(e){return _.hasOwnProperty(e)?_[e]:_[e]="change:"+e}var O=b;exports.default=O;
},{"./util.js":"MHZC","./ObjectEventType.js":"7xWn","./Observable.js":"o8IP","./events/Event.js":"nz3i","./obj.js":"dV1Q"}],"dXq/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CollectionEvent=void 0;var t=i(require("./AssertionError.js")),e=i(require("./CollectionEventType.js")),r=i(require("./Object.js")),n=i(require("./events/Event.js"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v={LENGTH:"length"},p=function(t){function e(t,r,n){var i;return s(this,e),(i=f(this,l(e).call(this,t))).element=r,i.index=n,i}return c(e,n.default),e}();exports.CollectionEvent=p;var _=function(n){function i(t,e){var r;s(this,i);var n=e||{};if((r=f(this,l(i).call(this))).unique_=!!n.unique,r.array_=t||[],r.unique_)for(var u=0,o=r.array_.length;u<o;++u)r.assertUnique_(r.array_[u],u);return r.updateLength_(),r}return c(i,r.default),a(i,[{key:"clear",value:function(){for(;this.getLength()>0;)this.pop()}},{key:"extend",value:function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this}},{key:"forEach",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)}},{key:"getArray",value:function(){return this.array_}},{key:"item",value:function(t){return this.array_[t]}},{key:"getLength",value:function(){return this.get(v.LENGTH)}},{key:"insertAt",value:function(t,r){this.unique_&&this.assertUnique_(r),this.array_.splice(t,0,r),this.updateLength_(),this.dispatchEvent(new p(e.default.ADD,r,t))}},{key:"pop",value:function(){return this.removeAt(this.getLength()-1)}},{key:"push",value:function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()}},{key:"remove",value:function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)}},{key:"removeAt",value:function(t){var r=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new p(e.default.REMOVE,r,t)),r}},{key:"setAt",value:function(t,r){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(r,t);var i=this.array_[t];this.array_[t]=r,this.dispatchEvent(new p(e.default.REMOVE,i,t)),this.dispatchEvent(new p(e.default.ADD,r,t))}else{for(var u=n;u<t;++u)this.insertAt(u,void 0);this.insertAt(t,r)}}},{key:"updateLength_",value:function(){this.set(v.LENGTH,this.array_.length)}},{key:"assertUnique_",value:function(e,r){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===e&&n!==r)throw new t.default(58)}}]),i}(),g=_;exports.default=g;
},{"./AssertionError.js":"uhP9","./CollectionEventType.js":"XSCF","./Object.js":"luFO","./events/Event.js":"nz3i"}],"9bdb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(e){function o(t,e,u){var i;return n(this,o),(i=r(this,f(o).call(this,t))).map=e,i.frameState=void 0!==u?u:null,i}return i(o,t.default),o}(),s=l;exports.default=s;
},{"./events/Event.js":"nz3i"}],"hEV5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var o=c(t,e);if(o){var r=Object.getOwnPropertyDescriptor(o,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(e){function n(t,e,r,i,f){var l;return o(this,n),(l=u(this,a(n).call(this,t,e,f))).originalEvent=r,l.pixel=e.getEventPixel(r),l.coordinate=e.getCoordinateFromPixel(l.pixel),l.dragging=void 0!==i&&i,l}return p(n,t.default),i(n,[{key:"preventDefault",value:function(){l(a(n.prototype),"preventDefault",this).call(this),this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){l(a(n.prototype),"stopPropagation",this).call(this),this.originalEvent.stopPropagation()}}]),n}(),b=y;exports.default=b;
},{"./MapEvent.js":"9bdb"}],"quWH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=g,exports.EXTENSIONS=exports.MAX_TEXTURE_SIZE=exports.HAS=exports.DEBUG=exports.FRAMEBUFFER=exports.COMPILE_STATUS=exports.CLAMP_TO_EDGE=exports.TEXTURE0=exports.TEXTURE_2D=exports.TEXTURE_WRAP_T=exports.TEXTURE_WRAP_S=exports.TEXTURE_MIN_FILTER=exports.TEXTURE_MAG_FILTER=exports.LINEAR=exports.LINK_STATUS=exports.VERTEX_SHADER=exports.FRAGMENT_SHADER=exports.RGBA=exports.FLOAT=exports.UNSIGNED_INT=exports.UNSIGNED_SHORT=exports.UNSIGNED_BYTE=exports.SCISSOR_TEST=exports.DEPTH_TEST=exports.STENCIL_TEST=exports.BLEND=exports.CULL_FACE=exports.DYNAMIC_DRAW=exports.STATIC_DRAW=exports.STREAM_DRAW=exports.ELEMENT_ARRAY_BUFFER=exports.ARRAY_BUFFER=exports.ONE_MINUS_SRC_ALPHA=exports.TRIANGLE_STRIP=exports.TRIANGLES=exports.COLOR_BUFFER_BIT=exports.COLOR_ATTACHMENT0=exports.SRC_ALPHA=exports.ONE=void 0;var r=1;exports.ONE=r;var e=770;exports.SRC_ALPHA=e;var E=36064;exports.COLOR_ATTACHMENT0=E;var t=16384;exports.COLOR_BUFFER_BIT=t;var T=4;exports.TRIANGLES=T;var o=5;exports.TRIANGLE_STRIP=o;var s=771;exports.ONE_MINUS_SRC_ALPHA=s;var p=34962;exports.ARRAY_BUFFER=p;var x=34963;exports.ELEMENT_ARRAY_BUFFER=x;var _=35040;exports.STREAM_DRAW=_;var R=35044;exports.STATIC_DRAW=R;var A=35048;exports.DYNAMIC_DRAW=A;var S=2884;exports.CULL_FACE=S;var a=3042;exports.BLEND=a;var N=2960;exports.STENCIL_TEST=N;var I=2929;exports.DEPTH_TEST=I;var v=3089;exports.SCISSOR_TEST=v;var U=5121;exports.UNSIGNED_BYTE=U;var L=5123;exports.UNSIGNED_SHORT=L;var C=5125;exports.UNSIGNED_INT=C;var D=5126;exports.FLOAT=D;var F=6408;exports.RGBA=F;var M=35632;exports.FRAGMENT_SHADER=M;var O=35633;exports.VERTEX_SHADER=O;var X=35714;exports.LINK_STATUS=X;var n=9729;exports.LINEAR=n;var G=10240;exports.TEXTURE_MAG_FILTER=G;var B=10241;exports.TEXTURE_MIN_FILTER=B;var P=10242;exports.TEXTURE_WRAP_S=P;var H=10243;exports.TEXTURE_WRAP_T=H;var i=3553;exports.TEXTURE_2D=i;var d=33984;exports.TEXTURE0=d;var W=33071;exports.CLAMP_TO_EDGE=W;var c=35713;exports.COMPILE_STATUS=c;var l=36160;exports.FRAMEBUFFER=l;var u=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function g(r,e){for(var E=u.length,t=0;t<E;++t)try{var T=r.getContext(u[t],e);if(T)return T}catch(o){}return null}var w,Y,f=!0;exports.DEBUG=f,exports.MAX_TEXTURE_SIZE=w,exports.EXTENSIONS=Y;var b=!1;if(exports.HAS=b,"undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var m=document.createElement("canvas"),y=g(m);y&&(exports.HAS=b=!0,exports.MAX_TEXTURE_SIZE=w=y.getParameter(y.MAX_TEXTURE_SIZE),exports.EXTENSIONS=Y=y.getSupportedExtensions())}catch(Z){}
},{}],"1fCX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"WEBGL",{enumerable:!0,get:function(){return e.HAS}}),exports.MSPOINTER=exports.POINTER=exports.TOUCH=exports.DEVICE_PIXEL_RATIO=exports.MAC=exports.WEBKIT=exports.SAFARI=exports.FIREFOX=void 0;var e=require("./webgl.js"),r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",t=-1!==r.indexOf("firefox");exports.FIREFOX=t;var o=-1!==r.indexOf("safari")&&-1==r.indexOf("chrom");exports.SAFARI=o;var i=-1!==r.indexOf("webkit")&&-1==r.indexOf("edge");exports.WEBKIT=i;var n=-1!==r.indexOf("macintosh");exports.MAC=n;var s=window.devicePixelRatio||1;exports.DEVICE_PIXEL_RATIO=s;var x="ontouchstart"in window;exports.TOUCH=x;var a="PointerEvent"in window;exports.POINTER=a;var p=!!navigator.msPointerEnabled;exports.MSPOINTER=p;
},{"./webgl.js":"quWH"}],"530S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./events/EventType.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r={SINGLECLICK:"singleclick",CLICK:e.default.CLICK,DBLCLICK:e.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=r;
},{"./events/EventType.js":"KZbn"}],"UbWk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./MapBrowserEvent.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(e){function o(t,e,u,f,c){var l;return n(this,o),(l=r(this,i(o).call(this,t,e,u.originalEvent,f,c))).pointerEvent=u,l}return f(o,t.default),o}(),p=l;exports.default=p;
},{"./MapBrowserEvent.js":"hEV5"}],"VFqs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};exports.default=e;
},{}],"sTO7":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=function(){function t(n,r){e(this,t),this.dispatcher=n,this.mapping_=r}return n(t,[{key:"getEvents",value:function(){return Object.keys(this.mapping_)}},{key:"getHandlerForEvent",value:function(e){return this.mapping_[e]}}]),t}(),i=r;exports.default=i;
},{}],"Cv3W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.prepareEvent=E,exports.default=exports.POINTER_TYPE=exports.POINTER_ID=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=1;exports.POINTER_ID=f;var l="mouse";exports.POINTER_TYPE=l;var h=25;function v(t){if(!this.isEventSimulatedFromTouch_(t)){f.toString()in this.pointerMap&&this.cancel(t);var e=E(t,this.dispatcher);this.pointerMap[f.toString()]=t,this.dispatcher.down(e,t)}}function d(t){if(!this.isEventSimulatedFromTouch_(t)){var e=E(t,this.dispatcher);this.dispatcher.move(e,t)}}function y(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[f.toString()];if(e&&e.button===t.button){var r=E(t,this.dispatcher);this.dispatcher.up(r,t),this.cleanupMouse()}}}function m(t){if(!this.isEventSimulatedFromTouch_(t)){var e=E(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function b(t){if(!this.isEventSimulatedFromTouch_(t)){var e=E(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var _=function(e){function r(t){var e;n(this,r);var o={mousedown:v,mousemove:d,mouseup:y,mouseover:m,mouseout:b};return(e=u(this,s(r).call(this,t,o))).pointerMap=t.pointerMap,e.lastTouches=[],e}return c(r,t.default),i(r,[{key:"isEventSimulatedFromTouch_",value:function(t){for(var e,r=this.lastTouches,n=t.clientX,o=t.clientY,i=0,u=r.length;i<u&&(e=r[i]);i++){var a=Math.abs(n-e[0]),s=Math.abs(o-e[1]);if(a<=h&&s<=h)return!0}return!1}},{key:"cancel",value:function(t){var e=E(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()}},{key:"cleanupMouse",value:function(){delete this.pointerMap[f.toString()]}}]),r}();function E(t,e){var r=e.cloneEvent(t,t),n=r.preventDefault;return r.preventDefault=function(){t.preventDefault(),n()},r.pointerId=f,r.isPrimary=!0,r.pointerType=l,r}var O=_;exports.default=O;
},{"./EventSource.js":"sTO7"}],"vQed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function p(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=["","unavailable","touch","pen","mouse"];function l(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function h(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function v(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function y(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function d(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function b(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function _(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function S(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var E=function(e){function r(t){var e;n(this,r);var o={MSPointerDown:l,MSPointerMove:h,MSPointerUp:v,MSPointerOut:y,MSPointerOver:d,MSPointerCancel:b,MSGotPointerCapture:S,MSLostPointerCapture:_};return(e=p(this,u(r).call(this,t,o))).pointerMap=t.pointerMap,e}return c(r,t.default),i(r,[{key:"prepareEvent_",value:function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=f[t.pointerType]),e}},{key:"cleanup",value:function(t){delete this.pointerMap[t.toString()]}}]),r}(),m=E;exports.default=m;
},{"./EventSource.js":"sTO7"}],"yekV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./EventSource.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){this.dispatcher.fireNativeEvent(t)}function s(t){this.dispatcher.fireNativeEvent(t)}function a(t){this.dispatcher.fireNativeEvent(t)}function l(t){this.dispatcher.fireNativeEvent(t)}function h(t){this.dispatcher.fireNativeEvent(t)}function v(t){this.dispatcher.fireNativeEvent(t)}function y(t){this.dispatcher.fireNativeEvent(t)}function d(t){this.dispatcher.fireNativeEvent(t)}var b=function(e){function n(t){o(this,n);var e={pointerdown:p,pointermove:s,pointerup:a,pointerout:l,pointerover:h,pointercancel:v,gotpointercapture:d,lostpointercapture:y};return r(this,u(n).call(this,t,e))}return c(n,t.default),n}(),E=b;exports.default=E;
},{"./EventSource.js":"sTO7"}],"de24":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=!1,s=function(e){function n(t,e,o){var l;r(this,n),(l=i(this,u(n).call(this,t))).originalEvent=e;var c=o||{};return l.buttons=f(c),l.pressure=p(c,l.buttons),l.bubbles="bubbles"in c&&c.bubbles,l.cancelable="cancelable"in c&&c.cancelable,l.view="view"in c?c.view:null,l.detail="detail"in c?c.detail:null,l.screenX="screenX"in c?c.screenX:0,l.screenY="screenY"in c?c.screenY:0,l.clientX="clientX"in c?c.clientX:0,l.clientY="clientY"in c?c.clientY:0,l.ctrlKey="ctrlKey"in c&&c.ctrlKey,l.altKey="altKey"in c&&c.altKey,l.shiftKey="shiftKey"in c&&c.shiftKey,l.metaKey="metaKey"in c&&c.metaKey,l.button="button"in c?c.button:0,l.relatedTarget="relatedTarget"in c?c.relatedTarget:null,l.pointerId="pointerId"in c?c.pointerId:0,l.width="width"in c?c.width:0,l.height="height"in c?c.height:0,l.tiltX="tiltX"in c?c.tiltX:0,l.tiltY="tiltY"in c?c.tiltY:0,l.pointerType="pointerType"in c?c.pointerType:"",l.hwTimestamp="hwTimestamp"in c?c.hwTimestamp:0,l.isPrimary="isPrimary"in c&&c.isPrimary,e.preventDefault&&(l.preventDefault=function(){e.preventDefault()}),l}return l(n,t.default),n}();function f(t){var e;if(t.buttons||a)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}function p(t,e){return t.pressure?t.pressure:e?.5:0}!function(){try{var t=new MouseEvent("click",{buttons:1});a=1===t.buttons}catch(e){}}();var b=s;exports.default=b;
},{"../events/Event.js":"nz3i"}],"YQ1M":[function(require,module,exports) {
"use strict";function r(r,n,t){for(var u,o,i=t||e,f=0,a=r.length,s=!1;f<a;)(o=+i(r[u=f+(a-f>>1)],n))<0?f=u+1:(a=u,s=!o);return s?f:~f}function e(r,e){return r>e?1:r<e?-1:0}function n(r,e){return r.indexOf(e)>=0}function t(r,e,n){var t,u=r.length;if(r[0]<=e)return 0;if(e<=r[u-1])return u-1;if(n>0){for(t=1;t<u;++t)if(r[t]<e)return t-1}else if(n<0){for(t=1;t<u;++t)if(r[t]<=e)return t}else for(t=1;t<u;++t){if(r[t]==e)return t;if(r[t]<e)return r[t-1]-e<e-r[t]?t-1:t}return u-1}function u(r,e,n){for(;e<n;){var t=r[e];r[e]=r[n],r[n]=t,++e,--n}}function o(r,e){for(var n=Array.isArray(e)?e:[e],t=n.length,u=0;u<t;u++)r[r.length]=n[u]}function i(r,e){var n=r.indexOf(e),t=n>-1;return t&&r.splice(n,1),t}function f(r,e){for(var n,t=r.length>>>0,u=0;u<t;u++)if(e(n=r[u],u,r))return n;return null}function a(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;t<n;t++)if(r[t]!==e[t])return!1;return!0}function s(r,e){var n,t=r.length,u=Array(r.length);for(n=0;n<t;n++)u[n]={index:n,value:r[n]};for(u.sort(function(r,n){return e(r.value,n.value)||r.index-n.index}),n=0;n<r.length;n++)r[n]=u[n].value}function l(r,e){var n;return!r.every(function(t,u){return n=u,!e(t,u,r)})?n:-1}function c(r,n,t){var u=n||e;return r.every(function(e,n){if(0===n)return!0;var o=u(r[n-1],e);return!(o>0||t&&0===o)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.binarySearch=r,exports.numberSafeCompareFunction=e,exports.includes=n,exports.linearFindNearest=t,exports.reverseSubArray=u,exports.extend=o,exports.remove=i,exports.find=f,exports.equals=a,exports.stableSort=s,exports.findIndex=l,exports.isSorted=c;
},{}],"kyn/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../array.js"),t=i(require("./EventSource.js")),r=require("./MouseSource.js");function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=200,d="touch";function _(e){this.vacuumTouches_(e),this.setPrimaryTouch_(e.changedTouches[0]),this.dedupSynthMouse_(e),this.clickCount_++,this.processTouches_(e,this.overDown_)}function v(e){this.processTouches_(e,this.moveOverOut_)}function y(e){this.dedupSynthMouse_(e),this.processTouches_(e,this.upOut_)}function T(e){this.processTouches_(e,this.cancelOut_)}var m=function(i){function o(e,t){var r;n(this,o);var i={touchstart:_,touchmove:v,touchend:y,touchcancel:T};return(r=s(this,h(o).call(this,e,i))).pointerMap=e.pointerMap,r.mouseSource=t,r.firstTouchId_=void 0,r.clickCount_=0,r.resetId_,r.dedupTimeout_=2500,r}return l(o,t.default),c(o,[{key:"isPrimaryTouch_",value:function(e){return this.firstTouchId_===e.identifier}},{key:"setPrimaryTouch_",value:function(e){var t=Object.keys(this.pointerMap).length;(0===t||1===t&&r.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=e.identifier,this.cancelResetClickCount_())}},{key:"removePrimaryPointer_",value:function(e){e.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())}},{key:"resetClickCount_",value:function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),f)}},{key:"resetClickCountHandler_",value:function(){this.clickCount_=0,this.resetId_=void 0}},{key:"cancelResetClickCount_",value:function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)}},{key:"touchToPointer_",value:function(e,t){var r=this.dispatcher.cloneEvent(e,t);return r.pointerId=t.identifier+2,r.bubbles=!0,r.cancelable=!0,r.detail=this.clickCount_,r.button=0,r.buttons=1,r.width=t.radiusX||0,r.height=t.radiusY||0,r.pressure=t.force||.5,r.isPrimary=this.isPrimaryTouch_(t),r.pointerType=d,r.clientX=t.clientX,r.clientY=t.clientY,r.screenX=t.screenX,r.screenY=t.screenY,r}},{key:"processTouches_",value:function(e,t){var r=Array.prototype.slice.call(e.changedTouches),i=r.length;function o(){e.preventDefault()}for(var n=0;n<i;++n){var u=this.touchToPointer_(e,r[n]);u.preventDefault=o,t.call(this,e,u)}}},{key:"findTouch_",value:function(e,t){for(var r=e.length,i=0;i<r;i++){if(e[i].identifier===t)return!0}return!1}},{key:"vacuumTouches_",value:function(e){var t=e.touches,i=Object.keys(this.pointerMap),o=i.length;if(o>=t.length){for(var n=[],u=0;u<o;++u){var c=Number(i[u]),s=this.pointerMap[c];c==r.POINTER_ID||this.findTouch_(t,c-2)||n.push(s.out)}for(var a=0;a<n.length;++a)this.cancelOut_(e,n[a])}}},{key:"overDown_",value:function(e,t){this.pointerMap[t.pointerId]={target:t.target,out:t,outTarget:t.target},this.dispatcher.over(t,e),this.dispatcher.enter(t,e),this.dispatcher.down(t,e)}},{key:"moveOverOut_",value:function(e,t){var r=t,i=this.pointerMap[r.pointerId];if(i){var o=i.out,n=i.outTarget;this.dispatcher.move(r,e),o&&n!==r.target&&(o.relatedTarget=r.target,r.relatedTarget=n,o.target=n,r.target?(this.dispatcher.leaveOut(o,e),this.dispatcher.enterOver(r,e)):(r.target=n,r.relatedTarget=null,this.cancelOut_(e,r))),i.out=r,i.outTarget=r.target}}},{key:"upOut_",value:function(e,t){this.dispatcher.up(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)}},{key:"cancelOut_",value:function(e,t){this.dispatcher.cancel(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)}},{key:"cleanUpPointer_",value:function(e){delete this.pointerMap[e.pointerId],this.removePrimaryPointer_(e)}},{key:"dedupSynthMouse_",value:function(t){var r=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var o=[i.clientX,i.clientY];r.push(o),setTimeout(function(){(0,e.remove)(r,o)},this.dedupTimeout_)}}}]),o}(),b=m;exports.default=b;
},{"../array.js":"YQ1M","./EventSource.js":"sTO7","./MouseSource.js":"Cv3W"}],"Xrq6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=c(require("../events/Target.js")),n=require("../has.js"),r=c(require("./EventType.js")),i=l(require("./MouseSource.js")),u=c(require("./MsSource.js")),o=c(require("./NativeSource.js")),s=c(require("./PointerEvent.js")),a=c(require("./TouchSource.js"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],m=function(l){function c(e){var t;return v(this,c),(t=p(this,g(c).call(this))).element_=e,t.pointerMap={},t.eventMap_={},t.eventSourceList_=[],t.registerSources(),t}return O(c,t.default),y(c,[{key:"registerSources",value:function(){if(n.POINTER)this.registerSource("native",new o.default(this));else if(n.MSPOINTER)this.registerSource("ms",new u.default(this));else{var e=new i.default(this);this.registerSource("mouse",e),n.TOUCH&&this.registerSource("touch",new a.default(this,e))}this.register_()}},{key:"registerSource",value:function(e,t){var n=t,r=n.getEvents();r&&(r.forEach(function(e){var t=n.getHandlerForEvent(e);t&&(this.eventMap_[e]=t.bind(n))}.bind(this)),this.eventSourceList_.push(n))}},{key:"register_",value:function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var n=this.eventSourceList_[t];this.addEvents_(n.getEvents())}}},{key:"unregister_",value:function(){for(var e=this.eventSourceList_.length,t=0;t<e;t++){var n=this.eventSourceList_[t];this.removeEvents_(n.getEvents())}}},{key:"eventHandler_",value:function(e){var t=e.type,n=this.eventMap_[t];n&&n(e)}},{key:"addEvents_",value:function(t){t.forEach(function(t){(0,e.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))}},{key:"removeEvents_",value:function(t){t.forEach(function(t){(0,e.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))}},{key:"cloneEvent",value:function(e,t){for(var n={},r=0,i=k.length;r<i;r++){var u=k[r][0];n[u]=e[u]||t[u]||k[r][1]}return n}},{key:"down",value:function(e,t){this.fireEvent(r.default.POINTERDOWN,e,t)}},{key:"move",value:function(e,t){this.fireEvent(r.default.POINTERMOVE,e,t)}},{key:"up",value:function(e,t){this.fireEvent(r.default.POINTERUP,e,t)}},{key:"enter",value:function(e,t){e.bubbles=!1,this.fireEvent(r.default.POINTERENTER,e,t)}},{key:"leave",value:function(e,t){e.bubbles=!1,this.fireEvent(r.default.POINTERLEAVE,e,t)}},{key:"over",value:function(e,t){e.bubbles=!0,this.fireEvent(r.default.POINTEROVER,e,t)}},{key:"out",value:function(e,t){e.bubbles=!0,this.fireEvent(r.default.POINTEROUT,e,t)}},{key:"cancel",value:function(e,t){this.fireEvent(r.default.POINTERCANCEL,e,t)}},{key:"leaveOut",value:function(e,t){this.out(e,t),this.contains_(e.target,e.relatedTarget)||this.leave(e,t)}},{key:"enterOver",value:function(e,t){this.over(e,t),this.contains_(e.target,e.relatedTarget)||this.enter(e,t)}},{key:"contains_",value:function(e,t){return!(!e||!t)&&e.contains(t)}},{key:"makeEvent",value:function(e,t,n){return new s.default(e,n,t)}},{key:"fireEvent",value:function(e,t,n){var r=this.makeEvent(e,t,n);this.dispatchEvent(r)}},{key:"fireNativeEvent",value:function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)}},{key:"wrapMouseEvent",value:function(e,t){return this.makeEvent(e,(0,i.prepareEvent)(t,this),t)}},{key:"disposeInternal",value:function(){this.unregister_(),b(g(c.prototype),"disposeInternal",this).call(this)}}]),c}(),P=m;exports.default=P;
},{"../events.js":"sgxS","../events/Target.js":"B5sF","../has.js":"1fCX","./EventType.js":"VFqs","./MouseSource.js":"Cv3W","./MsSource.js":"vQed","./NativeSource.js":"yekV","./PointerEvent.js":"de24","./TouchSource.js":"kyn/"}],"CDN1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./has.js"),t=a(require("./MapBrowserEventType.js")),n=a(require("./MapBrowserPointerEvent.js")),i=require("./events.js"),r=a(require("./events/Target.js")),o=a(require("./pointer/EventType.js")),s=a(require("./pointer/PointerEventHandler.js"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=f(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(a){function u(t,n){var r;l(this,u),(r=h(this,v(u).call(this))).map_=t,r.clickTimeoutId_,r.dragging_=!1,r.dragListenerKeys_=[],r.moveTolerance_=n?n*e.DEVICE_PIXEL_RATIO:e.DEVICE_PIXEL_RATIO,r.down_=null;var a=r.map_.getViewport();return r.activePointers_=0,r.trackedTouches_={},r.pointerEventHandler_=new s.default(a),r.documentPointerEventHandler_=null,r.pointerdownListenerKey_=(0,i.listen)(r.pointerEventHandler_,o.default.POINTERDOWN,r.handlePointerDown_,_(r)),r.relayedListenerKey_=(0,i.listen)(r.pointerEventHandler_,o.default.POINTERMOVE,r.relayEvent_,_(r)),r}return y(u,r.default),c(u,[{key:"emulateClick_",value:function(e){var i=new n.default(t.default.CLICK,this.map_,e);this.dispatchEvent(i),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,i=new n.default(t.default.DBLCLICK,this.map_,e),this.dispatchEvent(i)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var i=new n.default(t.default.SINGLECLICK,this.map_,e);this.dispatchEvent(i)}.bind(this),250)}},{key:"updateActivePointers_",value:function(e){var n=e;n.type==t.default.POINTERUP||n.type==t.default.POINTERCANCEL?delete this.trackedTouches_[n.pointerId]:n.type==t.default.POINTERDOWN&&(this.trackedTouches_[n.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length}},{key:"handlePointerUp_",value:function(e){this.updateActivePointers_(e);var r=new n.default(t.default.POINTERUP,this.map_,e);this.dispatchEvent(r),r.propagationStopped||this.dragging_||!this.isMouseActionButton_(e)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(i.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)}},{key:"isMouseActionButton_",value:function(e){return 0===e.button}},{key:"handlePointerDown_",value:function(e){this.updateActivePointers_(e);var r=new n.default(t.default.POINTERDOWN,this.map_,e);this.dispatchEvent(r),this.down_=e,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new s.default(document),this.dragListenerKeys_.push((0,i.listen)(this.documentPointerEventHandler_,t.default.POINTERMOVE,this.handlePointerMove_,this),(0,i.listen)(this.documentPointerEventHandler_,t.default.POINTERUP,this.handlePointerUp_,this),(0,i.listen)(this.pointerEventHandler_,t.default.POINTERCANCEL,this.handlePointerUp_,this)))}},{key:"handlePointerMove_",value:function(e){if(this.isMoving_(e)){this.dragging_=!0;var i=new n.default(t.default.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(i)}e.preventDefault()}},{key:"relayEvent_",value:function(e){var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new n.default(e.type,this.map_,e,t))}},{key:"isMoving_",value:function(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}},{key:"disposeInternal",value:function(){this.relayedListenerKey_&&((0,i.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&((0,i.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(i.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),p(v(u.prototype),"disposeInternal",this).call(this)}}]),u}(),g=P;exports.default=g;
},{"./has.js":"1fCX","./MapBrowserEventType.js":"530S","./MapBrowserPointerEvent.js":"UbWk","./events.js":"sgxS","./events/Target.js":"B5sF","./pointer/EventType.js":"VFqs","./pointer/PointerEventHandler.js":"Xrq6"}],"ON6V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"};exports.default=e;
},{}],"kwS9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};exports.default=e;
},{}],"X6Tz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};exports.default=e;
},{}],"SRu5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5};exports.default=e;
},{}],"d7gk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t;var e=r(require("./AssertionError.js"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r,t){if(!r)throw new e.default(t)}
},{"./AssertionError.js":"uhP9"}],"gu2c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DROP=void 0;var e=require("../asserts.js"),t=require("../obj.js");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var r=1/0;exports.DROP=r;var u=function(){function n(e,t){i(this,n),this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return s(n,[{key:"clear",value:function(){this.elements_.length=0,this.priorities_.length=0,(0,t.clear)(this.queuedElements_)}},{key:"dequeue",value:function(){var e=this.elements_,t=this.priorities_,i=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var n=this.keyFunction_(i);return delete this.queuedElements_[n],i}},{key:"enqueue",value:function(t){(0,e.assert)(!(this.keyFunction_(t)in this.queuedElements_),31);var i=this.priorityFunction_(t);return i!=r&&(this.elements_.push(t),this.priorities_.push(i),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}},{key:"getCount",value:function(){return this.elements_.length}},{key:"getLeftChildIndex_",value:function(e){return 2*e+1}},{key:"getRightChildIndex_",value:function(e){return 2*e+2}},{key:"getParentIndex_",value:function(e){return e-1>>1}},{key:"heapify_",value:function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}},{key:"isEmpty",value:function(){return 0===this.elements_.length}},{key:"isKeyQueued",value:function(e){return e in this.queuedElements_}},{key:"isQueued",value:function(e){return this.isKeyQueued(this.keyFunction_(e))}},{key:"siftUp_",value:function(e){for(var t=this.elements_,i=this.priorities_,n=t.length,s=t[e],r=i[e],u=e;e<n>>1;){var h=this.getLeftChildIndex_(e),o=this.getRightChildIndex_(e),l=o<n&&i[o]<i[h]?o:h;t[e]=t[l],i[e]=i[l],e=l}t[e]=s,i[e]=r,this.siftDown_(u,e)}},{key:"siftDown_",value:function(e,t){for(var i=this.elements_,n=this.priorities_,s=i[t],r=n[t];t>e;){var u=this.getParentIndex_(t);if(!(n[u]>r))break;i[t]=i[u],n[t]=n[u],t=u}i[t]=s,n[t]=r}},{key:"reprioritize",value:function(){var e,t,i,n=this.priorityFunction_,s=this.elements_,u=this.priorities_,h=0,o=s.length;for(t=0;t<o;++t)(i=n(e=s[t]))==r?delete this.queuedElements_[this.keyFunction_(e)]:(u[h]=i,s[h++]=e);s.length=h,u.length=h,this.heapify_()}}]),n}(),h=u;exports.default=h;
},{"../asserts.js":"d7gk","../obj.js":"dV1Q"}],"Io5d":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./TileState.js")),t=require("./events.js"),n=i(require("./events/EventType.js")),r=i(require("./structs/PriorityQueue.js"));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(i){function o(e,t){var n;return u(this,o),(n=f(this,p(o).call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()}))).tileChangeCallback_=t,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return d(o,r.default),a(o,[{key:"enqueue",value:function(e){var r=c(p(o.prototype),"enqueue",this).call(this,e);if(r){var i=e[0];(0,t.listen)(i,n.default.CHANGE,this.handleTileChange,this)}return r}},{key:"getTilesLoading",value:function(){return this.tilesLoading_}},{key:"handleTileChange",value:function(r){var i=r.target,o=i.getState();if(i.hifi&&o===e.default.LOADED||o===e.default.ERROR||o===e.default.EMPTY||o===e.default.ABORT){(0,t.unlisten)(i,n.default.CHANGE,this.handleTileChange,this);var u=i.getKey();u in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[u],--this.tilesLoading_),this.tileChangeCallback_()}}},{key:"loadMoreTiles",value:function(t,n){for(var r,i,o,u=0,l=!1;this.tilesLoading_<t&&u<n&&this.getCount()>0;)o=(i=this.dequeue()[0]).getKey(),(r=i.getState())===e.default.ABORT?l=!0:r!==e.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++u,i.load());0===u&&l&&this.tileChangeCallback_()}}]),o}(),b=g;exports.default=b;
},{"./TileState.js":"SRu5","./events.js":"sgxS","./events/EventType.js":"KZbn","./structs/PriorityQueue.js":"gu2c"}],"BCyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_TILE_SIZE=exports.DEFAULT_MAX_ZOOM=void 0;var e=42;exports.DEFAULT_MAX_ZOOM=e;var r=256;exports.DEFAULT_TILE_SIZE=r;
},{}],"t/nT":[function(require,module,exports) {
"use strict";function r(r,t,e){return Math.min(Math.max(r,t),e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=r,exports.squaredSegmentDistance=e,exports.squaredDistance=n,exports.solveLinearSystem=o,exports.toDegrees=a,exports.toRadians=s,exports.modulo=u,exports.lerp=i,exports.cosh=void 0;var t="cosh"in Math?Math.cosh:function(r){var t=Math.exp(r);return(t+1/t)/2};function e(r,t,e,o,a,s){var u=a-e,i=s-o;if(0!==u||0!==i){var c=((r-e)*u+(t-o)*i)/(u*u+i*i);c>1?(e=a,o=s):c>0&&(e+=u*c,o+=i*c)}return n(r,t,e,o)}function n(r,t,e,n){var o=e-r,a=n-t;return o*o+a*a}function o(r){for(var t=r.length,e=0;e<t;e++){for(var n=e,o=Math.abs(r[e][e]),a=e+1;a<t;a++){var s=Math.abs(r[a][e]);s>o&&(o=s,n=a)}if(0===o)return null;var u=r[n];r[n]=r[e],r[e]=u;for(var i=e+1;i<t;i++)for(var c=-r[i][e]/r[e][e],f=e;f<t+1;f++)e==f?r[i][f]=0:r[i][f]+=c*r[e][f]}for(var v=new Array(t),p=t-1;p>=0;p--){v[p]=r[p][t]/r[p][p];for(var h=p-1;h>=0;h--)r[h][t]-=r[h][p]*v[p]}return v}function a(r){return 180*r/Math.PI}function s(r){return r*Math.PI/180}function u(r,t){var e=r%t;return e*t<0?e+t:e}function i(r,t,e){return r+e*(t-r)}exports.cosh=t;
},{}],"O2jG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExtent=a,exports.none=e;var t=require("./math.js");function a(a,e,r){return function(n,o,u,h){if(n){var M=e?0:u[0]*o,c=e?0:u[1]*o,l=a[0]+M/2,x=a[2]-M/2,i=a[1]+c/2,m=a[3]-c/2;l>x&&(l=x=(x+l)/2),i>m&&(i=m=(m+i)/2);var s=(0,t.clamp)(n[0],l,x),p=(0,t.clamp)(n[1],i,m),f=30*o;return h&&r&&(s+=-f*Math.log(1+Math.max(0,l-n[0])/f)+f*Math.log(1+Math.max(0,n[0]-x)/f),p+=-f*Math.log(1+Math.max(0,i-n[1])/f)+f*Math.log(1+Math.max(0,n[1]-m)/f)),[s,p]}}}function e(t){return t}
},{"./math.js":"t/nT"}],"fEqp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"cCLw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};exports.default=e;
},{}],"+QKI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.boundingExtent=o,exports.buffer=a,exports.clone=i,exports.closestSquaredDistanceXY=s,exports.containsCoordinate=f,exports.containsExtent=c,exports.containsXY=p,exports.coordinateRelationship=x,exports.createEmpty=l,exports.createOrUpdate=d,exports.createOrUpdateEmpty=h,exports.createOrUpdateFromCoordinate=m,exports.createOrUpdateFromCoordinates=g,exports.createOrUpdateFromFlatCoordinates=T,exports.createOrUpdateFromRings=E,exports.equals=M,exports.extend=O,exports.extendCoordinate=v,exports.extendCoordinates=C,exports.extendFlatCoordinates=R,exports.extendRings=F,exports.extendXY=I,exports.forEachCorner=N,exports.getArea=B,exports.getBottomLeft=L,exports.getBottomRight=y,exports.getCenter=U,exports.getCorner=G,exports.getEnlargedArea=_,exports.getForViewAndSize=A,exports.getHeight=S,exports.getIntersectionArea=H,exports.getIntersection=W,exports.getMargin=q,exports.getSize=j,exports.getTopLeft=V,exports.getTopRight=b,exports.getWidth=P,exports.intersects=X,exports.isEmpty=Y,exports.returnOrUpdate=z,exports.scaleFromCenter=K,exports.intersectsSegment=w,exports.applyTransform=D;var t=require("./asserts.js"),e=n(require("./extent/Corner.js")),r=n(require("./extent/Relationship.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=l(),r=0,n=t.length;r<n;++r)v(e,t[r]);return e}function u(t,e,r){return d(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}function a(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function i(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function s(t,e,r){var n,o;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(o=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*o}function f(t,e){return p(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function p(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function x(t,e){var n=t[0],o=t[1],u=t[2],a=t[3],i=e[0],s=e[1],f=r.default.UNKNOWN;return i<n?f|=r.default.LEFT:i>u&&(f|=r.default.RIGHT),s<o?f|=r.default.BELOW:s>a&&(f|=r.default.ABOVE),f===r.default.UNKNOWN&&(f=r.default.INTERSECTING),f}function l(){return[1/0,1/0,-1/0,-1/0]}function d(t,e,r,n,o){return o?(o[0]=t,o[1]=e,o[2]=r,o[3]=n,o):[t,e,r,n]}function h(t){return d(1/0,1/0,-1/0,-1/0,t)}function m(t,e){var r=t[0],n=t[1];return d(r,n,r,n,e)}function g(t,e){return C(h(e),t)}function T(t,e,r,n,o){return R(h(o),t,e,r,n)}function E(t,e){return F(h(e),t)}function M(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function v(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function C(t,e){for(var r=0,n=e.length;r<n;++r)v(t,e[r]);return t}function R(t,e,r,n,o){for(;r<n;r+=o)I(t,e[r],e[r+1]);return t}function F(t,e){for(var r=0,n=e.length;r<n;++r)C(t,e[r]);return t}function I(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function N(t,e){var r;return(r=e(L(t)))?r:(r=e(y(t)))?r:(r=e(b(t)))?r:(r=e(V(t)))||!1}function B(t){var e=0;return Y(t)||(e=P(t)*S(t)),e}function L(t){return[t[0],t[1]]}function y(t){return[t[2],t[1]]}function U(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function G(r,n){var o;return n===e.default.BOTTOM_LEFT?o=L(r):n===e.default.BOTTOM_RIGHT?o=y(r):n===e.default.TOP_LEFT?o=V(r):n===e.default.TOP_RIGHT?o=b(r):(0,t.assert)(!1,13),o}function _(t,e){var r=Math.min(t[0],e[0]),n=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-r)*(Math.max(t[3],e[3])-n)}function A(t,e,r,n,o){var u=e*n[0]/2,a=e*n[1]/2,i=Math.cos(r),s=Math.sin(r),f=u*i,c=u*s,p=a*i,x=a*s,l=t[0],h=t[1],m=l-f+x,g=l-f-x,T=l+f-x,E=l+f+x,M=h-c-p,O=h-c+p,v=h+c+p,C=h+c-p;return d(Math.min(m,g,T,E),Math.min(M,O,v,C),Math.max(m,g,T,E),Math.max(M,O,v,C),o)}function S(t){return t[3]-t[1]}function H(t,e){return B(W(t,e))}function W(t,e,r){var n=r||l();return X(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):h(n),n}function q(t){return P(t)+S(t)}function j(t){return[t[2]-t[0],t[3]-t[1]]}function V(t){return[t[0],t[3]]}function b(t){return[t[2],t[3]]}function P(t){return t[2]-t[0]}function X(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Y(t){return t[2]<t[0]||t[3]<t[1]}function z(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function K(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function w(t,e,n){var o=!1,u=x(t,e),a=x(t,n);if(u===r.default.INTERSECTING||a===r.default.INTERSECTING)o=!0;else{var i,s,f=t[0],c=t[1],p=t[2],l=t[3],d=e[0],h=e[1],m=n[0],g=n[1],T=(g-h)/(m-d);a&r.default.ABOVE&&!(u&r.default.ABOVE)&&(o=(i=m-(g-l)/T)>=f&&i<=p),o||!(a&r.default.RIGHT)||u&r.default.RIGHT||(o=(s=g-(m-p)*T)>=c&&s<=l),o||!(a&r.default.BELOW)||u&r.default.BELOW||(o=(i=m-(g-c)/T)>=f&&i<=p),o||!(a&r.default.LEFT)||u&r.default.LEFT||(o=(s=g-(m-f)*T)>=c&&s<=l)}return o}function D(t,e,r){var n=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(n,n,2),u([n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]],r)}
},{"./asserts.js":"d7gk","./extent/Corner.js":"fEqp","./extent/Relationship.js":"cCLw"}],"nQDJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createSnapToResolutions=i,exports.createSnapToPower=o,exports.createMinMaxResolution=u;var t=require("./array.js"),r=require("./extent.js"),e=require("./math.js");function a(t,e,a){var n=(0,r.getWidth)(e)/a[0],i=(0,r.getHeight)(e)/a[1];return Math.min(t,Math.min(n,i))}function n(t,r,a){var n=Math.min(t,r);return n*=Math.log(1+50*Math.max(0,t/r-1))/50+1,a&&(n=Math.max(n,a),n/=Math.log(1+50*Math.max(0,a/t-1))/50+1),(0,e.clamp)(n,a/2,2*r)}function i(r,i,o){return function(u,h,c,M){if(void 0!==u){var l=r[0],f=r[r.length-1],v=o?a(l,o,c):l;if(M)return void 0===i||i?n(u,v,f):(0,e.clamp)(u,f,v);var m=Math.min(v,u),s=Math.floor((0,t.linearFindNearest)(r,m,h));return r[s]}}}function o(t,r,i,o,u){return function(h,c,M,l){if(void 0!==h){var f=u?a(r,u,M):r,v=void 0!==i?i:0;if(l)return void 0===o||o?n(h,f,v):(0,e.clamp)(h,v,f);var m=-c*(.5-1e-9)+.5,s=Math.min(f,h),p=Math.floor(Math.log(r/s)/Math.log(t)+m),d=r/Math.pow(t,p);return(0,e.clamp)(d,v,f)}}}function u(t,r,i,o){return function(u,h,c,M){if(void 0!==u){var l=o?a(t,o,c):t;return(void 0===i||i)&&M?n(u,l,r):(0,e.clamp)(u,r,l)}}}
},{"./array.js":"YQ1M","./extent.js":"+QKI","./math.js":"t/nT"}],"oxRp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disable=e,exports.none=o,exports.createSnapToN=t,exports.createSnapToZero=n;var r=require("./math.js");function e(r){return void 0!==r?0:void 0}function o(r){return void 0!==r?r:void 0}function t(r){var e=2*Math.PI/r;return function(r,o){return o?r:void 0!==r?r=Math.floor(r/e+.5)*e:void 0}}function n(e){var o=e||(0,r.toRadians)(5);return function(r,e){return e?r:void 0!==r?Math.abs(r)<=o?0:r:void 0}}
},{"./math.js":"t/nT"}],"Lb7V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ANIMATING:0,INTERACTING:1};exports.default=e;
},{}],"8K6Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};exports.default=e;
},{}],"xZAE":[function(require,module,exports) {
"use strict";function e(e,r,t){var n=void 0!==t?e.toFixed(t):""+e,i=n.indexOf(".");return(i=-1===i?n.length:i)>r?n:new Array(1+r-i).join("0")+n}function r(e,r){for(var t=(""+e).split("."),n=(""+r).split("."),i=0;i<Math.max(t.length,n.length);i++){var o=parseInt(t[i]||"0",10),s=parseInt(n[i]||"0",10);if(o>s)return 1;if(s>o)return-1}return 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.padNumber=e,exports.compareVersions=r;
},{}],"Gkmg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.add=e,exports.closestOnCircle=n,exports.closestOnSegment=o,exports.createStringXY=u,exports.degreesToStringHDMS=s,exports.format=a,exports.equals=i,exports.rotate=c,exports.scale=f,exports.squaredDistance=p,exports.distance=x,exports.squaredDistanceToSegment=d,exports.toStringHDMS=l,exports.toStringXY=h;var t=require("./math.js"),r=require("./string.js");function e(t,r){return t[0]+=+r[0],t[1]+=+r[1],t}function n(t,r){var e=r.getRadius(),n=r.getCenter(),o=n[0],u=n[1],s=t[0]-o,a=t[1]-u;0===s&&0===a&&(s=1);var i=Math.sqrt(s*s+a*a);return[o+e*s/i,u+e*a/i]}function o(t,r){var e,n,o=t[0],u=t[1],s=r[0],a=r[1],i=s[0],c=s[1],f=a[0],p=a[1],x=f-i,d=p-c,l=0===x&&0===d?0:(x*(o-i)+d*(u-c))/(x*x+d*d||0);return l<=0?(e=i,n=c):l>=1?(e=f,n=p):(e=i+l*x,n=c+l*d),[e,n]}function u(t){return function(r){return h(r,t)}}function s(e,n,o){var u=(0,t.modulo)(n+180,360)-180,s=Math.abs(3600*u),a=o||0,i=Math.pow(10,a),c=Math.floor(s/3600),f=Math.floor((s-3600*c)/60),p=s-3600*c-60*f;return(p=Math.ceil(p*i)/i)>=60&&(p=0,f+=1),f>=60&&(f=0,c+=1),c+"° "+(0,r.padNumber)(f,2)+"′ "+(0,r.padNumber)(p,2,a)+"″"+(0==u?"":" "+e.charAt(u<0?1:0))}function a(t,r,e){return t?r.replace("{x}",t[0].toFixed(e)).replace("{y}",t[1].toFixed(e)):""}function i(t,r){for(var e=!0,n=t.length-1;n>=0;--n)if(t[n]!=r[n]){e=!1;break}return e}function c(t,r){var e=Math.cos(r),n=Math.sin(r),o=t[0]*e-t[1]*n,u=t[1]*e+t[0]*n;return t[0]=o,t[1]=u,t}function f(t,r){return t[0]*=r,t[1]*=r,t}function p(t,r){var e=t[0]-r[0],n=t[1]-r[1];return e*e+n*n}function x(t,r){return Math.sqrt(p(t,r))}function d(t,r){return p(t,o(t,r))}function l(t,r){return t?s("NS",t[1],r)+" "+s("EW",t[0],r):""}function h(t,r){return a(t,"{x}, {y}",r)}
},{"./math.js":"t/nT","./string.js":"xZAE"}],"XQse":[function(require,module,exports) {
"use strict";function e(e){return Math.pow(e,3)}function t(t){return 1-e(1-t)}function n(e){return 3*e*e-2*e*e*e}function r(e){return e}function u(e){return e<.5?n(2*e):1-n(2*(e-.5))}Object.defineProperty(exports,"__esModule",{value:!0}),exports.easeIn=e,exports.easeOut=t,exports.inAndOut=n,exports.linear=r,exports.upAndDown=u;
},{}],"mFnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};exports.default=e;
},{}],"sK7e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};exports.default=e;
},{}],"K8GA":[function(require,module,exports) {
"use strict";function r(r,t,e,n,o,a){for(var f=a||[],s=0,l=t;l<e;l+=n){var u=r[l],v=r[l+1];f[s++]=o[0]*u+o[2]*v+o[4],f[s++]=o[1]*u+o[3]*v+o[5]}return a&&f.length!=s&&(f.length=s),f}function t(r,t,e,n,o,a,f){for(var s=f||[],l=Math.cos(o),u=Math.sin(o),v=a[0],h=a[1],c=0,g=t;g<e;g+=n){var i=r[g]-v,p=r[g+1]-h;s[c++]=v+i*l-p*u,s[c++]=h+i*u+p*l;for(var x=g+2;x<g+n;++x)s[c++]=r[x]}return f&&s.length!=c&&(s.length=c),s}function e(r,t,e,n,o,a,f,s){for(var l=s||[],u=f[0],v=f[1],h=0,c=t;c<e;c+=n){var g=r[c]-u,i=r[c+1]-v;l[h++]=u+o*g,l[h++]=v+a*i;for(var p=c+2;p<c+n;++p)l[h++]=r[p]}return s&&l.length!=h&&(l.length=h),l}function n(r,t,e,n,o,a,f){for(var s=f||[],l=0,u=t;u<e;u+=n){s[l++]=r[u]+o,s[l++]=r[u+1]+a;for(var v=u+2;v<u+n;++v)s[l++]=r[v]}return f&&s.length!=l&&(s.length=l),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.transform2D=r,exports.rotate=t,exports.scale=e,exports.translate=n;
},{}],"PFD2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistance=s,exports.getLength=n,exports.getArea=u,exports.offset=h,exports.DEFAULT_RADIUS=void 0;var e=require("./math.js"),t=a(require("./geom/GeometryType.js"));function a(e){return e&&e.__esModule?e:{default:e}}var r=6371008.8;function s(t,a,s){var o=s||r,n=(0,e.toRadians)(t[1]),i=(0,e.toRadians)(a[1]),u=(i-n)/2,h=(0,e.toRadians)(a[0]-t[0])/2,f=Math.sin(u)*Math.sin(u)+Math.sin(h)*Math.sin(h)*Math.cos(n)*Math.cos(i);return 2*o*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))}function o(e,t){for(var a=0,r=0,o=e.length;r<o-1;++r)a+=s(e[r],e[r+1],t);return a}function n(e,a){var s=a||{},i=s.radius||r,u=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(u,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:break;case t.default.LINE_STRING:case t.default.LINEAR_RING:I=o(f=e.getCoordinates(),i);break;case t.default.MULTI_LINE_STRING:case t.default.POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)I+=o(f[M],i);break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(l=0,g=(d=f[M]).length;l<g;++l)I+=o(d[l],i);break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=n(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function i(t,a){for(var r=0,s=t.length,o=t[s-1][0],n=t[s-1][1],i=0;i<s;i++){var u=t[i][0],h=t[i][1];r+=(0,e.toRadians)(u-o)*(2+Math.sin((0,e.toRadians)(n))+Math.sin((0,e.toRadians)(h))),o=u,n=h}return r*a*a/2}function u(e,a){var s=a||{},o=s.radius||r,n=s.projection||"EPSG:3857",h=e.getType();h!==t.default.GEOMETRY_COLLECTION&&(e=e.clone().transform(n,"EPSG:4326"));var f,d,M,c,l,g,I=0;switch(h){case t.default.POINT:case t.default.MULTI_POINT:case t.default.LINE_STRING:case t.default.MULTI_LINE_STRING:case t.default.LINEAR_RING:break;case t.default.POLYGON:for(f=e.getCoordinates(),I=Math.abs(i(f[0],o)),M=1,c=f.length;M<c;++M)I-=Math.abs(i(f[M],o));break;case t.default.MULTI_POLYGON:for(M=0,c=(f=e.getCoordinates()).length;M<c;++M)for(d=f[M],I+=Math.abs(i(d[0],o)),l=1,g=d.length;l<g;++l)I-=Math.abs(i(d[l],o));break;case t.default.GEOMETRY_COLLECTION:var L=e.getGeometries();for(M=0,c=L.length;M<c;++M)I+=u(L[M],a);break;default:throw new Error("Unsupported geometry type: "+h)}return I}function h(t,a,s,o){var n=o||r,i=(0,e.toRadians)(t[1]),u=(0,e.toRadians)(t[0]),h=a/n,f=Math.asin(Math.sin(i)*Math.cos(h)+Math.cos(i)*Math.sin(h)*Math.cos(s)),d=u+Math.atan2(Math.sin(s)*Math.sin(h)*Math.cos(i),Math.cos(h)-Math.sin(i)*Math.sin(f));return[(0,e.toDegrees)(d),(0,e.toDegrees)(f)]}exports.DEFAULT_RADIUS=r;
},{"./math.js":"t/nT","./geom/GeometryType.js":"mFnd"}],"Y/O/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.METERS_PER_UNIT=void 0;var E={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},e={};exports.METERS_PER_UNIT=e,e[E.DEGREES]=2*Math.PI*6370997/360,e[E.FEET]=.3048,e[E.METERS]=1,e[E.USFEET]=1200/3937;var t=E;exports.default=t;
},{}],"4/ua":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Units.js");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var u=function(){function t(e){n(this,t),this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}return o(t,[{key:"canWrapX",value:function(){return this.canWrapX_}},{key:"getCode",value:function(){return this.code_}},{key:"getExtent",value:function(){return this.extent_}},{key:"getUnits",value:function(){return this.units_}},{key:"getMetersPerUnit",value:function(){return this.metersPerUnit_||e.METERS_PER_UNIT[this.units_]}},{key:"getWorldExtent",value:function(){return this.worldExtent_}},{key:"getAxisOrientation",value:function(){return this.axisOrientation_}},{key:"isGlobal",value:function(){return this.global_}},{key:"setGlobal",value:function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}},{key:"getDefaultTileGrid",value:function(){return this.defaultTileGrid_}},{key:"setDefaultTileGrid",value:function(t){this.defaultTileGrid_=t}},{key:"setExtent",value:function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}},{key:"setWorldExtent",value:function(t){this.worldExtent_=t}},{key:"setGetPointResolution",value:function(t){this.getPointResolutionFunc_=t}},{key:"getPointResolutionFunc",value:function(){return this.getPointResolutionFunc_}}]),t}(),r=u;exports.default=r;
},{"./Units.js":"Y/O/"}],"uAj1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromEPSG4326=b,exports.toEPSG4326=w,exports.PROJECTIONS=exports.WORLD_EXTENT=exports.EXTENT=exports.HALF_SIZE=exports.RADIUS=void 0;var t=require("../math.js"),e=o(require("./Projection.js")),r=o(require("./Units.js"));function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=6378137;exports.RADIUS=p;var l=Math.PI*p;exports.HALF_SIZE=l;var y=[-l,-l,l,l];exports.EXTENT=y;var E=[-180,-85,180,85];exports.WORLD_EXTENT=E;var h=function(o){function n(e){return u(this,n),i(this,c(n).call(this,{code:e,units:r.default.METERS,extent:y,global:!0,worldExtent:E,getPointResolution:function(e,r){return e/(0,t.cosh)(r[1]/p)}}))}return f(n,e.default),n}(),S=[new h("EPSG:3857"),new h("EPSG:102100"),new h("EPSG:102113"),new h("EPSG:900913"),new h("urn:ogc:def:crs:EPSG:6.18:3:3857"),new h("urn:ogc:def:crs:EPSG::3857"),new h("http://www.opengis.net/gml/srs/epsg.xml#3857")];function b(t,e,r){var o=t.length,n=r>1?r:2,u=e;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=l,s=0;s<o;s+=n){u[s]=i*t[s]/180;var c=p*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));c>i?c=i:c<-i&&(c=-i),u[s+1]=c}return u}function w(t,e,r){var o=t.length,n=r>1?r:2,u=e;void 0===u&&(u=n>2?t.slice():new Array(o));for(var i=0;i<o;i+=n)u[i]=180*t[i]/l,u[i+1]=360*Math.atan(Math.exp(t[i+1]/p))/Math.PI-90;return u}exports.PROJECTIONS=S;
},{"../math.js":"t/nT","./Projection.js":"4/ua","./Units.js":"Y/O/"}],"TB0N":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PROJECTIONS=exports.METERS_PER_UNIT=exports.EXTENT=exports.RADIUS=void 0;var e=n(require("./Projection.js")),t=n(require("./Units.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=6378137;exports.RADIUS=p;var l=[-180,-90,180,90];exports.EXTENT=l;var a=Math.PI*p/180;exports.METERS_PER_UNIT=a;var y=function(n){function r(e,n){return o(this,r),u(this,i(r).call(this,{code:e,units:t.default.DEGREES,extent:l,axisOrientation:n,global:!0,metersPerUnit:a,worldExtent:l}))}return s(r,e.default),r}(),E=[new y("CRS:84"),new y("EPSG:4326","neu"),new y("urn:ogc:def:crs:EPSG::4326","neu"),new y("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new y("urn:ogc:def:crs:OGC:1.3:CRS84"),new y("urn:ogc:def:crs:OGC:2:84"),new y("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new y("urn:x-ogc:def:crs:EPSG:4326","neu")];exports.PROJECTIONS=E;
},{"./Projection.js":"4/ua","./Units.js":"Y/O/"}],"lL5c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=t,exports.get=r,exports.add=n;var e={};function t(){e={}}function r(t){return e[t]||null}function n(t,r){e[t]=r}
},{}],"rOVJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clear=r,exports.add=o,exports.remove=n,exports.get=i;var e=require("../obj.js"),t={};function r(){t={}}function o(e,r,o){var n=e.getCode(),i=r.getCode();n in t||(t[n]={}),t[n][i]=o}function n(r,o){var n=r.getCode(),i=o.getCode(),d=t[n][i];return delete t[n][i],(0,e.isEmpty)(t[n])&&delete t[n],d}function i(e,r){var o;return e in t&&r in t[e]&&(o=t[e][r]),o}
},{"../obj.js":"dV1Q"}],"5Zkk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneTransform=d,exports.identityTransform=p,exports.addProjection=l,exports.addProjections=E,exports.get=P,exports.getPointResolution=g,exports.addEquivalentProjections=j,exports.addEquivalentTransforms=v,exports.clearAllProjections=x,exports.createProjection=m,exports.createTransformFromCoordinateTransform=T,exports.addCoordinateTransforms=O,exports.fromLonLat=S,exports.toLonLat=R,exports.equivalent=y,exports.getTransformFromProjections=_,exports.getTransform=h,exports.transform=q,exports.transformExtent=C,exports.transformWithProjections=U,exports.addCommon=b,Object.defineProperty(exports,"Projection",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"METERS_PER_UNIT",{enumerable:!0,get:function(){return s.METERS_PER_UNIT}});var e=require("./sphere.js"),r=require("./extent.js"),t=require("./math.js"),o=require("./proj/epsg3857.js"),n=require("./proj/epsg4326.js"),i=c(require("./proj/Projection.js")),s=f(require("./proj/Units.js")),u=f(require("./proj/projections.js")),a=require("./proj/transforms.js");function f(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}function c(e){return e&&e.__esModule?e:{default:e}}function d(e,r,t){var o;if(void 0!==r){for(var n=0,i=e.length;n<i;++n)r[n]=e[n];o=r}else o=e.slice();return o}function p(e,r,t){if(void 0!==r&&e!==r){for(var o=0,n=e.length;o<n;++o)r[o]=e[o];e=r}return e}function l(e){u.add(e.getCode(),e),(0,a.add)(e,e,d)}function E(e){e.forEach(l)}function P(e){return"string"==typeof e?u.get(e):e||null}function g(r,t,o,n){var i,u=(r=P(r)).getPointResolutionFunc();if(u){if(i=u(t,o),n&&n!==r.getUnits()){var a=r.getMetersPerUnit();a&&(i=i*a/s.METERS_PER_UNIT[n])}}else if(r.getUnits()==s.default.DEGREES&&!n||n==s.default.DEGREES)i=t;else{var f=_(r,P("EPSG:4326")),c=[o[0]-t/2,o[1],o[0]+t/2,o[1],o[0],o[1]-t/2,o[0],o[1]+t/2];c=f(c,c,2),i=((0,e.getDistance)(c.slice(0,2),c.slice(2,4))+(0,e.getDistance)(c.slice(4,6),c.slice(6,8)))/2;var d=n?s.METERS_PER_UNIT[n]:r.getMetersPerUnit();void 0!==d&&(i/=d)}return i}function j(e){E(e),e.forEach(function(r){e.forEach(function(e){r!==e&&(0,a.add)(r,e,d)})})}function v(e,r,t,o){e.forEach(function(e){r.forEach(function(r){(0,a.add)(e,r,t),(0,a.add)(r,e,o)})})}function x(){u.clear(),(0,a.clear)()}function m(e,r){return e?"string"==typeof e?P(e):e:P(r)}function T(e){return function(r,t,o){for(var n=r.length,i=void 0!==o?o:2,s=void 0!==t?t:new Array(n),u=0;u<n;u+=i){var a=e([r[u],r[u+1]]);s[u]=a[0],s[u+1]=a[1];for(var f=i-1;f>=2;--f)s[u+f]=r[u+f]}return s}}function O(e,r,t,o){var n=P(e),i=P(r);(0,a.add)(n,i,T(t)),(0,a.add)(i,n,T(o))}function S(e,r){return q(e,"EPSG:4326",void 0!==r?r:"EPSG:3857")}function R(e,r){var o=q(e,void 0!==r?r:"EPSG:3857","EPSG:4326"),n=o[0];return(n<-180||n>180)&&(o[0]=(0,t.modulo)(n+180,360)-180),o}function y(e,r){if(e===r)return!0;var t=e.getUnits()===r.getUnits();return e.getCode()===r.getCode()?t:_(e,r)===d&&t}function _(e,r){var t=e.getCode(),o=r.getCode(),n=(0,a.get)(t,o);return n||(n=p),n}function h(e,r){return _(P(e),P(r))}function q(e,r,t){return h(r,t)(e,void 0,e.length)}function C(e,t,o){var n=h(t,o);return(0,r.applyTransform)(e,n)}function U(e,r,t){return _(r,t)(e)}function b(){j(o.PROJECTIONS),j(n.PROJECTIONS),v(n.PROJECTIONS,o.PROJECTIONS,o.fromEPSG4326,o.toEPSG4326)}b();
},{"./sphere.js":"PFD2","./extent.js":"+QKI","./math.js":"t/nT","./proj/epsg3857.js":"uAj1","./proj/epsg4326.js":"TB0N","./proj/Projection.js":"4/ua","./proj/Units.js":"Y/O/","./proj/projections.js":"lL5c","./proj/transforms.js":"rOVJ"}],"eGRU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.reset=n,exports.multiply=o,exports.set=s,exports.setFromArray=u,exports.apply=a,exports.rotate=i,exports.scale=c,exports.makeScale=p,exports.translate=x,exports.compose=f,exports.invert=v,exports.makeInverse=l,exports.determinant=m,exports.toString=y;var r=require("./asserts.js"),t=new Array(6);function e(){return[1,0,0,1,0,0]}function n(r){return s(r,1,0,0,1,0,0)}function o(r,t){var e=r[0],n=r[1],o=r[2],s=r[3],u=r[4],a=r[5],i=t[0],c=t[1],p=t[2],x=t[3],f=t[4],v=t[5];return r[0]=e*i+o*c,r[1]=n*i+s*c,r[2]=e*p+o*x,r[3]=n*p+s*x,r[4]=e*f+o*v+u,r[5]=n*f+s*v+a,r}function s(r,t,e,n,o,s,u){return r[0]=t,r[1]=e,r[2]=n,r[3]=o,r[4]=s,r[5]=u,r}function u(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function a(r,t){var e=t[0],n=t[1];return t[0]=r[0]*e+r[2]*n+r[4],t[1]=r[1]*e+r[3]*n+r[5],t}function i(r,e){var n=Math.cos(e),u=Math.sin(e);return o(r,s(t,n,u,-u,n,0,0))}function c(r,e,n){return o(r,s(t,e,0,0,n,0,0))}function p(r,t,e){return s(r,t,0,0,e,0,0)}function x(r,e,n){return o(r,s(t,1,0,0,1,e,n))}function f(r,t,e,n,o,s,u,a){var i=Math.sin(s),c=Math.cos(s);return r[0]=n*c,r[1]=o*i,r[2]=-n*i,r[3]=o*c,r[4]=u*n*c-a*n*i+t,r[5]=u*o*i+a*o*c+e,r}function v(r){return l(r,r)}function l(t,e){var n=m(e);(0,r.assert)(0!==n,32);var o=e[0],s=e[1],u=e[2],a=e[3],i=e[4],c=e[5];return t[0]=a/n,t[1]=-s/n,t[2]=-u/n,t[3]=o/n,t[4]=(u*c-a*i)/n,t[5]=-(o*c-s*i)/n,t}function m(r){return r[0]*r[3]-r[1]*r[2]}function y(r){return"matrix("+r.join(", ")+")"}
},{"./asserts.js":"d7gk"}],"lnvX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=a(require("../Object.js")),n=require("../extent.js"),r=require("./flat/transform.js"),o=require("../proj.js"),i=a(require("../proj/Units.js")),u=require("../transform.js");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),t}function y(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=(0,u.create)(),g=function(a){function s(){var t;return c(this,s),(t=y(this,v(s).call(this))).extent_=(0,n.createEmpty)(),t.extentRevision_=-1,t.simplifiedGeometryCache={},t.simplifiedGeometryMaxMinSquaredTolerance=0,t.simplifiedGeometryRevision=0,t}return b(s,e.default),l(s,[{key:"clone",value:function(){return(0,t.abstract)()}},{key:"closestPointXY",value:function(e,n,r,o){return(0,t.abstract)()}},{key:"containsXY",value:function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}},{key:"getClosestPoint",value:function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n}},{key:"intersectsCoordinate",value:function(t){return this.containsXY(t[0],t[1])}},{key:"computeExtent",value:function(e){return(0,t.abstract)()}},{key:"getExtent",value:function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),(0,n.returnOrUpdate)(this.extent_,t)}},{key:"rotate",value:function(e,n){(0,t.abstract)()}},{key:"scale",value:function(e,n,r){(0,t.abstract)()}},{key:"simplify",value:function(t){return this.getSimplifiedGeometry(t*t)}},{key:"getSimplifiedGeometry",value:function(e){return(0,t.abstract)()}},{key:"getType",value:function(){return(0,t.abstract)()}},{key:"applyTransform",value:function(e){(0,t.abstract)()}},{key:"intersectsExtent",value:function(e){return(0,t.abstract)()}},{key:"translate",value:function(e,n){(0,t.abstract)()}},{key:"transform",value:function(t,e){var a=(0,o.get)(t),s=a.getUnits()==i.default.TILE_PIXELS?function(t,i,s){var c=a.getExtent(),f=a.getWorldExtent(),l=(0,n.getHeight)(f)/(0,n.getHeight)(c);return(0,u.compose)(h,f[0],f[3],l,-l,0,0,0),(0,r.transform2D)(t,0,t.length,s,h,i),(0,o.getTransform)(a,e)(t,i,s)}:(0,o.getTransform)(a,e);return this.applyTransform(s),this}}]),s}(),d=g;exports.default=d;
},{"../util.js":"MHZC","../Object.js":"luFO","../extent.js":"+QKI","./flat/transform.js":"K8GA","../proj.js":"5Zkk","../proj/Units.js":"Y/O/","../transform.js":"eGRU"}],"AOUP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getStrideForLayout=g,exports.transformGeom2D=C,exports.default=void 0;var t=require("../util.js"),e=require("../extent.js"),r=a(require("./Geometry.js")),i=a(require("./GeometryLayout.js")),n=require("./flat/transform.js"),o=require("../obj.js");function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function f(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}function c(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(a){function s(){var t;return u(this,s),(t=c(this,h(s).call(this))).layout=i.default.XY,t.stride=2,t.flatCoordinates=null,t}return y(s,r.default),f(s,[{key:"computeExtent",value:function(t){return(0,e.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinates",value:function(){return(0,t.abstract)()}},{key:"getFirstCoordinate",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"getFlatCoordinates",value:function(){return this.flatCoordinates}},{key:"getLastCoordinate",value:function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}},{key:"getLayout",value:function(){return this.layout}},{key:"getSimplifiedGeometry",value:function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,o.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var r=this.getSimplifiedGeometryInternal(t);return r.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=r,r):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}},{key:"getSimplifiedGeometryInternal",value:function(t){return this}},{key:"getStride",value:function(){return this.stride}},{key:"setFlatCoordinates",value:function(t,e){this.stride=g(t),this.layout=t,this.flatCoordinates=e}},{key:"setCoordinates",value:function(e,r){(0,t.abstract)()}},{key:"setLayout",value:function(t,e,r){var n;if(t)n=g(t);else{for(var o=0;o<r;++o){if(0===e.length)return this.layout=i.default.XY,void(this.stride=2);e=e[0]}t=m(n=e.length)}this.layout=t,this.stride=n}},{key:"applyTransform",value:function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}},{key:"rotate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.rotate)(r,0,r.length,i,t,e,r),this.changed()}}},{key:"scale",value:function(t,r,i){var o=r;void 0===o&&(o=t);var a=i;a||(a=(0,e.getCenter)(this.getExtent()));var s=this.getFlatCoordinates();if(s){var u=this.getStride();(0,n.scale)(s,0,s.length,u,t,o,a,s),this.changed()}}},{key:"translate",value:function(t,e){var r=this.getFlatCoordinates();if(r){var i=this.getStride();(0,n.translate)(r,0,r.length,i,t,e,r),this.changed()}}}]),s}();function m(t){var e;return 2==t?e=i.default.XY:3==t?e=i.default.XYZ:4==t&&(e=i.default.XYZM),e}function g(t){var e;return t==i.default.XY?e=2:t==i.default.XYZ||t==i.default.XYM?e=3:t==i.default.XYZM&&(e=4),e}function C(t,e,r){var i=t.getFlatCoordinates();if(i){var o=t.getStride();return(0,n.transform2D)(i,0,i.length,o,e,r)}return null}var b=v;exports.default=b;
},{"../util.js":"MHZC","../extent.js":"+QKI","./Geometry.js":"lnvX","./GeometryLayout.js":"sK7e","./flat/transform.js":"K8GA","../obj.js":"dV1Q"}],"yR24":[function(require,module,exports) {
"use strict";function r(r,e,n,t){for(var o=0,i=r[n-t],a=r[n-t+1];e<n;e+=t){var s=r[e],u=r[e+1];o+=a*s-i*u,i=s,a=u}return o/2}function e(e,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=r(e,n,u,o),n=u}return i}function n(r,n,t,o){for(var i=0,a=0,s=t.length;a<s;++a){var u=t[a];i+=e(r,n,u,o),n=u[u.length-1]}return i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRing=r,exports.linearRings=e,exports.linearRingss=n;
},{}],"CGCt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.maxSquaredDelta=t,exports.arrayMaxSquaredDelta=a,exports.multiArrayMaxSquaredDelta=n,exports.assignClosestPoint=s,exports.assignClosestArrayPoint=o,exports.assignClosestMultiArrayPoint=i;var r=require("../../math.js");function e(e,t,a,n,s,o,i){var u,f=e[t],l=e[t+1],v=e[a]-f,h=e[a+1]-l;if(0===v&&0===h)u=t;else{var g=((s-f)*v+(o-l)*h)/(v*v+h*h);if(g>1)u=a;else{if(g>0){for(var c=0;c<n;++c)i[c]=(0,r.lerp)(e[t+c],e[a+c],g);return void(i.length=n)}u=t}}for(var N=0;N<n;++N)i[N]=e[u+N];i.length=n}function t(e,t,a,n,s){var o=e[t],i=e[t+1];for(t+=n;t<a;t+=n){var u=e[t],f=e[t+1],l=(0,r.squaredDistance)(o,i,u,f);l>s&&(s=l),o=u,i=f}return s}function a(r,e,a,n,s){for(var o=0,i=a.length;o<i;++o){var u=a[o];s=t(r,e,u,n,s),e=u}return s}function n(r,e,t,n,s){for(var o=0,i=t.length;o<i;++o){var u=t[o];s=a(r,e,u,n,s),e=u[u.length-1]}return s}function s(t,a,n,s,o,i,u,f,l,v,h){if(a==n)return v;var g,c;if(0===o){if((c=(0,r.squaredDistance)(u,f,t[a],t[a+1]))<v){for(g=0;g<s;++g)l[g]=t[a+g];return l.length=s,c}return v}for(var N=h||[NaN,NaN],x=a+s;x<n;)if(e(t,x-s,x,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s,x+=s}else x+=s*Math.max((Math.sqrt(c)-Math.sqrt(v))/o|0,1);if(i&&(e(t,n-s,a,s,u,f,N),(c=(0,r.squaredDistance)(u,f,N[0],N[1]))<v)){for(v=c,g=0;g<s;++g)l[g]=N[g];l.length=s}return v}function o(r,e,t,a,n,o,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=s(r,e,N,a,n,o,i,u,f,l,h),e=N}return l}function i(r,e,t,a,n,s,i,u,f,l,v){for(var h=v||[NaN,NaN],g=0,c=t.length;g<c;++g){var N=t[g];l=o(r,e,N,a,n,s,i,u,f,l,h),e=N[N.length-1]}return l}
},{"../../math.js":"t/nT"}],"81ry":[function(require,module,exports) {
"use strict";function e(e,r,t,n){for(var o=0,a=t.length;o<a;++o)e[r++]=t[o];return r}function r(e,r,t,n){for(var o=0,a=t.length;o<a;++o)for(var f=t[o],l=0;l<n;++l)e[r++]=f[l];return r}function t(e,t,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=r(e,t,n[u],o);f[l++]=s,t=s}return f.length=l,f}function n(e,r,n,o,a){for(var f=a||[],l=0,u=0,i=n.length;u<i;++u){var s=t(e,r,n[u],o,f[l]);f[l++]=s,r=s[s.length-1]}return f.length=l,f}Object.defineProperty(exports,"__esModule",{value:!0}),exports.deflateCoordinate=e,exports.deflateCoordinates=r,exports.deflateCoordinatesArray=t,exports.deflateMultiCoordinatesArray=n;
},{}],"qHzx":[function(require,module,exports) {
"use strict";function e(e,r,t,n,o){for(var i=void 0!==o?o:[],a=0,l=r;l<t;l+=n)i[a++]=e.slice(l,l+n);return i.length=a,i}function r(r,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=e(r,t,u,o,a[l]),t=u}return a.length=l,a}function t(e,t,n,o,i){for(var a=void 0!==i?i:[],l=0,s=0,f=n.length;s<f;++s){var u=n[s];a[l++]=r(e,t,u,o,a[l]),t=u[u.length-1]}return a.length=l,a}Object.defineProperty(exports,"__esModule",{value:!0}),exports.inflateCoordinates=e,exports.inflateCoordinatesArray=r,exports.inflateMultiCoordinatesArray=t;
},{}],"ITgx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplifyLineString=e,exports.douglasPeucker=t,exports.douglasPeuckerArray=n,exports.douglasPeuckerMultiArray=u,exports.radialDistance=a,exports.snap=o,exports.quantize=i,exports.quantizeArray=s,exports.quantizeMultiArray=f;var r=require("../../math.js");function e(r,e,n,u,o,i,s){var f=void 0!==s?s:[];return i||(n=a(r,e,n,u,o,f,0),r=f,e=0,u=2),f.length=t(r,e,n,u,o,f,0),f}function t(e,t,n,u,a,o,i){var s=(n-t)/u;if(s<3){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var f=new Array(s);f[0]=1,f[s-1]=1;for(var p=[t,n-u],v=0;p.length>0;){for(var l=p.pop(),c=p.pop(),h=0,g=e[c],d=e[c+1],x=e[l],y=e[l+1],q=c+u;q<l;q+=u){var A=e[q],M=e[q+1],P=(0,r.squaredSegmentDistance)(A,M,g,d,x,y);P>h&&(v=q,h=P)}h>a&&(f[(v-t)/u]=1,c+u<v&&p.push(c,v),v+u<l&&p.push(v,l))}for(var k=0;k<s;++k)f[k]&&(o[i++]=e[t+k*u],o[i++]=e[t+k*u+1]);return i}function n(r,e,n,u,a,o,i,s){for(var f=0,p=n.length;f<p;++f){var v=n[f];i=t(r,e,v,u,a,o,i),s.push(i),e=v}return i}function u(r,e,t,u,a,o,i,s){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];i=n(r,e,v,u,a,o,i,l),s.push(l),e=v[v.length-1]}return i}function a(e,t,n,u,a,o,i){if(n<=t+u){for(;t<n;t+=u)o[i++]=e[t],o[i++]=e[t+1];return i}var s=e[t],f=e[t+1];o[i++]=s,o[i++]=f;var p=s,v=f;for(t+=u;t<n;t+=u)p=e[t],v=e[t+1],(0,r.squaredDistance)(s,f,p,v)>a&&(o[i++]=p,o[i++]=v,s=p,f=v);return p==s&&v==f||(o[i++]=p,o[i++]=v),i}function o(r,e){return e*Math.round(r/e)}function i(r,e,t,n,u,a,i){if(e==t)return i;var s,f,p=o(r[e],u),v=o(r[e+1],u);e+=n,a[i++]=p,a[i++]=v;do{if(s=o(r[e],u),f=o(r[e+1],u),(e+=n)==t)return a[i++]=s,a[i++]=f,i}while(s==p&&f==v);for(;e<t;){var l=o(r[e],u),c=o(r[e+1],u);if(e+=n,l!=s||c!=f){var h=s-p,g=f-v,d=l-p,x=c-v;h*x==g*d&&(h<0&&d<h||h==d||h>0&&d>h)&&(g<0&&x<g||g==x||g>0&&x>g)?(s=l,f=c):(a[i++]=s,a[i++]=f,p=s,v=f,s=l,f=c)}}return a[i++]=s,a[i++]=f,i}function s(r,e,t,n,u,a,o,s){for(var f=0,p=t.length;f<p;++f){var v=t[f];o=i(r,e,v,n,u,a,o),s.push(o),e=v}return o}function f(r,e,t,n,u,a,o,i){for(var f=0,p=t.length;f<p;++f){var v=t[f],l=[];o=s(r,e,v,n,u,a,o,l),i.push(l),e=v[v.length-1]}return o}
},{"../../math.js":"t/nT"}],"9NBU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=u(require("./GeometryLayout.js")),r=u(require("./GeometryType.js")),n=u(require("./SimpleGeometry.js")),o=require("./flat/area.js"),i=require("./flat/closest.js"),s=require("./flat/deflate.js"),a=require("./flat/inflate.js"),l=require("./flat/simplify.js");function u(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t}function y(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(u){function f(t,e){var r;return c(this,f),(r=y(this,v(f).call(this))).maxDelta_=-1,r.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?r.setCoordinates(t,e):r.setFlatCoordinates(e,t),r}return b(f,n.default),d(f,[{key:"clone",value:function(){return new f(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(e,r,n,o){return o<(0,t.closestSquaredDistanceXY)(this.getExtent(),e,r)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,i.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,i.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,r,n,o))}},{key:"getArea",value:function(){return(0,o.linearRing)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getSimplifiedGeometryInternal",value:function(t){var r=[];return r.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new f(r,e.default.XY)}},{key:"getType",value:function(){return r.default.LINEAR_RING}},{key:"intersectsExtent",value:function(t){return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),f}(),C=g;exports.default=C;
},{"../extent.js":"+QKI","./GeometryLayout.js":"sK7e","./GeometryType.js":"mFnd","./SimpleGeometry.js":"AOUP","./flat/area.js":"yR24","./flat/closest.js":"CGCt","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","./flat/simplify.js":"ITgx"}],"phv5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=i(require("./GeometryType.js")),o=i(require("./SimpleGeometry.js")),n=require("./flat/deflate.js"),r=require("../math.js");function i(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,o){return e&&s(t.prototype,e),o&&s(t,o),t}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(i){function u(t,e){var o;return a(this,u),(o=l(this,y(u).call(this))).setCoordinates(t,e),o}return d(u,o.default),f(u,[{key:"clone",value:function(){return new u(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,e,o,n){var i=this.flatCoordinates,u=(0,r.squaredDistance)(t,e,i[0],i[1]);if(u<n){for(var a=this.stride,s=0;s<a;++s)o[s]=i[s];return o.length=a,u}return n}},{key:"getCoordinates",value:function(){return this.flatCoordinates?this.flatCoordinates.slice():[]}},{key:"computeExtent",value:function(e){return(0,t.createOrUpdateFromCoordinate)(this.flatCoordinates,e)}},{key:"getType",value:function(){return e.default.POINT}},{key:"intersectsExtent",value:function(e){return(0,t.containsXY)(e,this.flatCoordinates[0],this.flatCoordinates[1])}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,n.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),u}(),b=h;exports.default=b;
},{"../extent.js":"+QKI","./GeometryType.js":"mFnd","./SimpleGeometry.js":"AOUP","./flat/deflate.js":"81ry","../math.js":"t/nT"}],"bXFg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingContainsExtent=n,exports.linearRingContainsXY=e,exports.linearRingsContainsXY=t,exports.linearRingssContainsXY=i;var r=require("../../extent.js");function n(n,t,i,o,u){return!(0,r.forEachCorner)(u,function(r){return!e(n,t,i,o,r[0],r[1])})}function e(r,n,e,t,i,o){for(var u=0,a=r[e-t],s=r[e-t+1];n<e;n+=t){var f=r[n],l=r[n+1];s<=o?l>o&&(f-a)*(o-s)-(i-a)*(l-s)>0&&u++:l<=o&&(f-a)*(o-s)-(i-a)*(l-s)<0&&u--,a=f,s=l}return 0!==u}function t(r,n,t,i,o,u){if(0===t.length)return!1;if(!e(r,n,t[0],i,o,u))return!1;for(var a=1,s=t.length;a<s;++a)if(e(r,t[a-1],t[a],i,o,u))return!1;return!0}function i(r,n,e,i,o,u){if(0===e.length)return!1;for(var a=0,s=e.length;a<s;++a){var f=e[a];if(t(r,n,f,i,o,u))return!0;n=f[f.length-1]}return!1}
},{"../../extent.js":"+QKI"}],"g0iU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInteriorPointOfArray=t,exports.getInteriorPointsOfMultiArray=n;var r=require("../../array.js"),e=require("./contains.js");function t(t,n,a,o,i,s,u){for(var f,l,v,g,h,p,c,y=i[s+1],N=[],b=0,j=a.length;b<j;++b){var x=a[b];for(g=t[x-o],p=t[x-o+1],f=n;f<x;f+=o)h=t[f],c=t[f+1],(y<=p&&c<=y||p<=y&&y<=c)&&(v=(y-p)/(c-p)*(h-g)+g,N.push(v)),g=h,p=c}var M=NaN,O=-1/0;for(N.sort(r.numberSafeCompareFunction),g=N[0],f=1,l=N.length;f<l;++f){h=N[f];var P=Math.abs(h-g);P>O&&(v=(g+h)/2,(0,e.linearRingsContainsXY)(t,n,a,o,v,y)&&(M=v,O=P)),g=h}return isNaN(M)&&(M=i[s]),u?(u.push(M,y,O),u):[M,y,O]}function n(r,e,n,a,o){for(var i=[],s=0,u=n.length;s<u;++s){var f=n[s];i=t(r,e,f,a,o,2*s,i),e=f[f.length-1]}return i}
},{"../../array.js":"YQ1M","./contains.js":"bXFg"}],"icib":[function(require,module,exports) {
"use strict";function e(e,r,t,o,u){for(var f,n=[e[r],e[r+1]],s=[];r+o<t;r+=o){if(s[0]=e[r+o],s[1]=e[r+o+1],f=u(n,s))return f;n[0]=s[0],n[1]=s[1]}return!1}Object.defineProperty(exports,"__esModule",{value:!0}),exports.forEach=e;
},{}],"8o94":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.intersectsLineString=t,exports.intersectsLineStringArray=i,exports.intersectsLinearRing=s,exports.intersectsLinearRingArray=a,exports.intersectsLinearRingMultiArray=o;var n=require("../../extent.js"),e=require("./contains.js"),r=require("./segments.js");function t(e,t,i,s,a){var o=(0,n.extendFlatCoordinates)((0,n.createEmpty)(),e,t,i,s);return!!(0,n.intersects)(a,o)&&(!!(0,n.containsExtent)(a,o)||(o[0]>=a[0]&&o[2]<=a[2]||(o[1]>=a[1]&&o[3]<=a[3]||(0,r.forEach)(e,t,i,s,function(e,r){return(0,n.intersectsSegment)(a,e,r)}))))}function i(n,e,r,i,s){for(var a=0,o=r.length;a<o;++a){if(t(n,e,r[a],i,s))return!0;e=r[a]}return!1}function s(n,r,i,s,a){return!!t(n,r,i,s,a)||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[1])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[0],a[3])||(!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[1])||!!(0,e.linearRingContainsXY)(n,r,i,s,a[2],a[3]))))}function a(n,r,i,a,o){if(!s(n,r,i[0],a,o))return!1;if(1===i.length)return!0;for(var u=1,c=i.length;u<c;++u)if((0,e.linearRingContainsExtent)(n,i[u-1],i[u],a,o)&&!t(n,i[u-1],i[u],a,o))return!1;return!0}function o(n,e,r,t,i){for(var s=0,o=r.length;s<o;++s){var u=r[s];if(a(n,e,u,t,i))return!0;e=u[u.length-1]}return!1}
},{"../../extent.js":"+QKI","./contains.js":"bXFg","./segments.js":"icib"}],"9wPS":[function(require,module,exports) {
"use strict";function e(e,r,o,t){for(;r<o-t;){for(var s=0;s<t;++s){var a=e[r+s];e[r+s]=e[o-t+s],e[o-t+s]=a}r+=t,o-=t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.coordinates=e;
},{}],"33rR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingIsClockwise=e,exports.linearRingsAreOriented=n,exports.linearRingssAreOriented=t,exports.orientLinearRings=i,exports.orientLinearRingsArray=o;var r=require("./reverse.js");function e(r,e,n,t){for(var i=0,o=r[n-t],s=r[n-t+1];e<n;e+=t){var a=r[e],u=r[e+1];i+=(a-o)*(u+s),o=a,s=u}return i>0}function n(r,n,t,i,o){for(var s=void 0!==o&&o,a=0,u=t.length;a<u;++a){var f=t[a],v=e(r,n,f,i);if(0===a){if(s&&v||!s&&!v)return!1}else if(s&&!v||!s&&v)return!1;n=f}return!0}function t(r,e,t,i,o){for(var s=0,a=t.length;s<a;++s){var u=t[s];if(!n(r,e,u,i,o))return!1;u.length&&(e=u[u.length-1])}return!0}function i(n,t,i,o,s){for(var a=void 0!==s&&s,u=0,f=i.length;u<f;++u){var v=i[u],l=e(n,t,v,o);(0===u?a&&l||!a&&!l:a&&!l||!a&&l)&&(0,r.coordinates)(n,t,v,o),t=v}return t}function o(r,e,n,t,o){for(var s=0,a=n.length;s<a;++s)e=i(r,e,n[s],t,o);return e}
},{"./reverse.js":"9wPS"}],"mzg3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circular=w,exports.fromExtent=I,exports.fromCircle=L,exports.makeRegular=S,exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=p(require("./GeometryLayout.js")),n=p(require("./GeometryType.js")),r=p(require("./LinearRing.js")),s=p(require("./Point.js")),o=p(require("./SimpleGeometry.js")),a=require("../sphere.js"),l=require("./flat/area.js"),u=require("./flat/closest.js"),d=require("./flat/contains.js"),f=require("./flat/deflate.js"),h=require("./flat/inflate.js"),c=require("./flat/interiorpoint.js"),g=require("./flat/intersectsextent.js"),y=require("./flat/orient.js"),v=require("./flat/simplify.js"),_=require("../math.js");function p(t){return t&&t.__esModule?t:{default:t}}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function j(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),t}function b(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?q(t):e}function q(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k=function(a){function _(t,e,i){var n;return R(this,_),(n=b(this,x(_).call(this))).ends_=[],n.flatInteriorPointRevision_=-1,n.flatInteriorPoint_=null,n.maxDelta_=-1,n.maxDeltaRevision_=-1,n.orientedRevision_=-1,n.orientedFlatCoordinates_=null,void 0!==e&&i?(n.setFlatCoordinates(e,t),n.ends_=i):n.setCoordinates(t,e),n}return P(_,o.default),j(_,[{key:"appendLinearRing",value:function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){return new _(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}},{key:"closestPointXY",value:function(t,i,n,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,u.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,u.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,i,n,r))}},{key:"containsXY",value:function(t,e){return(0,d.linearRingsContainsXY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,l.linearRings)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,y.orientLinearRings)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,h.inflateCoordinatesArray)(e,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getFlatInteriorPoint",value:function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=(0,e.getCenter)(this.getExtent());this.flatInteriorPoint_=(0,c.getInteriorPointOfArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}},{key:"getInteriorPoint",value:function(){return new s.default(this.getFlatInteriorPoint(),i.default.XYM)}},{key:"getLinearRingCount",value:function(){return this.ends_.length}},{key:"getLinearRing",value:function(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLinearRings",value:function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[],s=0,o=0,a=i.length;o<a;++o){var l=i[o],u=new r.default(e.slice(s,l),t);n.push(u),s=l}return n}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,y.linearRingsAreOriented)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,y.orientLinearRings)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],n=[];return e.length=(0,v.quantizeArray)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new _(e,i.default.XY,n)}},{key:"getType",value:function(){return n.default.POLYGON}},{key:"intersectsExtent",value:function(t){return(0,g.intersectsLinearRingArray)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,f.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}]),_}(),F=k;function w(e,n,r,s){for(var o=r||32,l=[],u=0;u<o;++u)(0,t.extend)(l,(0,a.offset)(e,n,2*Math.PI*u/o,s));return l.push(l[0],l[1]),new k(l,i.default.XY,[l.length])}function I(t){var e=t[0],n=t[1],r=t[2],s=t[3],o=[e,n,e,s,r,s,r,n,e,n];return new k(o,i.default.XY,[o.length])}function L(t,e,i){for(var n=e||32,r=t.getStride(),s=t.getLayout(),o=t.getCenter(),a=r*(n+1),l=new Array(a),u=0;u<a;u+=r){l[u]=0,l[u+1]=0;for(var d=2;d<r;d++)l[u+d]=o[d]}var f=[l.length],h=new k(l,s,f);return S(h,o,t.getRadius(),i),h}function S(t,e,i,n){for(var r=t.getFlatCoordinates(),s=t.getStride(),o=r.length/s-1,a=n||0,l=0;l<=o;++l){var u=l*s,d=a+2*(0,_.modulo)(l,o)*Math.PI/o;r[u]=e[0]+i*Math.cos(d),r[u+1]=e[1]+i*Math.sin(d)}t.changed()}exports.default=F;
},{"../array.js":"YQ1M","../extent.js":"+QKI","./GeometryLayout.js":"sK7e","./GeometryType.js":"mFnd","./LinearRing.js":"9NBU","./Point.js":"phv5","./SimpleGeometry.js":"AOUP","../sphere.js":"PFD2","./flat/area.js":"yR24","./flat/closest.js":"CGCt","./flat/contains.js":"bXFg","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","./flat/interiorpoint.js":"g0iU","./flat/intersectsextent.js":"8o94","./flat/orient.js":"33rR","./flat/simplify.js":"ITgx","../math.js":"t/nT"}],"pzWF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCenterConstraint=Z,exports.createResolutionConstraint=F,exports.createRotationConstraint=w,exports.isNoopAnimation=N,exports.default=void 0;var t=require("./tilegrid/common.js"),e=require("./util.js"),o=require("./functions.js"),i=require("./centerconstraint.js"),n=y(require("./Object.js")),r=require("./resolutionconstraint.js"),s=require("./rotationconstraint.js"),a=y(require("./ViewHint.js")),u=y(require("./ViewProperty.js")),l=require("./array.js"),h=require("./asserts.js"),c=require("./coordinate.js"),g=require("./easing.js"),m=require("./extent.js"),v=y(require("./geom/GeometryType.js")),f=require("./geom/Polygon.js"),_=require("./math.js"),R=require("./obj.js"),d=require("./proj.js"),p=y(require("./proj/Units.js"));function y(t){return t&&t.__esModule?t:{default:t}}function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function x(t,e,o){return e&&k(t.prototype,e),o&&k(t,o),t}function j(t,e){return!e||"object"!==C(e)&&"function"!=typeof e?T(t):e}function T(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E=0,O=function(t){function i(t){var e;M(this,i),e=j(this,A(i).call(this));var o=(0,R.assign)({},t);return e.hints_=[0,0],e.animations_=[],e.updateAnimationKey_,e.projection_=(0,d.createProjection)(o.projection,"EPSG:3857"),e.targetCenter_=null,e.targetResolution_,e.targetRotation_,e.applyOptions_(o),e}return b(i,n.default),x(i,[{key:"applyOptions_",value:function(t){var e=F(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var o=Z(t),i=e.constraint,n=w(t);this.constraints_={center:o,resolution:i,rotation:n},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenter(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.resolveConstraints(0),this.setProperties({}),this.options_=t}},{key:"getUpdatedOptions_",value:function(t){var e=(0,R.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),(0,R.assign)({},e,t)}},{key:"animate",value:function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0),this.animate_.apply(this,arguments)}},{key:"animate_",value:function(t){var e,o=arguments.length;if(o>1&&"function"==typeof arguments[o-1]&&(e=arguments[o-1],--o),!this.isDef()){var i=arguments[o-1];return i.center&&this.setCenter(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&I(e,!0))}for(var n=Date.now(),r=this.targetCenter_.slice(),s=this.targetResolution_,u=this.targetRotation_,l=[],h=0;h<o;++h){var c=arguments[h],m={start:n,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||g.inAndOut,callback:e};if(c.center&&(m.sourceCenter=r,m.targetCenter=c.center.slice(),r=m.targetCenter),void 0!==c.zoom?(m.sourceResolution=s,m.targetResolution=this.getResolutionForZoom(c.zoom),s=m.targetResolution):c.resolution&&(m.sourceResolution=s,m.targetResolution=c.resolution,s=m.targetResolution),void 0!==c.rotation){m.sourceRotation=u;var v=(0,_.modulo)(c.rotation-u+Math.PI,2*Math.PI)-Math.PI;m.targetRotation=u+v,u=m.targetRotation}N(m)?m.complete=!0:n+=m.duration,l.push(m)}this.animations_.push(l),this.setHint(a.default.ANIMATING,1),this.updateAnimations_()}},{key:"getAnimating",value:function(){return this.hints_[a.default.ANIMATING]>0}},{key:"getInteracting",value:function(){return this.hints_[a.default.INTERACTING]>0}},{key:"cancelAnimations",value:function(){this.setHint(a.default.ANIMATING,-this.hints_[a.default.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var o=this.animations_[t];o[0].callback&&I(o[0].callback,!1)}this.animations_.length=0}},{key:"updateAnimations_",value:function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],n=!0,r=0,s=i.length;r<s;++r){var u=i[r];if(!u.complete){var l=t-u.start,h=u.duration>0?l/u.duration:1;h>=1?(u.complete=!0,h=1):n=!1;var c=u.easing(h);if(u.sourceCenter){var g=u.sourceCenter[0],m=u.sourceCenter[1],v=g+c*(u.targetCenter[0]-g),f=m+c*(u.targetCenter[1]-m);this.targetCenter_=[v,f]}if(u.sourceResolution&&u.targetResolution){var R=1===c?u.targetResolution:u.sourceResolution+c*(u.targetResolution-u.sourceResolution);if(u.anchor){var d=this.getSizeFromViewport_(this.getRotation()),p=this.constraints_.resolution(R,0,d,!0);this.targetCenter_=this.calculateCenterZoom(p,u.anchor)}this.targetResolution_=R,this.applyTargetState_(!0)}if(void 0!==u.sourceRotation&&void 0!==u.targetRotation){var y=1===c?(0,_.modulo)(u.targetRotation+Math.PI,2*Math.PI)-Math.PI:u.sourceRotation+c*(u.targetRotation-u.sourceRotation);if(u.anchor){var C=this.constraints_.rotation(y,!0);this.targetCenter_=this.calculateCenterRotate(C,u.anchor)}this.targetRotation_=y}if(this.applyTargetState_(!0),e=!0,!u.complete)break}}if(n){this.animations_[o]=null,this.setHint(a.default.ANIMATING,-1);var M=i[0].callback;M&&I(M,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}}},{key:"calculateCenterRotate",value:function(t,e){var o,i=this.getCenter();return void 0!==i&&(o=[i[0]-e[0],i[1]-e[1]],(0,c.rotate)(o,t-this.getRotation()),(0,c.add)(o,e)),o}},{key:"calculateCenterZoom",value:function(t,e){var o,i=this.getCenter(),n=this.getResolution();void 0!==i&&void 0!==n&&(o=[e[0]-t*(e[0]-i[0])/n,e[1]-t*(e[1]-i[1])/n]);return o}},{key:"getSizeFromViewport_",value:function(t){var o=[100,100],i='.ol-viewport[data-view="'+(0,e.getUid)(this)+'"]',n=document.querySelector(i);if(n){var r=getComputedStyle(n);o[0]=parseInt(r.width,10),o[1]=parseInt(r.height,10)}if(t){var s=o[0],a=o[1];o[0]=Math.abs(s*Math.cos(t))+Math.abs(a*Math.sin(t)),o[1]=Math.abs(s*Math.sin(t))+Math.abs(a*Math.cos(t))}return o}},{key:"getCenter",value:function(){return this.get(u.default.CENTER)}},{key:"getConstraints",value:function(){return this.constraints_}},{key:"getHints",value:function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}},{key:"calculateExtent",value:function(t){var e=t||this.getSizeFromViewport_(),o=this.getCenter();(0,h.assert)(o,1);var i=this.getResolution();(0,h.assert)(void 0!==i,2);var n=this.getRotation();return(0,h.assert)(void 0!==n,3),(0,m.getForViewAndSize)(o,i,n,e)}},{key:"getMaxResolution",value:function(){return this.maxResolution_}},{key:"getMinResolution",value:function(){return this.minResolution_}},{key:"getMaxZoom",value:function(){return this.getZoomForResolution(this.minResolution_)}},{key:"setMaxZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}},{key:"getMinZoom",value:function(){return this.getZoomForResolution(this.maxResolution_)}},{key:"setMinZoom",value:function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}},{key:"setConstrainResolution",value:function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolution",value:function(){return this.get(u.default.RESOLUTION)}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getResolutionForExtent",value:function(t,e){var o=e||this.getSizeFromViewport_(),i=(0,m.getWidth)(t)/o[0],n=(0,m.getHeight)(t)/o[1];return Math.max(i,n)}},{key:"getResolutionForValueFunction",value:function(t){var e=t||2,o=this.maxResolution_,i=this.minResolution_,n=Math.log(o/i)/Math.log(e);return function(t){return o/Math.pow(e,t*n)}}},{key:"getRotation",value:function(){return this.get(u.default.ROTATION)}},{key:"getValueForResolutionFunction",value:function(t){var e=t||2,o=this.maxResolution_,i=this.minResolution_,n=Math.log(o/i)/Math.log(e);return function(t){return Math.log(o/t)/Math.log(e)/n}}},{key:"getState",value:function(t){var e=this.getCenter(),o=this.getProjection(),i=this.getResolution(),n=this.getRotation();return{center:e.slice(0),projection:void 0!==o?o:null,resolution:i,rotation:n,zoom:this.getZoom()}}},{key:"getZoom",value:function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}},{key:"getZoomForResolution",value:function(t){var e,o,i=this.minZoom_||0;if(this.resolutions_){var n=(0,l.linearFindNearest)(this.resolutions_,t,1);i=n,e=this.resolutions_[n],o=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,o=this.zoomFactor_;return i+Math.log(e/t)/Math.log(o)}},{key:"getResolutionForZoom",value:function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=(0,_.clamp)(Math.floor(t),0,this.resolutions_.length-2),o=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(o,(0,_.clamp)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}},{key:"fit",value:function(t,e){var i,n=e||{},r=n.size;r||(r=this.getSizeFromViewport_()),(0,h.assert)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?((0,h.assert)(!(0,m.isEmpty)(t),25),i=(0,f.fromExtent)(t)):t.getType()===v.default.CIRCLE?(t=t.getExtent(),(i=(0,f.fromExtent)(t)).rotate(this.getRotation(),(0,m.getCenter)(t))):i=t;var s,a=void 0!==n.padding?n.padding:[0,0,0,0],u=void 0!==n.nearest&&n.nearest;s=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var l=i.getFlatCoordinates(),c=this.getRotation(),g=Math.cos(-c),_=Math.sin(-c),R=1/0,d=1/0,p=-1/0,y=-1/0,C=i.getStride(),M=0,k=l.length;M<k;M+=C){var x=l[M]*g-l[M+1]*_,j=l[M]*_+l[M+1]*g;R=Math.min(R,x),d=Math.min(d,j),p=Math.max(p,x),y=Math.max(y,j)}var T=this.getResolutionForExtent([R,d,p,y],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);T=isNaN(T)?s:Math.max(T,s),T=this.getConstrainedResolution(T,u?0:1),_=-_;var A=(R+p)/2,b=(d+y)/2,S=[(A+=(a[1]-a[3])/2*T)*g-(b+=(a[0]-a[2])/2*T)*_,b*g+A*_],E=n.callback?n.callback:o.VOID;void 0!==n.duration?this.animate_({resolution:T,center:this.getConstrainedCenter(S,T),duration:n.duration,easing:n.easing},E):(this.targetResolution_=T,this.targetCenter_=S,this.applyTargetState_(!1,!0),I(E,!0))}},{key:"centerOn",value:function(t,e,o){var i=this.getRotation(),n=Math.cos(-i),r=Math.sin(-i),s=t[0]*n-t[1]*r,a=t[1]*n+t[0]*r,u=this.getResolution(),l=(s+=(e[0]/2-o[0])*u)*n-(a+=(o[1]-e[1]/2)*u)*(r=-r),h=a*n+s*r;this.setCenter([l,h])}},{key:"isDef",value:function(){return!!this.getCenter()&&void 0!==this.getResolution()}},{key:"adjustCenter",value:function(t){var e=this.targetCenter_;this.setCenter([e[0]+t[0],e[1]+t[1]])}},{key:"adjustResolution",value:function(t,e){var o=this.getAnimating()||this.getInteracting(),i=this.getSizeFromViewport_(this.getRotation()),n=this.constraints_.resolution(this.targetResolution_*t,0,i,o);void 0!==e&&(this.targetCenter_=this.calculateCenterZoom(n,e)),this.targetResolution_*=t,this.applyTargetState_()}},{key:"adjustZoom",value:function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}},{key:"adjustRotation",value:function(t,e){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,o);void 0!==e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}},{key:"setCenter",value:function(t){this.targetCenter_=t,this.applyTargetState_()}},{key:"setHint",value:function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}},{key:"setResolution",value:function(t){this.targetResolution_=t,this.applyTargetState_()}},{key:"setRotation",value:function(t){this.targetRotation_=t,this.applyTargetState_()}},{key:"setZoom",value:function(t){this.setResolution(this.getResolutionForZoom(t))}},{key:"applyTargetState_",value:function(t,e){var o=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,o),n=this.getSizeFromViewport_(i),r=this.constraints_.resolution(this.targetResolution_,0,n,o),s=this.constraints_.center(this.targetCenter_,r,n,o);this.get(u.default.ROTATION)!==i&&this.set(u.default.ROTATION,i),this.get(u.default.RESOLUTION)!==r&&this.set(u.default.RESOLUTION,r),this.get(u.default.CENTER)&&(0,c.equals)(this.get(u.default.CENTER),s)||this.set(u.default.CENTER,s),this.getAnimating()&&!t&&this.cancelAnimations()}},{key:"resolveConstraints",value:function(t,e,o){var i=void 0!==t?t:200,n=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getSizeFromViewport_(r),a=this.constraints_.resolution(this.targetResolution_,n,s),u=this.constraints_.center(this.targetCenter_,a,s);if(0===i)return this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=u,void this.applyTargetState_();this.getResolution()===a&&this.getRotation()===r&&this.getCenter()&&(0,c.equals)(this.getCenter(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animate_({rotation:r,center:u,resolution:a,duration:i,easing:g.easeOut,anchor:o}))}},{key:"beginInteraction",value:function(){this.resolveConstraints(0),this.setHint(a.default.INTERACTING,1)}},{key:"endInteraction",value:function(t,e,o){this.setHint(a.default.INTERACTING,-1),this.resolveConstraints(t,e,o)}},{key:"getConstrainedCenter",value:function(t,e){var o=this.getSizeFromViewport_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),o)}},{key:"getConstrainedZoom",value:function(t,e){var o=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(o))}},{key:"getConstrainedResolution",value:function(t,e){var o=e||0,i=this.getSizeFromViewport_(this.getRotation());return this.constraints_.resolution(t,o,i)}}]),i}();function I(t,e){setTimeout(function(){t(e)},0)}function Z(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return(0,i.createExtent)(t.extent,t.constrainOnlyCenter,e)}var o=(0,d.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&o.isGlobal()){var n=o.getExtent().slice();return n[0]=-1/0,n[2]=1/0,(0,i.createExtent)(n,!1,!1)}return i.none}function F(e){var o,i,n,s=void 0!==e.minZoom?e.minZoom:E,a=void 0!==e.maxZoom?e.maxZoom:28,u=void 0!==e.zoomFactor?e.zoomFactor:2,l=void 0!==e.multiWorld&&e.multiWorld,h=void 0===e.smoothResolutionConstraint||e.smoothResolutionConstraint;if(void 0!==e.resolutions){var c=e.resolutions;i=c[s],n=void 0!==c[a]?c[a]:c[c.length-1],o=e.constrainResolution?(0,r.createSnapToResolutions)(c,h,!e.constrainOnlyCenter&&e.extent):(0,r.createMinMaxResolution)(i,n,h,!e.constrainOnlyCenter&&e.extent)}else{var g=(0,d.createProjection)(e.projection,"EPSG:3857"),v=g.getExtent(),f=(v?Math.max((0,m.getWidth)(v),(0,m.getHeight)(v)):360*d.METERS_PER_UNIT[p.default.DEGREES]/g.getMetersPerUnit())/t.DEFAULT_TILE_SIZE/Math.pow(2,E),_=f/Math.pow(2,28-E);if(void 0!==(i=e.maxResolution)?s=0:i=f/Math.pow(u,s),void 0===(n=e.minResolution)&&(n=void 0!==e.maxZoom?void 0!==e.maxResolution?i/Math.pow(u,a):f/Math.pow(u,a):_),a=s+Math.floor(Math.log(i/n)/Math.log(u)),n=i/Math.pow(u,a-s),e.constrainResolution)o=(0,r.createSnapToPower)(u,i,n,h,!e.constrainOnlyCenter&&e.extent);else{var R=e.constrainOnlyCenter,y=e.extent;l||y||!g.isGlobal()||(R=!1,y=g.getExtent()),o=(0,r.createMinMaxResolution)(i,n,h,!R&&y)}}return{constraint:o,maxResolution:i,minResolution:n,minZoom:s,zoomFactor:u}}function w(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(0,s.createSnapToZero)():!1===e?s.none:"number"==typeof e?(0,s.createSnapToN)(e):s.none}return s.disable}function N(t){return!(t.sourceCenter&&t.targetCenter&&!(0,c.equals)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var z=O;exports.default=z;
},{"./tilegrid/common.js":"BCyk","./util.js":"MHZC","./functions.js":"bH9H","./centerconstraint.js":"O2jG","./Object.js":"luFO","./resolutionconstraint.js":"nQDJ","./rotationconstraint.js":"oxRp","./ViewHint.js":"Lb7V","./ViewProperty.js":"8K6Q","./array.js":"YQ1M","./asserts.js":"d7gk","./coordinate.js":"Gkmg","./easing.js":"XQse","./extent.js":"+QKI","./geom/GeometryType.js":"mFnd","./geom/Polygon.js":"mzg3","./math.js":"t/nT","./obj.js":"dV1Q","./proj.js":"5Zkk","./proj/Units.js":"Y/O/"}],"4KLO":[function(require,module,exports) {
"use strict";function e(e,t){var r=document.createElement("canvas");return e&&(r.width=e),t&&(r.height=t),r.getContext("2d")}function t(e){var t=e.offsetWidth,r=getComputedStyle(e);return t+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function r(e){var t=e.offsetHeight,r=getComputedStyle(e);return t+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function o(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function n(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function i(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function a(e,t){for(var r=e.childNodes,o=0;;++o){var n=r[o],i=t[o];if(!n&&!i)break;n!==i&&(n?i?e.insertBefore(i,n):(e.removeChild(n),--o):e.appendChild(i))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=e,exports.outerWidth=t,exports.outerHeight=r,exports.replaceNode=o,exports.removeNode=n,exports.removeChildren=i,exports.replaceChildren=a;
},{}],"wwTv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"};exports.default=e;
},{}],"CZzU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=i(require("../Object.js")),n=i(require("./Property.js")),o=require("../math.js"),u=require("../obj.js");function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function f(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(i){function r(t){var e;a(this,r),e=f(this,y(r).call(this));var o=(0,u.assign)({},t);return o[n.default.OPACITY]=void 0!==t.opacity?t.opacity:1,o[n.default.VISIBLE]=void 0===t.visible||t.visible,o[n.default.Z_INDEX]=t.zIndex,o[n.default.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,o[n.default.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e.className_=void 0!==o.className?t.className:"ol-layer",delete o.className,e.setProperties(o),e.state_=null,e}return d(r,e.default),l(r,[{key:"getClassName",value:function(){return this.className_}},{key:"getLayerState",value:function(t){var e=this.state_||{layer:this,managed:void 0===t||t};return e.opacity=(0,o.clamp)(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=this.getZIndex()||(!1===e.managed?1/0:0),e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),this.state_=e,e}},{key:"getLayersArray",value:function(e){return(0,t.abstract)()}},{key:"getLayerStatesArray",value:function(e){return(0,t.abstract)()}},{key:"getExtent",value:function(){return this.get(n.default.EXTENT)}},{key:"getMaxResolution",value:function(){return this.get(n.default.MAX_RESOLUTION)}},{key:"getMinResolution",value:function(){return this.get(n.default.MIN_RESOLUTION)}},{key:"getOpacity",value:function(){return this.get(n.default.OPACITY)}},{key:"getSourceState",value:function(){return(0,t.abstract)()}},{key:"getVisible",value:function(){return this.get(n.default.VISIBLE)}},{key:"getZIndex",value:function(){return this.get(n.default.Z_INDEX)}},{key:"setExtent",value:function(t){this.set(n.default.EXTENT,t)}},{key:"setMaxResolution",value:function(t){this.set(n.default.MAX_RESOLUTION,t)}},{key:"setMinResolution",value:function(t){this.set(n.default.MIN_RESOLUTION,t)}},{key:"setOpacity",value:function(t){this.set(n.default.OPACITY,t)}},{key:"setVisible",value:function(t){this.set(n.default.VISIBLE,t)}},{key:"setZIndex",value:function(t){this.set(n.default.Z_INDEX,t)}}]),r}(),h=v;exports.default=h;
},{"../util.js":"MHZC","../Object.js":"luFO","./Property.js":"wwTv","../math.js":"t/nT","../obj.js":"dV1Q"}],"FQoO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"};exports.default=e;
},{}],"2uKf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=f(require("../Collection.js")),n=f(require("../CollectionEventType.js")),r=require("../Object.js"),i=f(require("../ObjectEventType.js")),s=require("../asserts.js"),a=require("../events.js"),o=f(require("../events/EventType.js")),u=require("../extent.js"),l=f(require("./Base.js")),y=require("../obj.js"),h=f(require("../source/State.js"));function f(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?b(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j={LAYERS:"layers"},m=function(f){function c(e){var n;d(this,c);var i=e||{},o=(0,y.assign)({},i);delete o.layers;var u=i.layers;return(n=p(this,_(c).call(this,o))).layersListenerKeys_=[],n.listenerKeys_={},(0,a.listen)(b(n),(0,r.getChangeEventType)(j.LAYERS),n.handleLayersChanged_,b(n)),u?Array.isArray(u)?u=new t.default(u.slice(),{unique:!0}):(0,s.assert)("function"==typeof u.getArray,43):u=new t.default(void 0,{unique:!0}),n.setLayers(u),n}return L(c,l.default),g(c,[{key:"handleLayerChange_",value:function(){this.changed()}},{key:"handleLayersChanged_",value:function(){this.layersListenerKeys_.forEach(a.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var r in this.layersListenerKeys_.push((0,a.listen)(t,n.default.ADD,this.handleLayersAdd_,this),(0,a.listen)(t,n.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[r].forEach(a.unlistenByKey);(0,y.clear)(this.listenerKeys_);for(var s=t.getArray(),u=0,l=s.length;u<l;u++){var h=s[u];this.listenerKeys_[(0,e.getUid)(h)]=[(0,a.listen)(h,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(h,o.default.CHANGE,this.handleLayerChange_,this)]}this.changed()}},{key:"handleLayersAdd_",value:function(t){var n=t.element;this.listenerKeys_[(0,e.getUid)(n)]=[(0,a.listen)(n,i.default.PROPERTYCHANGE,this.handleLayerChange_,this),(0,a.listen)(n,o.default.CHANGE,this.handleLayerChange_,this)],this.changed()}},{key:"handleLayersRemove_",value:function(t){var n=t.element,r=(0,e.getUid)(n);this.listenerKeys_[r].forEach(a.unlistenByKey),delete this.listenerKeys_[r],this.changed()}},{key:"getLayers",value:function(){return this.get(j.LAYERS)}},{key:"setLayers",value:function(e){this.set(j.LAYERS,e)}},{key:"getLayersArray",value:function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}},{key:"getLayerStatesArray",value:function(e){var t=void 0!==e?e:[],n=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});for(var r=this.getLayerState(),i=n,s=t.length;i<s;i++){var a=t[i];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==a.extent?a.extent=(0,u.getIntersection)(a.extent,r.extent):a.extent=r.extent)}return t}},{key:"getSourceState",value:function(){return h.default.READY}}]),c}(),A=m;exports.default=A;
},{"../util.js":"MHZC","../Collection.js":"dXq/","../CollectionEventType.js":"XSCF","../Object.js":"luFO","../ObjectEventType.js":"7xWn","../asserts.js":"d7gk","../events.js":"sgxS","../events/EventType.js":"KZbn","../extent.js":"+QKI","./Base.js":"CZzU","../obj.js":"dV1Q","../source/State.js":"FQoO"}],"sBZd":[function(require,module,exports) {
"use strict";function r(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]+2*e,t[1]=r[1]+2*e,t}function e(r){return r[0]>0&&r[1]>0}function t(r,e,t){return void 0===t&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function o(r,e){return Array.isArray(r)?r:(void 0===e?e=[r,r]:e[0]=e[1]=r,e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.buffer=r,exports.hasArea=e,exports.scale=t,exports.toSize=o;
},{}],"9d4m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./util.js"),t=S(require("./Collection.js")),r=S(require("./CollectionEventType.js")),n=S(require("./MapBrowserEvent.js")),i=S(require("./MapBrowserEventHandler.js")),a=S(require("./MapBrowserEventType.js")),o=S(require("./MapEvent.js")),s=S(require("./MapEventType.js")),l=S(require("./MapProperty.js")),u=S(require("./render/EventType.js")),d=L(require("./Object.js")),h=S(require("./ObjectEventType.js")),y=S(require("./TileQueue.js")),v=S(require("./View.js")),f=S(require("./ViewHint.js")),c=require("./asserts.js"),p=require("./dom.js"),_=require("./events.js"),g=S(require("./events/EventType.js")),E=require("./extent.js"),m=require("./functions.js"),w=require("./has.js"),T=S(require("./layer/Group.js")),C=require("./size.js"),k=require("./structs/PriorityQueue.js"),R=require("./transform.js");function L(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t,r){return t&&P(e.prototype,t),r&&P(e,r),e}function A(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t,r){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=j(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(v){function c(e){var n;x(this,c),n=A(this,K(c).call(this));var o=q(e);for(var s in n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:w.DEVICE_PIXEL_RATIO,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(I(n)),n.coordinateToPixelTransform_=(0,R.create)(),n.pixelToCoordinateTransform_=(0,R.create)(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+(w.TOUCH?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.viewport_.style.msTouchAction="none",n.viewport_.style.touchAction="none",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new i.default(I(n),e.moveTolerance),a.default)(0,_.listen)(n.mapBrowserEventHandler_,a.default[s],n.handleMapBrowserEvent,I(n));return n.keyboardEventTarget_=o.keyboardEventTarget,n.keyHandlerKeys_=null,(0,_.listen)(n.viewport_,g.default.CONTEXTMENU,n.handleBrowserEvent,I(n)),(0,_.listen)(n.viewport_,g.default.WHEEL,n.handleBrowserEvent,I(n)),(0,_.listen)(n.viewport_,g.default.MOUSEWHEEL,n.handleBrowserEvent,I(n)),n.controls=o.controls||new t.default,n.interactions=o.interactions||new t.default,n.labelCacheListenerKey_,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=n.createRenderer(),n.handleResize_,n.focus_=null,n.postRenderFunctions_=[],n.tileQueue_=new y.default(n.getTilePriority.bind(I(n)),n.handleTileChange_.bind(I(n))),n.skippedFeatureUids_={},(0,_.listen)(I(n),(0,d.getChangeEventType)(l.default.LAYERGROUP),n.handleLayerGroupChanged_,I(n)),(0,_.listen)(I(n),(0,d.getChangeEventType)(l.default.VIEW),n.handleViewChanged_,I(n)),(0,_.listen)(I(n),(0,d.getChangeEventType)(l.default.SIZE),n.handleSizeChanged_,I(n)),(0,_.listen)(I(n),(0,d.getChangeEventType)(l.default.TARGET),n.handleTargetChanged_,I(n)),n.setProperties(o.values),n.controls.forEach(function(e){e.setMap(this)}.bind(I(n))),(0,_.listen)(n.controls,r.default.ADD,function(e){e.element.setMap(this)},I(n)),(0,_.listen)(n.controls,r.default.REMOVE,function(e){e.element.setMap(null)},I(n)),n.interactions.forEach(function(e){e.setMap(this)}.bind(I(n))),(0,_.listen)(n.interactions,r.default.ADD,function(e){e.element.setMap(this)},I(n)),(0,_.listen)(n.interactions,r.default.REMOVE,function(e){e.element.setMap(null)},I(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(I(n))),(0,_.listen)(n.overlays_,r.default.ADD,function(e){this.addOverlayInternal_(e.element)},I(n)),(0,_.listen)(n.overlays_,r.default.REMOVE,function(e){var t=e.element.getId();void 0!==t&&delete this.overlayIdIndex_[t.toString()],e.element.setMap(null)},I(n)),n}return M(c,d.default),O(c,[{key:"createRenderer",value:function(){throw new Error("Use a map type that has a createRenderer method")}},{key:"addControl",value:function(e){this.getControls().push(e)}},{key:"addInteraction",value:function(e){this.getInteractions().push(e)}},{key:"addLayer",value:function(e){this.getLayerGroup().getLayers().push(e)}},{key:"addOverlay",value:function(e){this.getOverlays().push(e)}},{key:"addOverlayInternal_",value:function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}},{key:"attachLabelCache",value:function(e){this.detachLabelCache(),this.labelCacheListenerKey_=(0,_.listen)(e,g.default.CLEAR,this.redrawText.bind(this))}},{key:"detachLabelCache",value:function(){this.labelCacheListenerKey_&&(0,_.unlistenByKey)(this.labelCacheListenerKey_)}},{key:"disposeInternal",value:function(){this.mapBrowserEventHandler_.dispose(),(0,_.unlisten)(this.viewport_,g.default.CONTEXTMENU,this.handleBrowserEvent,this),(0,_.unlisten)(this.viewport_,g.default.WHEEL,this.handleBrowserEvent,this),(0,_.unlisten)(this.viewport_,g.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(g.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.detachLabelCache(),this.setTarget(null),F(K(c.prototype),"disposeInternal",this).call(this)}},{key:"forEachFeatureAtPixel",value:function(e,t,r){if(this.frameState_){var n=this.getCoordinateFromPixel(e),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,a=void 0!==r.layerFilter?r.layerFilter:m.TRUE;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,t,null,a,null)}}},{key:"getFeaturesAtPixel",value:function(e,t){var r=null;return this.forEachFeatureAtPixel(e,function(e){r||(r=[]),r.push(e)},t),r}},{key:"forEachLayerAtPixel",value:function(e,t,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,a=n.layerFilter||m.TRUE;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,i,t,a)}}},{key:"hasFeatureAtPixel",value:function(e,t){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixel(e),n=void 0!==(t=void 0!==t?t:{}).layerFilter?t.layerFilter:m.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,n,null)}},{key:"getEventCoordinate",value:function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}},{key:"getEventPixel",value:function(e){var t=this.viewport_.getBoundingClientRect(),r="changedTouches"in e?e.changedTouches[0]:e;return[r.clientX-t.left,r.clientY-t.top]}},{key:"getTarget",value:function(){return this.get(l.default.TARGET)}},{key:"getTargetElement",value:function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null}},{key:"getCoordinateFromPixel",value:function(e){var t=this.frameState_;return t?(0,R.apply)(t.pixelToCoordinateTransform,e.slice()):null}},{key:"getControls",value:function(){return this.controls}},{key:"getOverlays",value:function(){return this.overlays_}},{key:"getOverlayById",value:function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null}},{key:"getInteractions",value:function(){return this.interactions}},{key:"getLayerGroup",value:function(){return this.get(l.default.LAYERGROUP)}},{key:"getLayers",value:function(){return this.getLayerGroup().getLayers()}},{key:"getLoading",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer.getSource();if(n&&n.loading)return!0}return!1}},{key:"getPixelFromCoordinate",value:function(e){var t=this.frameState_;return t?(0,R.apply)(t.coordinateToPixelTransform,e.slice(0,2)):null}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"getSize",value:function(){return this.get(l.default.SIZE)}},{key:"getView",value:function(){return this.get(l.default.VIEW)}},{key:"getViewport",value:function(){return this.viewport_}},{key:"getOverlayContainer",value:function(){return this.overlayContainer_}},{key:"getOverlayContainerStopEvent",value:function(){return this.overlayContainerStopEvent_}},{key:"getTilePriority",value:function(e,t,r,n){var i=this.frameState_;if(!(i&&t in i.wantedTiles))return k.DROP;if(!i.wantedTiles[t][e.getKey()])return k.DROP;var a=r[0]-i.focus[0],o=r[1]-i.focus[1];return 65536*Math.log(n)+Math.sqrt(a*a+o*o)/n}},{key:"handleBrowserEvent",value:function(e,t){var r=t||e.type,i=new n.default(r,this,e);this.handleMapBrowserEvent(i)}},{key:"handleMapBrowserEvent",value:function(e){if(this.frameState_){for(var t=e.originalEvent.target;t instanceof HTMLElement;){if(t.parentElement===this.overlayContainerStopEvent_)return;t=t.parentElement}this.focus_=e.coordinate,e.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(e))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive())if(!i.handleEvent(e))break}}}},{key:"handlePostRender",value:function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var r=this.maxTilesLoading_,n=r;if(e){var i=e.viewHints;if(i[f.default.ANIMATING]||i[f.default.INTERACTING]){var a=Date.now()-e.time>8;r=a?0:8,n=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,n))}!e||!this.hasListener(u.default.RENDERCOMPLETE)||e.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(u.default.RENDERCOMPLETE,e);for(var o=this.postRenderFunctions_,s=0,l=o.length;s<l;++s)o[s](this,e);o.length=0}},{key:"handleSizeChanged_",value:function(){this.getView()&&this.getView().resolveConstraints(0),this.render()}},{key:"handleTargetChanged_",value:function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,r=this.keyHandlerKeys_.length;t<r;++t)(0,_.unlistenByKey)(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_);var n=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[(0,_.listen)(n,g.default.KEYDOWN,this.handleBrowserEvent,this),(0,_.listen)(n,g.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(g.default.RESIZE,this.handleResize_,!1))}else(0,p.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(g.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()}},{key:"handleTileChange_",value:function(){this.render()}},{key:"handleViewPropertyChanged_",value:function(){this.render()}},{key:"handleViewChanged_",value:function(){this.viewPropertyListenerKey_&&((0,_.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,_.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",(0,e.getUid)(t)),this.viewPropertyListenerKey_=(0,_.listen)(t,h.default.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,_.listen)(t,g.default.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}},{key:"handleLayerGroupChanged_",value:function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(_.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[(0,_.listen)(e,h.default.PROPERTYCHANGE,this.render,this),(0,_.listen)(e,g.default.CHANGE,this.render,this)]),this.render()}},{key:"isRendered",value:function(){return!!this.frameState_}},{key:"renderSync",value:function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}},{key:"redrawText",value:function(){for(var e=this.getLayerGroup().getLayerStatesArray(),t=0,r=e.length;t<r;++t){var n=e[t].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}},{key:"render",value:function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}},{key:"removeControl",value:function(e){return this.getControls().remove(e)}},{key:"removeInteraction",value:function(e){return this.getInteractions().remove(e)}},{key:"removeLayer",value:function(e){return this.getLayerGroup().getLayers().remove(e)}},{key:"removeOverlay",value:function(e){return this.getOverlays().remove(e)}},{key:"renderFrame_",value:function(e){var t,r=this.getSize(),n=this.getView(),i=(0,E.createEmpty)(),a=this.frameState_,l=null;if(void 0!==r&&(0,C.hasArea)(r)&&n&&n.isDef()){var u=n.getHints(this.frameState_?this.frameState_.viewHints:void 0);t=n.getState(this.pixelRatio_),l={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:a?a.declutterItems:[],extent:i,focus:this.focus_?this.focus_:t.center,index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:r,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:t,viewHints:u,wantedTiles:{}}}if(l&&(l.extent=(0,E.getForViewAndSize)(t.center,t.resolution,t.rotation,l.size,i)),this.frameState_=l,this.renderer_.renderFrame(l),l){if(l.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,l.postRenderFunctions),a)(!this.previousExtent_||!(0,E.isEmpty)(this.previousExtent_)&&!(0,E.equals)(l.extent,this.previousExtent_))&&(this.dispatchEvent(new o.default(s.default.MOVESTART,this,a)),this.previousExtent_=(0,E.createOrUpdateEmpty)(this.previousExtent_));this.previousExtent_&&!l.viewHints[f.default.ANIMATING]&&!l.viewHints[f.default.INTERACTING]&&!(0,E.equals)(l.extent,this.previousExtent_)&&(this.dispatchEvent(new o.default(s.default.MOVEEND,this,l)),(0,E.clone)(l.extent,this.previousExtent_))}this.dispatchEvent(new o.default(s.default.POSTRENDER,this,l)),setTimeout(this.handlePostRender.bind(this),0)}},{key:"setLayerGroup",value:function(e){this.set(l.default.LAYERGROUP,e)}},{key:"setSize",value:function(e){this.set(l.default.SIZE,e)}},{key:"setTarget",value:function(e){this.set(l.default.TARGET,e)}},{key:"setView",value:function(e){this.set(l.default.VIEW,e)}},{key:"skipFeature",value:function(t){this.skippedFeatureUids_[(0,e.getUid)(t)]=!0,this.render()}},{key:"updateSize",value:function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0)}},{key:"unskipFeature",value:function(t){delete this.skippedFeatureUids_[(0,e.getUid)(t)],this.render()}}]),c}();function q(e){var r=null;void 0!==e.keyboardEventTarget&&(r="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var n,i,a,o={},s=e.layers&&"function"==typeof e.layers.getLayers?e.layers:new T.default({layers:e.layers});return o[l.default.LAYERGROUP]=s,o[l.default.TARGET]=e.target,o[l.default.VIEW]=void 0!==e.view?e.view:new v.default,void 0!==e.controls&&(Array.isArray(e.controls)?n=new t.default(e.controls.slice()):((0,c.assert)("function"==typeof e.controls.getArray,47),n=e.controls)),void 0!==e.interactions&&(Array.isArray(e.interactions)?i=new t.default(e.interactions.slice()):((0,c.assert)("function"==typeof e.interactions.getArray,48),i=e.interactions)),void 0!==e.overlays?Array.isArray(e.overlays)?a=new t.default(e.overlays.slice()):((0,c.assert)("function"==typeof e.overlays.getArray,49),a=e.overlays):a=new t.default,{controls:n,interactions:i,keyboardEventTarget:r,overlays:a,values:o}}var B=D;exports.default=B;
},{"./util.js":"MHZC","./Collection.js":"dXq/","./CollectionEventType.js":"XSCF","./MapBrowserEvent.js":"hEV5","./MapBrowserEventHandler.js":"CDN1","./MapBrowserEventType.js":"530S","./MapEvent.js":"9bdb","./MapEventType.js":"ON6V","./MapProperty.js":"kwS9","./render/EventType.js":"X6Tz","./Object.js":"luFO","./ObjectEventType.js":"7xWn","./TileQueue.js":"Io5d","./View.js":"pzWF","./ViewHint.js":"Lb7V","./asserts.js":"d7gk","./dom.js":"4KLO","./events.js":"sgxS","./events/EventType.js":"KZbn","./extent.js":"+QKI","./functions.js":"bH9H","./has.js":"1fCX","./layer/Group.js":"2uKf","./size.js":"sBZd","./structs/PriorityQueue.js":"gu2c","./transform.js":"eGRU"}],"AN01":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../functions.js"),t=i(require("../MapEventType.js")),n=i(require("../Object.js")),r=require("../dom.js"),o=require("../events.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(i){function u(t){var n;return l(this,u),(n=f(this,h(u).call(this))).element=t.element?t.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render=t.render?t.render:e.VOID,t.target&&n.setTarget(t.target),n}return d(u,n.default),a(u,[{key:"disposeInternal",value:function(){(0,r.removeNode)(this.element),p(h(u.prototype),"disposeInternal",this).call(this)}},{key:"getMap",value:function(){return this.map_}},{key:"setMap",value:function(n){this.map_&&(0,r.removeNode)(this.element);for(var i=0,u=this.listenerKeys.length;i<u;++i)(0,o.unlistenByKey)(this.listenerKeys[i]);(this.listenerKeys.length=0,this.map_=n,this.map_)&&((this.target_?this.target_:n.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==e.VOID&&this.listenerKeys.push((0,o.listen)(n,t.default.POSTRENDER,this.render,this)),n.render())}},{key:"setTarget",value:function(e){this.target_="string"==typeof e?document.getElementById(e):e}}]),u}(),g=m;exports.default=g;
},{"../functions.js":"bH9H","../MapEventType.js":"ON6V","../Object.js":"luFO","../dom.js":"4KLO","../events.js":"sgxS"}],"Gcgx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getFontFamilies=exports.CLASS_COLLAPSED=exports.CLASS_CONTROL=exports.CLASS_UNSUPPORTED=exports.CLASS_UNSELECTABLE=exports.CLASS_SELECTABLE=exports.CLASS_HIDDEN=void 0;var e="ol-hidden";exports.CLASS_HIDDEN=e;var t="ol-selectable";exports.CLASS_SELECTABLE=t;var o="ol-unselectable";exports.CLASS_UNSELECTABLE=o;var r="ol-unsupported";exports.CLASS_UNSUPPORTED=r;var S="ol-control";exports.CLASS_CONTROL=S;var s="ol-collapsed";exports.CLASS_COLLAPSED=s;var L=function(){var e,t={};return function(o){if(e||(e=document.createElement("div").style),!(o in t)){e.font=o;var r=e.fontFamily;if(e.font="",!r)return null;t[o]=r.split(/,\s?/)}return t[o]}}();exports.getFontFamilies=L;
},{}],"7nok":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visibleAtResolution=m,exports.default=void 0;var e=require("../events.js"),t=s(require("../events/EventType.js")),r=require("../Object.js"),n=s(require("./Base.js")),u=s(require("./Property.js")),o=require("../obj.js"),i=s(require("../render/EventType.js")),a=s(require("../source/State.js"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(s){function l(t){var n;c(this,l);var i=(0,o.assign)({},t);delete i.source,(n=h(this,p(l).call(this,i))).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,t.render&&(n.render=t.render),t.map&&n.setMap(t.map),(0,e.listen)(d(n),(0,r.getChangeEventType)(u.default.SOURCE),n.handleSourcePropertyChange_,d(n));var a=t.source?t.source:null;return n.setSource(a),n}return v(l,n.default),f(l,[{key:"getLayersArray",value:function(e){var t=e||[];return t.push(this),t}},{key:"getLayerStatesArray",value:function(e){var t=e||[];return t.push(this.getLayerState()),t}},{key:"getSource",value:function(){return this.get(u.default.SOURCE)||null}},{key:"getSourceState",value:function(){var e=this.getSource();return e?e.getState():a.default.UNDEFINED}},{key:"handleSourceChange_",value:function(){this.changed()}},{key:"handleSourcePropertyChange_",value:function(){this.sourceChangeKey_&&((0,e.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=(0,e.listen)(r,t.default.CHANGE,this.handleSourceChange_,this)),this.changed()}},{key:"render",value:function(e,t){var r=this.getRenderer();if(r.prepareFrame(e))return r.renderFrame(e,t)}},{key:"setMap",value:function(r){this.mapPrecomposeKey_&&((0,e.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&((0,e.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=(0,e.listen)(r,i.default.PRECOMPOSE,function(e){e.frameState.layerStatesArray.push(this.getLayerState(!1))},this),this.mapRenderKey_=(0,e.listen)(this,t.default.CHANGE,r.render,r),this.changed())}},{key:"setSource",value:function(e){this.set(u.default.SOURCE,e)}},{key:"getRenderer",value:function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}},{key:"hasRenderer",value:function(){return!!this.renderer_}},{key:"createRenderer",value:function(){return null}}]),l}();function m(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution}var b=g;exports.default=b;
},{"../events.js":"sgxS","../events/EventType.js":"KZbn","../Object.js":"luFO","./Base.js":"CZzU","./Property.js":"wwTv","../obj.js":"dV1Q","../render/EventType.js":"X6Tz","../source/State.js":"FQoO"}],"0UdI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=v,exports.default=void 0;var e=require("../array.js"),t=a(require("./Control.js")),l=require("../css.js"),o=require("../dom.js"),n=require("../events.js"),i=a(require("../events/EventType.js")),r=require("../layer/Layer.js");function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t,l){return t&&c(e.prototype,t),l&&c(e,l),e}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(a){function s(e){var t;u(this,s);var o=e||{};(t=d(this,b(s).call(this,{element:document.createElement("div"),render:o.render||v,target:o.target}))).ulElement_=document.createElement("ul"),t.collapsed_=void 0===o.collapsed||o.collapsed,t.overrideCollapsible_=void 0!==o.collapsible,t.collapsible_=void 0===o.collapsible||o.collapsible,t.collapsible_||(t.collapsed_=!1);var r=void 0!==o.className?o.className:"ol-attribution",a=void 0!==o.tipLabel?o.tipLabel:"Attributions",c=void 0!==o.collapseLabel?o.collapseLabel:"»";"string"==typeof c?(t.collapseLabel_=document.createElement("span"),t.collapseLabel_.textContent=c):t.collapseLabel_=c;var p=void 0!==o.label?o.label:"i";"string"==typeof p?(t.label_=document.createElement("span"),t.label_.textContent=p):t.label_=p;var _=t.collapsible_&&!t.collapsed_?t.collapseLabel_:t.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=a,h.appendChild(_),(0,n.listen)(h,i.default.CLICK,t.handleClick_,f(t));var y=r+" "+l.CLASS_UNSELECTABLE+" "+l.CLASS_CONTROL+(t.collapsed_&&t.collapsible_?" "+l.CLASS_COLLAPSED:"")+(t.collapsible_?"":" ol-uncollapsible"),m=t.element;return m.className=y,m.appendChild(t.ulElement_),m.appendChild(h),t.renderedAttributions_=[],t.renderedVisible_=!0,t}return _(s,t.default),p(s,[{key:"collectSourceAttributions_",value:function(e){for(var t={},l=[],o=e.layerStatesArray,n=e.viewState.resolution,i=0,a=o.length;i<a;++i){var s=o[i];if((0,r.visibleAtResolution)(s,n)){var u=s.layer.getSource();if(u){var c=u.getAttributions();if(c){var p=c(e);if(p)if(this.overrideCollapsible_||!1!==u.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(p))for(var d=0,b=p.length;d<b;++d)p[d]in t||(l.push(p[d]),t[p[d]]=!0);else p in t||(l.push(p),t[p]=!0)}}}}return l}},{key:"updateElement_",value:function(t){if(t){var l=this.collectSourceAttributions_(t),n=l.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!(0,e.equals)(l,this.renderedAttributions_)){(0,o.removeChildren)(this.ulElement_);for(var i=0,r=l.length;i<r;++i){var a=document.createElement("li");a.innerHTML=l[i],this.ulElement_.appendChild(a)}this.renderedAttributions_=l}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_()}},{key:"handleToggle_",value:function(){this.element.classList.toggle(l.CLASS_COLLAPSED),this.collapsed_?(0,o.replaceNode)(this.collapseLabel_,this.label_):(0,o.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}}]),s}();function v(e){this.updateElement_(e.frameState)}var m=y;exports.default=m;
},{"../array.js":"YQ1M","./Control.js":"AN01","../css.js":"Gcgx","../dom.js":"4KLO","../events.js":"sgxS","../events/EventType.js":"KZbn","../layer/Layer.js":"7nok"}],"cG5r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=v,exports.default=void 0;var e=a(require("./Control.js")),t=require("../css.js"),o=require("../easing.js"),r=require("../events.js"),n=a(require("../events/EventType.js"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,o){return t&&s(e.prototype,t),o&&s(e,o),e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(a){function i(e){var o;l(this,i);var a=e||{};o=c(this,f(i).call(this,{element:document.createElement("div"),render:a.render||v,target:a.target}));var s=void 0!==a.className?a.className:"ol-rotate",u=void 0!==a.label?a.label:"⇧";o.label_=null,"string"==typeof u?(o.label_=document.createElement("span"),o.label_.className="ol-compass",o.label_.textContent=u):(o.label_=u,o.label_.classList.add("ol-compass"));var p=a.tipLabel?a.tipLabel:"Reset rotation",_=document.createElement("button");_.className=s+"-reset",_.setAttribute("type","button"),_.title=p,_.appendChild(o.label_),(0,r.listen)(_,n.default.CLICK,o.handleClick_,d(o));var b=s+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL,h=o.element;return h.className=b,h.appendChild(_),o.callResetNorth_=a.resetNorth?a.resetNorth:void 0,o.duration_=void 0!==a.duration?a.duration:250,o.autoHide_=void 0===a.autoHide||a.autoHide,o.rotation_=void 0,o.autoHide_&&o.element.classList.add(t.CLASS_HIDDEN),o}return p(i,e.default),u(i,[{key:"handleClick_",value:function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}},{key:"resetNorth_",value:function(){var e=this.getMap().getView();e&&void 0!==e.getRotation()&&(this.duration_>0?e.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):e.setRotation(0))}}]),i}();function v(e){var o=e.frameState;if(o){var r=o.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var a=this.element.classList.contains(t.CLASS_HIDDEN);a||0!==r?a&&0!==r&&this.element.classList.remove(t.CLASS_HIDDEN):this.element.classList.add(t.CLASS_HIDDEN)}this.label_.style.transform=n}this.rotation_=r}}var h=b;exports.default=h;
},{"./Control.js":"AN01","../css.js":"Gcgx","../easing.js":"XQse","../events.js":"sgxS","../events/EventType.js":"KZbn"}],"vhDn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=i(require("../events/EventType.js")),o=i(require("./Control.js")),n=require("../css.js"),r=require("../easing.js");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,o){return t&&l(e.prototype,t),o&&l(e,o),e}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(i){function a(o){var r;u(this,a);var i=o||{};r=s(this,f(a).call(this,{element:document.createElement("div"),target:i.target}));var l=void 0!==i.className?i.className:"ol-zoom",c=void 0!==i.delta?i.delta:1,p=void 0!==i.zoomInLabel?i.zoomInLabel:"+",m=void 0!==i.zoomOutLabel?i.zoomOutLabel:"−",b=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",y=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",v=document.createElement("button");v.className=l+"-in",v.setAttribute("type","button"),v.title=b,v.appendChild("string"==typeof p?document.createTextNode(p):p),(0,e.listen)(v,t.default.CLICK,r.handleClick_.bind(d(r),c));var h=document.createElement("button");h.className=l+"-out",h.setAttribute("type","button"),h.title=y,h.appendChild("string"==typeof m?document.createTextNode(m):m),(0,e.listen)(h,t.default.CLICK,r.handleClick_.bind(d(r),-c));var _=l+" "+n.CLASS_UNSELECTABLE+" "+n.CLASS_CONTROL,C=r.element;return C.className=_,C.appendChild(v),C.appendChild(h),r.duration_=void 0!==i.duration?i.duration:250,r}return p(a,o.default),c(a,[{key:"handleClick_",value:function(e,t){t.preventDefault(),this.zoomByDelta_(e)}},{key:"zoomByDelta_",value:function(e){var t=this.getMap().getView();if(t){var o=t.getZoom();if(void 0!==o){var n=t.getConstrainedZoom(o+e);this.duration_>0?(t.getAnimating()&&t.cancelAnimations(),t.animate({zoom:n,duration:this.duration_,easing:r.easeOut})):t.setZoom(n)}}}}]),a}(),y=b;exports.default=y;
},{"../events.js":"sgxS","../events/EventType.js":"KZbn","./Control.js":"AN01","../css.js":"Gcgx","../easing.js":"XQse"}],"SAao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./Control.js")),t=require("../css.js"),n=require("../dom.js"),l=require("../events.js"),r=s(require("../events/EventType.js"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function i(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function a(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var l=b(e,t);if(l){var r=Object.getOwnPropertyDescriptor(l,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],y=function(s){function u(e){var n;o(this,u);var s=e||{};(n=a(this,p(u).call(this,{element:document.createElement("div"),target:s.target}))).cssClassName_=void 0!==s.className?s.className:"ol-full-screen";var c=void 0!==s.label?s.label:"⤢";n.labelNode_="string"==typeof c?document.createTextNode(c):c;var i=void 0!==s.labelActive?s.labelActive:"×";n.labelActiveNode_="string"==typeof i?document.createTextNode(i):i,n.button_=document.createElement("button");var d=s.tipLabel?s.tipLabel:"Toggle full-screen";n.setClassName_(n.button_,g()),n.button_.setAttribute("type","button"),n.button_.title=d,n.button_.appendChild(n.labelNode_),(0,l.listen)(n.button_,r.default.CLICK,n.handleClick_,f(n));var b=n.cssClassName_+" "+t.CLASS_UNSELECTABLE+" "+t.CLASS_CONTROL+" "+(v()?"":t.CLASS_UNSUPPORTED),m=n.element;return m.className=b,m.appendChild(n.button_),n.keys_=void 0!==s.keys&&s.keys,n.source_=s.source,n}return m(u,e.default),i(u,[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleFullScreen_()}},{key:"handleFullScreen_",value:function(){if(v()){var e,t=this.getMap();if(t)if(g())C();else e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?N(e):F(e)}}},{key:"handleFullScreenChange_",value:function(){var e=this.getMap();g()?(this.setClassName_(this.button_,!0),(0,n.replaceNode)(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),(0,n.replaceNode)(this.labelNode_,this.labelActiveNode_)),e&&e.updateSize()}},{key:"setClassName_",value:function(e,t){var n=this.cssClassName_+"-true",l=this.cssClassName_+"-false",r=t?n:l;e.classList.remove(n),e.classList.remove(l),e.classList.add(r)}},{key:"setMap",value:function(e){if(d(p(u.prototype),"setMap",this).call(this,e),e)for(var t=0,n=h.length;t<n;++t)this.listenerKeys.push((0,l.listen)(document,h[t],this.handleFullScreenChange_,this))}}]),u}();function v(){var e=document.body;return!!(e.webkitRequestFullscreen||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)}function g(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function F(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function N(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():F(e)}function C(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}var k=y;exports.default=k;
},{"./Control.js":"AN01","../css.js":"Gcgx","../dom.js":"4KLO","../events.js":"sgxS","../events/EventType.js":"KZbn"}],"OS00":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=j,exports.default=void 0;var e=require("../events.js"),t=i(require("../events/EventType.js")),n=require("../Object.js"),o=i(require("./Control.js")),r=require("../proj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=h(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m="projection",M="coordinateFormat",_=function(i){function u(t){var o;s(this,u);var r=t||{},i=document.createElement("div");return i.className=void 0!==r.className?r.className:"ol-mouse-position",o=c(this,p(u).call(this,{element:i,render:r.render||j,target:r.target})),(0,e.listen)(f(o),(0,n.getChangeEventType)(m),o.handleProjectionChanged_,f(o)),r.coordinateFormat&&o.setCoordinateFormat(r.coordinateFormat),r.projection&&o.setProjection(r.projection),o.undefinedHTML_=void 0!==r.undefinedHTML?r.undefinedHTML:"&#160;",o.renderOnMouseOut_=!!o.undefinedHTML_,o.renderedHTML_=i.innerHTML,o.mapProjection_=null,o.transform_=null,o.lastMouseMovePixel_=null,o}return v(u,o.default),l(u,[{key:"handleProjectionChanged_",value:function(){this.transform_=null}},{key:"getCoordinateFormat",value:function(){return this.get(M)}},{key:"getProjection",value:function(){return this.get(m)}},{key:"handleMouseMove",value:function(e){var t=this.getMap();this.lastMouseMovePixel_=t.getEventPixel(e),this.updateHTML_(this.lastMouseMovePixel_)}},{key:"handleMouseOut",value:function(e){this.updateHTML_(null),this.lastMouseMovePixel_=null}},{key:"setMap",value:function(n){if(d(p(u.prototype),"setMap",this).call(this,n),n){var o=n.getViewport();this.listenerKeys.push((0,e.listen)(o,t.default.MOUSEMOVE,this.handleMouseMove,this),(0,e.listen)(o,t.default.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,e.listen)(o,t.default.MOUSEOUT,this.handleMouseOut,this),(0,e.listen)(o,t.default.TOUCHEND,this.handleMouseOut,this))}}},{key:"setCoordinateFormat",value:function(e){this.set(M,e)}},{key:"setProjection",value:function(e){this.set(m,(0,r.get)(e))}},{key:"updateHTML_",value:function(e){var t=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){var n=this.getProjection();this.transform_=n?(0,r.getTransformFromProjections)(this.mapProjection_,n):r.identityTransform}var o=this.getMap().getCoordinateFromPixel(e);if(o){this.transform_(o,o);var i=this.getCoordinateFormat();t=i?i(o):o.toString()}}this.renderedHTML_&&t===this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)}}]),u}();function j(e){var t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null}var g=_;exports.default=g;
},{"../events.js":"sgxS","../events/EventType.js":"KZbn","../Object.js":"luFO","./Control.js":"AN01","../proj.js":"5Zkk"}],"eaW0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../events/Event.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(e){function o(t,e,u,i,c){var s;return n(this,o),(s=r(this,f(o).call(this,t))).inversePixelTransform=e,s.frameState=u,s.context=i,s.glContext=c,s}return i(o,t.default),o}(),l=s;exports.default=l;
},{"../events/Event.js":"nz3i"}],"Vf3Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asString=a,exports.asArray=i,exports.normalize=p,exports.toString=c,exports.fromString=void 0;var r=require("./asserts.js"),e=require("./math.js"),t=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,n=/^([a-z]*)$/i;function a(r){return"string"==typeof r?r:c(r)}function s(r){var e=document.createElement("div");if(e.style.color=r,""!==e.style.color){document.body.appendChild(e);var t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}var o=function(){var r={},e=0;return function(t){var n;if(r.hasOwnProperty(t))n=r[t];else{if(e>=1024){var a=0;for(var s in r)0==(3&a++)&&(delete r[s],--e)}n=u(t),r[t]=n,++e}return n}}();function i(r){return Array.isArray(r)?r:o(r)}function u(e){var a,o,i,u,c;if(n.exec(e)&&(e=s(e)),t.exec(e)){var l,f=e.length-1;l=f<=4?1:2;var v=4===f||8===f;a=parseInt(e.substr(1+0*l,l),16),o=parseInt(e.substr(1+1*l,l),16),i=parseInt(e.substr(1+2*l,l),16),u=v?parseInt(e.substr(1+3*l,l),16):255,1==l&&(a=(a<<4)+a,o=(o<<4)+o,i=(i<<4)+i,v&&(u=(u<<4)+u)),c=[a,o,i,u/255]}else 0==e.indexOf("rgba(")?p(c=e.slice(5,-1).split(",").map(Number)):0==e.indexOf("rgb(")?((c=e.slice(4,-1).split(",").map(Number)).push(1),p(c)):(0,r.assert)(!1,14);return c}function p(r){return r[0]=(0,e.clamp)(r[0]+.5|0,0,255),r[1]=(0,e.clamp)(r[1]+.5|0,0,255),r[2]=(0,e.clamp)(r[2]+.5|0,0,255),r[3]=(0,e.clamp)(r[3],0,1),r}function c(r){var e=r[0];e!=(0|e)&&(e=e+.5|0);var t=r[1];t!=(0|t)&&(t=t+.5|0);var n=r[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+t+","+n+","+(void 0===r[3]?1:r[3])+")"}exports.fromString=o;
},{"./asserts.js":"d7gk","./math.js":"t/nT"}],"cCgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shared=exports.default=void 0;var e=require("../color.js");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}var c=function(){function e(){t(this,e),this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return i(e,[{key:"clear",value:function(){this.cache_={},this.cacheSize_=0}},{key:"canExpireCache",value:function(){return this.cacheSize_>this.maxCacheSize_}},{key:"expire",value:function(){if(this.canExpireCache()){var e=0;for(var t in this.cache_){var a=this.cache_[t];0!=(3&e++)||a.hasListener()||(delete this.cache_[t],--this.cacheSize_)}}}},{key:"get",value:function(e,t,a){var i=r(e,t,a);return i in this.cache_?this.cache_[i]:null}},{key:"set",value:function(e,t,a,i){var c=r(e,t,a);this.cache_[c]=i,++this.cacheSize_}},{key:"setSize",value:function(e){this.maxCacheSize_=e,this.expire()}}]),e}();function r(t,a,i){return a+":"+t+":"+(i?(0,e.asString)(i):"null")}var n=c;exports.default=n;var h=new c;exports.shared=h;
},{"../color.js":"Vf3Z"}],"u4Pe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.asColorLike=e;var r=require("./color.js");function e(e){return Array.isArray(e)?(0,r.toString)(e):e}
},{"./color.js":"Vf3Z"}],"Hw/X":[function(require,module,exports) {
"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var u=n[t];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(e,u.key,u)}}function t(e,t,u){return t&&n(e.prototype,t),u&&n(e,u),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var u=function(){function n(){e(this,n)}return t(n,[{key:"drawCustom",value:function(e,n,t){}},{key:"drawGeometry",value:function(e){}},{key:"setStyle",value:function(e){}},{key:"drawCircle",value:function(e,n){}},{key:"drawFeature",value:function(e,n){}},{key:"drawGeometryCollection",value:function(e,n){}},{key:"drawLineString",value:function(e,n){}},{key:"drawMultiLineString",value:function(e,n){}},{key:"drawMultiPoint",value:function(e,n){}},{key:"drawMultiPolygon",value:function(e,n){}},{key:"drawPoint",value:function(e,n){}},{key:"drawPolygon",value:function(e,n){}},{key:"drawText",value:function(e,n){}},{key:"setFillStrokeStyle",value:function(e,n){}},{key:"setImageStyle",value:function(e,n){}},{key:"setTextStyle",value:function(e,n){}}]),n}(),o=u;exports.default=o;
},{}],"txpS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=r(require("../events/Target.js")),n=r(require("../events/EventType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?a(e):t}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(r){function o(e){var t;return s(this,o),(t=l(this,_(o).call(this))).highWaterMark=void 0!==e?e:2048,t.count_=0,t.entries_={},t.oldest_=null,t.newest_=null,t}return h(o,t.default),u(o,[{key:"canExpireCache",value:function(){return this.getCount()>this.highWaterMark}},{key:"clear",value:function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(n.default.CLEAR)}},{key:"containsKey",value:function(e){return this.entries_.hasOwnProperty(e)}},{key:"forEach",value:function(e){for(var t=this.oldest_;t;)e(t.value_,t.key_,this),t=t.newer}},{key:"get",value:function(t,n){var r=this.entries_[t];return(0,e.assert)(void 0!==r,15),r===this.newest_?r.value_:(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r,r.value_)}},{key:"remove",value:function(t){var n=this.entries_[t];return(0,e.assert)(void 0!==n,15),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[t],--this.count_,n.value_}},{key:"getCount",value:function(){return this.count_}},{key:"getKeys",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}},{key:"getValues",value:function(){var e,t=new Array(this.count_),n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}},{key:"peekLast",value:function(){return this.oldest_.value_}},{key:"peekLastKey",value:function(){return this.oldest_.key_}},{key:"peekFirstKey",value:function(){return this.newest_.key_}},{key:"pop",value:function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}},{key:"replace",value:function(e,t){this.get(e),this.entries_[e].value_=t}},{key:"set",value:function(t,n){(0,e.assert)(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_}},{key:"setSize",value:function(e){this.highWaterMark=e}}]),o}(),y=f;exports.default=y;
},{"../asserts.js":"d7gk","../events/Target.js":"B5sF","../events/EventType.js":"KZbn"}],"M2GI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=r(require("../../structs/LRUCache.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(r){function n(e){var t;return o(this,n),(t=c(this,a(n).call(this,e))).consumers={},t}return p(n,t.default),i(n,[{key:"clear",value:function(){f(a(n.prototype),"clear",this).call(this),this.consumers={}}},{key:"get",value:function(t,r){var o=f(a(n.prototype),"get",this).call(this,t),u=(0,e.getUid)(r);return u in this.consumers||(this.consumers[u]={}),this.consumers[u][t]=!0,o}},{key:"prune",value:function(){e:for(;this.canExpireCache();){var e=this.peekLastKey();for(var t in this.consumers)if(e in this.consumers[t])break e;var r=this.pop();for(var n in r.width=r.height=0,this.consumers)delete this.consumers[n][e]}}},{key:"release",value:function(t){delete this.consumers[(0,e.getUid)(t)]}}]),n}(),b=h;exports.default=b;
},{"../../util.js":"MHZC","../../structs/LRUCache.js":"txpS"}],"2eJG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.measureTextWidth=M,exports.measureAndCacheTextWidth=j,exports.measureTextWidths=w,exports.rotateAtOffset=A,exports.drawImage=H,exports.resetTransform=exports.measureTextHeight=exports.checkFont=exports.textHeights=exports.checkedFonts=exports.labelCache=exports.defaultLineWidth=exports.defaultPadding=exports.defaultTextBaseline=exports.defaultTextAlign=exports.defaultStrokeStyle=exports.defaultMiterLimit=exports.defaultLineJoin=exports.defaultLineDashOffset=exports.defaultLineDash=exports.defaultLineCap=exports.defaultFillStyle=exports.defaultFont=void 0;var e=require("../css.js"),t=require("../dom.js"),r=require("../obj.js"),a=require("../transform.js"),o=n(require("./canvas/LabelCache.js"));function n(e){return e&&e.__esModule?e:{default:e}}var s="10px sans-serif";exports.defaultFont=s;var l="#000";exports.defaultFillStyle=l;var i="round";exports.defaultLineCap=i;var u=[];exports.defaultLineDash=u;var f=0;exports.defaultLineDashOffset=f;var d="round";exports.defaultLineJoin=d;var p=10;exports.defaultMiterLimit=p;var x="#000";exports.defaultStrokeStyle=x;var v="center";exports.defaultTextAlign=v;var c="middle";exports.defaultTextBaseline=c;var h=[0,0,0,0];exports.defaultPadding=h;var m=1;exports.defaultLineWidth=m;var g=new o.default;exports.labelCache=g;var T={};exports.checkedFonts=T;var y=null,L={};exports.textHeights=L;var b=function(){var t,a,o=60,n=T,s="32px ",l=["monospace","serif"],i=l.length,u="wmytzilWMYTZIL@#/&?$%10";function f(e){for(var t=C(),r=100;r<=700;r+=300){for(var o=r+" ",n=!0,f=0;f<i;++f){var d=l[f];if(t.font=o+s+d,a=t.measureText(u).width,e!=d){t.font=o+s+e+","+d;var p=t.measureText(u).width;n=n&&p!=a}}if(n)return!0}return!1}function d(){var e=!0;for(var a in n)n[a]<o&&(f(a)?(n[a]=o,(0,r.clear)(L),y=null,g.clear()):(++n[a],e=!1));e&&(clearInterval(t),t=void 0)}return function(r){var a=(0,e.getFontFamilies)(r);if(a)for(var s=0,l=a.length;s<l;++s){var i=a[s];i in n||(n[i]=o,f(i)||(n[i]=0,void 0===t&&(t=setInterval(d,32))))}}}();function C(){return y||(y=(0,t.createCanvasContext2D)(1,1)),y}exports.checkFont=b;var F=function(){var e,t=L;return function(r){var a=t[r];return null==a&&(e||((e=document.createElement("div")).innerHTML="M",e.style.margin=e.style.padding="0 !important",e.style.position="absolute !important",e.style.left="-99999px !important"),e.style.font=r,document.body.appendChild(e),a=t[r]=e.offsetHeight,document.body.removeChild(e)),a}}();function M(e,t){var r=C();return e!=r.font&&(r.font=e),r.measureText(t).width}function j(e,t,r){return t in r?r[t]:r[t]=M(e,t)}function w(e,t,r){for(var a=t.length,o=0,n=0;n<a;++n){var s=M(e,t[n]);o=Math.max(o,s),r.push(s)}return o}function A(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}exports.measureTextHeight=F;var k=(0,a.create)();function H(e,t,r,a,o,n,s,l,i,u,f){var d;1!=r&&(d=e.globalAlpha,e.globalAlpha=d*r),t&&e.setTransform.apply(e,t),e.drawImage(a,o,n,s,l,i,u,s*f,l*f),1!=r&&(e.globalAlpha=d),t&&e.setTransform.apply(e,k)}exports.resetTransform=k;
},{"../css.js":"Gcgx","../dom.js":"4KLO","../obj.js":"dV1Q","../transform.js":"eGRU","./canvas/LabelCache.js":"M2GI"}],"1LdO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),a=h(require("../../geom/GeometryType.js")),n=require("../../geom/SimpleGeometry.js"),s=require("../../geom/flat/transform.js"),l=h(require("../VectorContext.js")),o=require("../canvas.js"),r=require("../../transform.js");function h(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function S(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}function u(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?x(t):e}function x(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(h){function f(t,e,i,a,n){var s;return _(this,f),(s=u(this,c(f).call(this))).context_=t,s.pixelRatio_=e,s.extent_=i,s.transform_=a,s.viewRotation_=n,s.contextFillState_=null,s.contextStrokeState_=null,s.contextTextState_=null,s.fillState_=null,s.strokeState_=null,s.image_=null,s.imageAnchorX_=0,s.imageAnchorY_=0,s.imageHeight_=0,s.imageOpacity_=0,s.imageOriginX_=0,s.imageOriginY_=0,s.imageRotateWithView_=!1,s.imageRotation_=0,s.imageScale_=0,s.imageWidth_=0,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=!1,s.textRotation_=0,s.textScale_=0,s.textFillState_=null,s.textStrokeState_=null,s.textState_=null,s.pixelCoordinates_=[],s.tmpLocalTransform_=(0,r.create)(),s}return d(f,l.default),S(f,[{key:"drawImages_",value:function(t,e,i,a){if(this.image_){var n=(0,s.transform2D)(t,e,i,2,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.tmpLocalTransform_,h=l.globalAlpha;1!=this.imageOpacity_&&(l.globalAlpha=h*this.imageOpacity_);var f=this.imageRotation_;this.imageRotateWithView_&&(f+=this.viewRotation_);for(var _=0,g=n.length;_<g;_+=2){var S=n[_]-this.imageAnchorX_,u=n[_+1]-this.imageAnchorY_;if(0!==f||1!=this.imageScale_){var x=S+this.imageAnchorX_,c=u+this.imageAnchorY_;(0,r.compose)(o,x,c,this.imageScale_,this.imageScale_,f,-x,-c),l.setTransform.apply(l,o)}l.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,S,u,this.imageWidth_,this.imageHeight_)}0===f&&1==this.imageScale_||l.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(l.globalAlpha=h)}}},{key:"drawText_",value:function(t,e,i,a){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=(0,s.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_),l=this.context_,o=this.textRotation_;for(this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=a){var h=n[e]+this.textOffsetX_,f=n[e+1]+this.textOffsetY_;if(0!==o||1!=this.textScale_){var _=(0,r.compose)(this.tmpLocalTransform_,h,f,this.textScale_,this.textScale_,o,-h,-f);l.setTransform.apply(l,_)}this.textStrokeState_&&l.strokeText(this.text_,h,f),this.textFillState_&&l.fillText(this.text_,h,f)}0===o&&1==this.textScale_||l.setTransform(1,0,0,1,0,0)}}},{key:"moveToLineTo_",value:function(t,e,i,a,n){var l=this.context_,o=(0,s.transform2D)(t,e,i,a,this.transform_,this.pixelCoordinates_);l.moveTo(o[0],o[1]);var r=o.length;n&&(r-=2);for(var h=2;h<r;h+=2)l.lineTo(o[h],o[h+1]);return n&&l.closePath(),i}},{key:"drawRings_",value:function(t,e,i,a){for(var n=0,s=i.length;n<s;++n)e=this.moveToLineTo_(t,e,i[n],a,!0);return e}},{key:"drawCircle",value:function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=(0,n.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),a=e[2]-e[0],s=e[3]-e[1],l=Math.sqrt(a*a+s*s),o=this.context_;o.beginPath(),o.arc(e[0],e[1],l,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}},{key:"setStyle",value:function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}},{key:"drawGeometry",value:function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t);break;case a.default.LINE_STRING:this.drawLineString(t);break;case a.default.POLYGON:this.drawPolygon(t);break;case a.default.MULTI_POINT:this.drawMultiPoint(t);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.default.CIRCLE:this.drawCircle(t)}}},{key:"drawFeature",value:function(t,e){var a=e.getGeometryFunction()(t);a&&(0,i.intersects)(this.extent_,a.getExtent())&&(this.setStyle(e),this.drawGeometry(a))}},{key:"drawGeometryCollection",value:function(t){for(var e=t.getGeometriesArray(),i=0,a=e.length;i<a;++i)this.drawGeometry(e[i])}},{key:"drawPoint",value:function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawMultiPoint",value:function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}},{key:"drawLineString",value:function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,a=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(a,0,a.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}}},{key:"drawMultiLineString",value:function(t){var e=t.getExtent();if((0,i.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var a=this.context_,n=t.getFlatCoordinates(),s=0,l=t.getEnds(),o=t.getStride();a.beginPath();for(var r=0,h=l.length;r<h;++r)s=this.moveToLineTo_(n,s,l[r],o,!1);a.stroke()}if(""!==this.text_){var f=t.getFlatMidpoints();this.drawText_(f,0,f.length,2)}}}},{key:"drawPolygon",value:function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var a=t.getFlatInteriorPoint();this.drawText_(a,0,2,2)}}}},{key:"drawMultiPolygon",value:function(t){if((0,i.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,a=t.getOrientedFlatCoordinates(),n=0,s=t.getEndss(),l=t.getStride();e.beginPath();for(var o=0,r=s.length;o<r;++o){var h=s[o];n=this.drawRings_(a,n,h,l)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var f=t.getFlatInteriorPoints();this.drawText_(f,0,f.length,2)}}}},{key:"setContextFillState_",value:function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}},{key:"setContextStrokeState_",value:function(e){var i=this.context_,a=this.contextStrokeState_;a?(a.lineCap!=e.lineCap&&(a.lineCap=i.lineCap=e.lineCap),i.setLineDash&&((0,t.equals)(a.lineDash,e.lineDash)||i.setLineDash(a.lineDash=e.lineDash),a.lineDashOffset!=e.lineDashOffset&&(a.lineDashOffset=i.lineDashOffset=e.lineDashOffset)),a.lineJoin!=e.lineJoin&&(a.lineJoin=i.lineJoin=e.lineJoin),a.lineWidth!=e.lineWidth&&(a.lineWidth=i.lineWidth=e.lineWidth),a.miterLimit!=e.miterLimit&&(a.miterLimit=i.miterLimit=e.miterLimit),a.strokeStyle!=e.strokeStyle&&(a.strokeStyle=i.strokeStyle=e.strokeStyle)):(i.lineCap=e.lineCap,i.setLineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineJoin=e.lineJoin,i.lineWidth=e.lineWidth,i.miterLimit=e.miterLimit,i.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}},{key:"setContextTextState_",value:function(t){var e=this.context_,i=this.contextTextState_,a=t.textAlign?t.textAlign:o.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=a&&(i.textAlign=e.textAlign=a),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=a,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:a,textBaseline:t.textBaseline})}},{key:"setFillStrokeStyle",value:function(t,i){if(t){var a=t.getColor();this.fillState_={fillStyle:(0,e.asColorLike)(a||o.defaultFillStyle)}}else this.fillState_=null;if(i){var n=i.getColor(),s=i.getLineCap(),l=i.getLineDash(),r=i.getLineDashOffset(),h=i.getLineJoin(),f=i.getWidth(),_=i.getMiterLimit();this.strokeState_={lineCap:void 0!==s?s:o.defaultLineCap,lineDash:l||o.defaultLineDash,lineDashOffset:r||o.defaultLineDashOffset,lineJoin:void 0!==h?h:o.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==f?f:o.defaultLineWidth),miterLimit:void 0!==_?_:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(n||o.defaultStrokeStyle)}}else this.strokeState_=null}},{key:"setImageStyle",value:function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),a=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=a[0],this.imageOriginY_=a[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=n[0]}else this.image_=null}},{key:"setTextStyle",value:function(t){if(t){var i=t.getFill();if(i){var a=i.getColor();this.textFillState_={fillStyle:(0,e.asColorLike)(a||o.defaultFillStyle)}}else this.textFillState_=null;var n=t.getStroke();if(n){var s=n.getColor(),l=n.getLineCap(),r=n.getLineDash(),h=n.getLineDashOffset(),f=n.getLineJoin(),_=n.getWidth(),g=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==l?l:o.defaultLineCap,lineDash:r||o.defaultLineDash,lineDashOffset:h||o.defaultLineDashOffset,lineJoin:void 0!==f?f:o.defaultLineJoin,lineWidth:void 0!==_?_:o.defaultLineWidth,miterLimit:void 0!==g?g:o.defaultMiterLimit,strokeStyle:(0,e.asColorLike)(s||o.defaultStrokeStyle)}}else this.textStrokeState_=null;var S=t.getFont(),u=t.getOffsetX(),x=t.getOffsetY(),c=t.getRotateWithView(),d=t.getRotation(),m=t.getScale(),y=t.getText(),v=t.getTextAlign(),k=t.getTextBaseline();this.textState_={font:void 0!==S?S:o.defaultFont,textAlign:void 0!==v?v:o.defaultTextAlign,textBaseline:void 0!==k?k:o.defaultTextBaseline},this.text_=void 0!==y?y:"",this.textOffsetX_=void 0!==u?this.pixelRatio_*u:0,this.textOffsetY_=void 0!==x?this.pixelRatio_*x:0,this.textRotateWithView_=void 0!==c&&c,this.textRotation_=void 0!==d?d:0,this.textScale_=this.pixelRatio_*(void 0!==m?m:1)}else this.text_=""}}]),f}(),v=y;exports.default=v;
},{"../../array.js":"YQ1M","../../colorlike.js":"u4Pe","../../extent.js":"+QKI","../../geom/GeometryType.js":"mFnd","../../geom/SimpleGeometry.js":"AOUP","../../geom/flat/transform.js":"K8GA","../VectorContext.js":"Hw/X","../canvas.js":"2eJG","../../transform.js":"eGRU"}],"U29t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toContext=i,exports.getVectorContext=a,exports.getRenderPixel=o,exports.renderDeclutterItems=s;var e=require("./has.js"),t=require("./transform.js"),r=n(require("./render/canvas/Immediate.js"));function n(e){return e&&e.__esModule?e:{default:e}}function i(n,i){var a=n.canvas,o=i||{},s=o.pixelRatio||e.DEVICE_PIXEL_RATIO,l=o.size;l&&(a.width=l[0]*s,a.height=l[1]*s,a.style.width=l[0]+"px",a.style.height=l[1]+"px");var u=[0,0,a.width,a.height],c=(0,t.scale)((0,t.create)(),s,s);return new r.default(n,s,u,c,0)}function a(e){var n=e.frameState,i=(0,t.multiply)(e.inversePixelTransform.slice(),n.coordinateToPixelTransform);return new r.default(e.context,n.pixelRatio,n.extent,i,n.viewState.rotation)}function o(e,r){var n=r.slice(0);return(0,t.apply)(e.inversePixelTransform.slice(),n),n}function s(e,t){t&&t.clear();for(var r=e.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],a=i.items,o=0,s=a.length;o<s;o+=3)t=a[o].renderDeclutter(a[o+1],a[o+2],i.opacity,t);return r.length=0,t}
},{"./has.js":"1fCX","./transform.js":"eGRU","./render/canvas/Immediate.js":"1LdO"}],"M09o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=c(require("../Disposable.js")),r=require("../extent.js"),n=require("../functions.js"),o=require("../layer/Layer.js"),i=require("../style/IconImageCache.js"),u=require("../transform.js"),a=require("../render.js");function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function y(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(c){function l(e){var t;return s(this,l),(t=y(this,h(l).call(this))).map_=e,t.declutterTree_=null,t}return v(l,t.default),p(l,[{key:"dispatchRenderEvent",value:function(t,r){(0,e.abstract)()}},{key:"calculateMatrices2D",value:function(e){var t=e.viewState,r=e.coordinateToPixelTransform,n=e.pixelToCoordinateTransform;(0,u.compose)(r,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),(0,u.makeInverse)(n,r)}},{key:"forEachFeatureAtCoordinate",value:function(t,n,i,u,a,c,l){var s,f=n.viewState,p=f.resolution;function y(t,r,o){if(!((0,e.getUid)(r)in n.skippedFeatureUids)||t)return u.call(a,r,t?o:null)}var d=f.projection,h=t;if(d.canWrapX()){var v=d.getExtent(),b=(0,r.getWidth)(v),m=t[0];if(m<v[0]||m>v[2])h=[m+b*Math.ceil((v[0]-m)/b),t[1]]}var _,j,g=n.layerStatesArray,x=g.length;for(this.declutterTree_&&(_=this.declutterTree_.all().map(function(e){return e.value})),j=x-1;j>=0;--j){var E=g[j],T=E.layer;if(T.hasRenderer()&&(0,o.visibleAtResolution)(E,p)&&c.call(l,T)){var k=T.getRenderer(),O=T.getSource();if(k&&O){var w=y.bind(null,E.managed);s=k.forEachFeatureAtCoordinate(O.getWrapX()?h:t,n,i,w,_)}if(s)return s}}}},{key:"forEachLayerAtPixel",value:function(t,r,n,o,i){return(0,e.abstract)()}},{key:"hasFeatureAtCoordinate",value:function(e,t,r,o,i){return void 0!==this.forEachFeatureAtCoordinate(e,t,r,n.TRUE,this,o,i)}},{key:"getMap",value:function(){return this.map_}},{key:"renderFrame",value:function(e){this.declutterTree_=(0,a.renderDeclutterItems)(e,this.declutterTree_)}},{key:"scheduleExpireIconCache",value:function(e){i.shared.canExpireCache()&&e.postRenderFunctions.push(_)}}]),l}();function _(e,t){i.shared.expire()}var j=m;exports.default=j;
},{"../util.js":"MHZC","../Disposable.js":"1A8/","../extent.js":"+QKI","../functions.js":"bH9H","../layer/Layer.js":"7nok","../style/IconImageCache.js":"cCgA","../transform.js":"eGRU","../render.js":"U29t"}],"GpA7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../css.js"),t=require("../layer/Layer.js"),r=u(require("../render/Event.js")),n=u(require("../render/EventType.js")),i=u(require("./Map.js")),o=u(require("../source/State.js")),l=require("../dom.js"),a=require("../render/canvas.js");function u(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=v(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var E=function(u){function s(t){var r;c(this,s),r=h(this,b(s).call(this,t)),t.attachLabelCache(a.labelCache),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=e.CLASS_UNSELECTABLE+" ol-layers";var i=t.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return _(s,i.default),d(s,[{key:"dispatchRenderEvent",value:function(e,t){var n=this.getMap();if(n.hasListener(e)){var i=new r.default(e,void 0,t);n.dispatchEvent(i)}}},{key:"renderFrame",value:function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(n.default.PRECOMPOSE,e);var r=e.layerStatesArray.sort(function(e,t){return e.zIndex-t.zIndex}),i=e.viewState.resolution;this.children_.length=0;for(var a=null,u=0,c=r.length;u<c;++u){var f=r[u];if(e.layerIndex=u,(0,t.visibleAtResolution)(f,i)&&(f.sourceState==o.default.READY||f.sourceState==o.default.UNDEFINED)){var d=f.layer.render(e,a);d!==a&&(this.children_.push(d),a=d)}}y(b(s.prototype),"renderFrame",this).call(this,e),(0,l.replaceChildren)(this.element_,this.children_),this.dispatchRenderEvent(n.default.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)}},{key:"forEachLayerAtPixel",value:function(e,r,n,i,o){for(var l=r.viewState.resolution,a=r.layerStatesArray,u=a.length-1;u>=0;--u){var s=a[u],c=s.layer;if(c.hasRenderer()&&(0,t.visibleAtResolution)(s,l)&&o(c)){var f=c.getRenderer().getDataAtPixel(e,r,n);if(f){var d=i(c,f);if(d)return d}}}}}]),s}(),O=E;exports.default=O;
},{"../css.js":"Gcgx","../layer/Layer.js":"7nok","../render/Event.js":"eaW0","../render/EventType.js":"X6Tz","./Map.js":"M09o","../source/State.js":"FQoO","../dom.js":"4KLO","../render/canvas.js":"2eJG"}],"V/qC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"};exports.default=t;
},{}],"7EXo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./MapEventType.js")),t=a(require("./Object.js")),n=u(require("./OverlayPositioning.js")),i=require("./css.js"),o=require("./dom.js"),r=require("./events.js"),s=require("./extent.js");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};i.get||i.set?Object.defineProperty(t,n,i):t[n]=e[n]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?c(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},E=function(a){function u(e){var o;return d(this,u),(o=p(this,g(u).call(this))).options=e,o.id=e.id,o.insertFirst=void 0===e.insertFirst||e.insertFirst,o.stopEvent=void 0===e.stopEvent||e.stopEvent,o.element=document.createElement("div"),o.element.className=void 0!==e.className?e.className:"ol-overlay-container "+i.CLASS_SELECTABLE,o.element.style.position="absolute",o.autoPan=void 0!==e.autoPan&&e.autoPan,o.autoPanAnimation=e.autoPanAnimation||{},o.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,o.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},o.mapPostrenderListenerKey=null,(0,r.listen)(c(o),(0,t.getChangeEventType)(P.ELEMENT),o.handleElementChanged,c(o)),(0,r.listen)(c(o),(0,t.getChangeEventType)(P.MAP),o.handleMapChanged,c(o)),(0,r.listen)(c(o),(0,t.getChangeEventType)(P.OFFSET),o.handleOffsetChanged,c(o)),(0,r.listen)(c(o),(0,t.getChangeEventType)(P.POSITION),o.handlePositionChanged,c(o)),(0,r.listen)(c(o),(0,t.getChangeEventType)(P.POSITIONING),o.handlePositioningChanged,c(o)),void 0!==e.element&&o.setElement(e.element),o.setOffset(void 0!==e.offset?e.offset:[0,0]),o.setPositioning(void 0!==e.positioning?e.positioning:n.default.TOP_LEFT),void 0!==e.position&&o.setPosition(e.position),o}return v(u,t.default),h(u,[{key:"getElement",value:function(){return this.get(P.ELEMENT)}},{key:"getId",value:function(){return this.id}},{key:"getMap",value:function(){return this.get(P.MAP)}},{key:"getOffset",value:function(){return this.get(P.OFFSET)}},{key:"getPosition",value:function(){return this.get(P.POSITION)}},{key:"getPositioning",value:function(){return this.get(P.POSITIONING)}},{key:"handleElementChanged",value:function(){(0,o.removeChildren)(this.element);var e=this.getElement();e&&this.element.appendChild(e)}},{key:"handleMapChanged",value:function(){this.mapPostrenderListenerKey&&((0,o.removeNode)(this.element),(0,r.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,r.listen)(t,e.default.POSTRENDER,this.render,this),this.updatePixelPosition();var n=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element)}}},{key:"render",value:function(){this.updatePixelPosition()}},{key:"handleOffsetChanged",value:function(){this.updatePixelPosition()}},{key:"handlePositionChanged",value:function(){this.updatePixelPosition(),this.get(P.POSITION)&&this.autoPan&&this.panIntoView()}},{key:"handlePositioningChanged",value:function(){this.updatePixelPosition()}},{key:"setElement",value:function(e){this.set(P.ELEMENT,e)}},{key:"setMap",value:function(e){this.set(P.MAP,e)}},{key:"setOffset",value:function(e){this.set(P.OFFSET,e)}},{key:"setPosition",value:function(e){this.set(P.POSITION,e)}},{key:"panIntoView",value:function(){var e=this.getMap();if(e&&e.getTargetElement()){var t=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[(0,o.outerWidth)(n),(0,o.outerHeight)(n)]),r=this.autoPanMargin;if(!(0,s.containsExtent)(t,i)){var a=i[0]-t[0],u=t[2]-i[2],l=i[1]-t[1],d=t[3]-i[3],f=[0,0];if(a<0?f[0]=a-r:u<0&&(f[0]=Math.abs(u)+r),l<0?f[1]=l-r:d<0&&(f[1]=Math.abs(d)+r),0!==f[0]||0!==f[1]){var h=e.getView().getCenter(),p=e.getPixelFromCoordinate(h),g=[p[0]+f[0],p[1]+f[1]];e.getView().animate({center:e.getCoordinateFromPixel(g),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}}},{key:"getRect",value:function(e,t){var n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+t[0],o+t[1]]}},{key:"setPositioning",value:function(e){this.set(P.POSITIONING,e)}},{key:"setVisible",value:function(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}},{key:"updatePixelPosition",value:function(){var e=this.getMap(),t=this.getPosition();if(e&&e.isRendered()&&t){var n=e.getPixelFromCoordinate(t),i=e.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)}},{key:"updateRenderedPosition",value:function(e,t){var i=this.element.style,o=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var s=o[0],a=o[1];if(r==n.default.BOTTOM_RIGHT||r==n.default.CENTER_RIGHT||r==n.default.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var u=Math.round(t[0]-e[0]-s)+"px";this.rendered.right_!=u&&(this.rendered.right_=i.right=u)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),r!=n.default.BOTTOM_CENTER&&r!=n.default.CENTER_CENTER&&r!=n.default.TOP_CENTER||(s-=this.element.offsetWidth/2);var l=Math.round(e[0]+s)+"px";this.rendered.left_!=l&&(this.rendered.left_=i.left=l)}if(r==n.default.BOTTOM_LEFT||r==n.default.BOTTOM_CENTER||r==n.default.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var d=Math.round(t[1]-e[1]-a)+"px";this.rendered.bottom_!=d&&(this.rendered.bottom_=i.bottom=d)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),r!=n.default.CENTER_LEFT&&r!=n.default.CENTER_CENTER&&r!=n.default.CENTER_RIGHT||(a-=this.element.offsetHeight/2);var f=Math.round(e[1]+a)+"px";this.rendered.top_!=f&&(this.rendered.top_=i.top=f)}}},{key:"getOptions",value:function(){return this.options}}]),u}(),O=E;exports.default=O;
},{"./MapEventType.js":"ON6V","./Object.js":"luFO","./OverlayPositioning.js":"V/qC","./css.js":"Gcgx","./dom.js":"4KLO","./events.js":"sgxS","./extent.js":"+QKI"}],"HFLP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=V,exports.default=void 0;var e=_(require("../PluggableMap.js")),t=_(require("../renderer/Composite.js")),i=_(require("../MapEventType.js")),n=_(require("../MapProperty.js")),a=require("../Object.js"),o=_(require("../ObjectEventType.js")),l=_(require("../Overlay.js")),r=_(require("../OverlayPositioning.js")),s=_(require("../ViewProperty.js")),u=_(require("./Control.js")),c=require("../coordinate.js"),p=require("../css.js"),d=require("../dom.js"),v=require("../events.js"),h=_(require("../events/EventType.js")),f=require("../extent.js");function _(e){return e&&e.__esModule?e:{default:e}}function g(e,t,i){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=b(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(i):a.value}})(e,t,i||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,i){return t&&w(e.prototype,t),i&&w(e,i),e}function C(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=.75,M=.1,T=function(i){function n(){return m(this,n),C(this,x(n).apply(this,arguments))}return L(n,e.default),E(n,[{key:"createRenderer",value:function(){return new t.default(this)}}]),n}(),S=function(e){function t(e){var i;m(this,t);var n=e||{};(i=C(this,x(t).call(this,{element:document.createElement("div"),render:n.render||V,target:n.target}))).collapsed_=void 0===n.collapsed||n.collapsed,i.collapsible_=void 0===n.collapsible||n.collapsible,i.collapsible_||(i.collapsed_=!1);var a=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",s=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof s?(i.collapseLabel_=document.createElement("span"),i.collapseLabel_.textContent=s):i.collapseLabel_=s;var u=void 0!==n.label?n.label:"»";"string"==typeof u?(i.label_=document.createElement("span"),i.label_.textContent=u):i.label_=u;var c=i.collapsible_&&!i.collapsed_?i.collapseLabel_:i.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=o,d.appendChild(c),(0,v.listen)(d,h.default.CLICK,i.handleClick_,O(i)),i.ovmapDiv_=document.createElement("div"),i.ovmapDiv_.className="ol-overviewmap-map",i.ovmap_=new T({view:n.view});var f=i.ovmap_;n.layers&&n.layers.forEach(function(e){f.addLayer(e)}.bind(O(i)));var _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",i.boxOverlay_=new l.default({position:[0,0],positioning:r.default.BOTTOM_LEFT,element:_}),i.ovmap_.addOverlay(i.boxOverlay_);var g=a+" "+p.CLASS_UNSELECTABLE+" "+p.CLASS_CONTROL+(i.collapsed_&&i.collapsible_?" "+p.CLASS_COLLAPSED:"")+(i.collapsible_?"":" ol-uncollapsible"),b=i.element;b.className=g,b.appendChild(i.ovmapDiv_),b.appendChild(d);var y=O(i),w=i.boxOverlay_,E=i.boxOverlay_.getElement(),L=function(e){var t,i={clientX:(t=e).clientX-E.offsetWidth/2,clientY:t.clientY+E.offsetHeight/2},n=f.getEventCoordinate(i);w.setPosition(n)},j=function e(t){var i=f.getEventCoordinate(t);y.getMap().getView().setCenter(i),window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",e)};return E.addEventListener("mousedown",function(){window.addEventListener("mousemove",L),window.addEventListener("mouseup",j)}),i}return L(t,u.default),E(t,[{key:"setMap",value:function(e){var i=this.getMap();if(e!==i){if(i){var n=i.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(g(x(t.prototype),"setMap",this).call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,v.listen)(e,o.default.PROPERTYCHANGE,this.handleMapPropertyChange_,this));var a=e.getView();a&&(this.bindView_(a),a.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}}},{key:"handleMapPropertyChange_",value:function(e){if(e.key===n.default.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var i=this.getMap().getView();this.bindView_(i)}}},{key:"bindView_",value:function(e){(0,v.listen)(e,(0,a.getChangeEventType)(s.default.ROTATION),this.handleRotationChanged_,this)}},{key:"unbindView_",value:function(e){(0,v.unlisten)(e,(0,a.getChangeEventType)(s.default.ROTATION),this.handleRotationChanged_,this)}},{key:"handleRotationChanged_",value:function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}},{key:"validateExtent_",value:function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),n=e.getView().calculateExtent(i),a=t.getSize(),o=t.getView().calculateExtent(a),l=t.getPixelFromCoordinate((0,f.getTopLeft)(n)),r=t.getPixelFromCoordinate((0,f.getBottomRight)(n)),s=Math.abs(l[0]-r[0]),u=Math.abs(l[1]-r[1]),c=a[0],p=a[1];s<c*M||u<p*M||s>c*R||u>p*R?this.resetExtent_():(0,f.containsExtent)(o,n)||this.recenter_()}}},{key:"resetExtent_",value:function(){if(0!==R&&0!==M){var e=this.getMap(),t=this.ovmap_,i=e.getSize(),n=e.getView().calculateExtent(i),a=t.getView(),o=Math.log(R/M)/Math.LN2,l=1/(Math.pow(2,o/2)*M);(0,f.scaleFromCenter)(n,l),a.fit(n)}}},{key:"recenter_",value:function(){var e=this.getMap(),t=this.ovmap_,i=e.getView();t.getView().setCenter(i.getCenter())}},{key:"updateBox_",value:function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var i=e.getSize(),n=e.getView(),a=t.getView(),o=n.getRotation(),l=this.boxOverlay_,r=this.boxOverlay_.getElement(),s=n.calculateExtent(i),u=a.getResolution(),c=(0,f.getBottomLeft)(s),p=(0,f.getTopRight)(s),d=this.calculateCoordinateRotate_(o,c);l.setPosition(d),r&&(r.style.width=Math.abs((c[0]-p[0])/u)+"px",r.style.height=Math.abs((p[1]-c[1])/u)+"px")}}},{key:"calculateCoordinateRotate_",value:function(e,t){var i,n=this.getMap().getView().getCenter();return n&&(i=[t[0]-n[0],t[1]-n[1]],(0,c.rotate)(i,e),(0,c.add)(i,n)),i}},{key:"handleClick_",value:function(e){e.preventDefault(),this.handleToggle_()}},{key:"handleToggle_",value:function(){this.element.classList.toggle(p.CLASS_COLLAPSED),this.collapsed_?(0,d.replaceNode)(this.collapseLabel_,this.label_):(0,d.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;this.collapsed_||e.isRendered()||(e.updateSize(),this.resetExtent_(),(0,v.listenOnce)(e,i.default.POSTRENDER,function(e){this.updateBox_()},this))}},{key:"getCollapsible",value:function(){return this.collapsible_}},{key:"setCollapsible",value:function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}},{key:"setCollapsed",value:function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}},{key:"getCollapsed",value:function(){return this.collapsed_}},{key:"getOverviewMap",value:function(){return this.ovmap_}}]),t}();function V(e){this.validateExtent_(),this.updateBox_()}var P=S;exports.default=P;
},{"../PluggableMap.js":"9d4m","../renderer/Composite.js":"GpA7","../MapEventType.js":"ON6V","../MapProperty.js":"kwS9","../Object.js":"luFO","../ObjectEventType.js":"7xWn","../Overlay.js":"7EXo","../OverlayPositioning.js":"V/qC","../ViewProperty.js":"8K6Q","./Control.js":"AN01","../coordinate.js":"Gkmg","../css.js":"Gcgx","../dom.js":"4KLO","../events.js":"sgxS","../events/EventType.js":"KZbn","../extent.js":"+QKI"}],"PX2H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=b,exports.default=exports.Units=void 0;var e=require("../Object.js"),t=require("../asserts.js"),r=o(require("./Control.js")),i=require("../css.js"),n=require("../events.js"),s=require("../proj.js"),a=o(require("../proj/Units.js"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m="units",y={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};exports.Units=y;var E=[1,2,5],S=function(o){function l(t){var r;u(this,l);var s=t||{},a=void 0!==s.className?s.className:s.bar?"ol-scale-bar":"ol-scale-line";return(r=f(this,h(l).call(this,{element:document.createElement("div"),render:s.render||b,target:s.target}))).innerElement_=document.createElement("div"),r.innerElement_.className=a+"-inner",r.element.className=a+" "+i.CLASS_UNSELECTABLE,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==s.minWidth?s.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",(0,n.listen)(p(r),(0,e.getChangeEventType)(m),r.handleUnitsChanged_,p(r)),r.setUnits(s.units||y.METRIC),r.scaleBar_=s.bar||!1,r.scaleBarSteps_=s.steps||4,r.scaleBarText_=s.text||!1,r}return _(l,r.default),d(l,[{key:"getUnits",value:function(){return this.get(m)}},{key:"handleUnitsChanged_",value:function(){this.updateElement_()}},{key:"setUnits",value:function(e){this.set(m,e)}},{key:"updateElement_",value:function(){var e=this.viewState_;if(e){var r=e.center,i=e.projection,n=this.getUnits(),o=n==y.DEGREES?a.default.DEGREES:a.default.METERS,l=(0,s.getPointResolution)(i,e.resolution,r,o),u=this.minWidth_*l,c="";if(n==y.DEGREES){var d=s.METERS_PER_UNIT[a.default.DEGREES];(u*=d)<d/60?(c="″",l*=3600):u<d?(c="′",l*=60):c="°"}else n==y.IMPERIAL?u<.9144?(c="in",l/=.0254):u<1609.344?(c="ft",l/=.3048):(c="mi",l/=1609.344):n==y.NAUTICAL?(l/=1852,c="nm"):n==y.METRIC?u<.001?(c="μm",l*=1e6):u<1?(c="mm",l*=1e3):u<1e3?c="m":(c="km",l/=1e3):n==y.US?u<.9144?(c="in",l*=39.37):u<1609.344?(c="ft",l/=.30480061):(c="mi",l/=1609.3472):(0,t.assert)(!1,33);for(var f,h,p,_,v=3*Math.floor(Math.log(this.minWidth_*l)/Math.log(10));;){p=Math.floor(v/3);var m=Math.pow(10,p);if(f=E[(v%3+3)%3]*m,h=Math.round(f/l),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(h>=this.minWidth_)break;++v}_=this.scaleBar_?this.createScaleBar(h,f,c):f.toFixed(p<0?-p:0)+" "+c,this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)}},{key:"createScaleBar",value:function(e,t,r){for(var i="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),n=[],s=e/this.scaleBarSteps_,a="#ffffff",o=0;o<this.scaleBarSteps_;o++)0===o&&n.push(this.createMarker("absolute",o)),n.push('<div><div class="ol-scale-singlebar" style="width: '+s+"px;background-color: "+a+';"></div>'+this.createMarker("relative",o)+(o%2==0||2===this.scaleBarSteps_?this.createStepText(o,e,!1,t,r):"")+"</div>"),o===this.scaleBarSteps_-1&&n.push(this.createStepText(o+1,e,!0,t,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+i+"</div>":"")+n.join("")+"</div>"}},{key:"createMarker",value:function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'}},{key:"createStepText",value:function(e,t,r,i,n){var s=(0===e?0:Math.round(i/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+n);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(r?t+"px":"unset")+';">'+s+"</div>"}},{key:"getScaleForResolution",value:function(){var e=this.getMap().getView().getResolution(),t=this.viewState_.projection.getMetersPerUnit();return parseFloat(e.toString())*t*39.37*(25.4/.28)}}]),l}();function b(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()}var g=S;exports.default=g;
},{"../Object.js":"luFO","../asserts.js":"d7gk","./Control.js":"AN01","../css.js":"Gcgx","../events.js":"sgxS","../proj.js":"5Zkk","../proj/Units.js":"Y/O/"}],"6cbT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=R,exports.default=void 0;var t=u(require("./Control.js")),e=require("../css.js"),i=require("../easing.js"),n=require("../events.js"),r=require("../events/Event.js"),o=u(require("../events/EventType.js")),s=require("../math.js"),a=u(require("../pointer/EventType.js")),l=u(require("../pointer/PointerEventHandler.js"));function u(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}function c(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e,i){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=m(t,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(i):r.value}})(t,e,i||t)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var E={VERTICAL:0,HORIZONTAL:1},O=function(u){function h(t){var i;d(this,h);var s=t||{};(i=c(this,y(h).call(this,{element:document.createElement("div"),render:s.render||R}))).dragListenerKeys_=[],i.currentResolution_=void 0,i.direction_=E.VERTICAL,i.dragging_,i.heightLimit_=0,i.widthLimit_=0,i.startX_,i.startY_,i.thumbSize_=null,i.sliderInitialized_=!1,i.duration_=void 0!==s.duration?s.duration:200;var u=void 0!==s.className?s.className:"ol-zoomslider",g=document.createElement("button");g.setAttribute("type","button"),g.className=u+"-thumb "+e.CLASS_UNSELECTABLE;var f=i.element;return f.className=u+" "+e.CLASS_UNSELECTABLE+" "+e.CLASS_CONTROL,f.appendChild(g),i.dragger_=new l.default(f),(0,n.listen)(i.dragger_,a.default.POINTERDOWN,i.handleDraggerStart_,_(i)),(0,n.listen)(i.dragger_,a.default.POINTERMOVE,i.handleDraggerDrag_,_(i)),(0,n.listen)(i.dragger_,a.default.POINTERUP,i.handleDraggerEnd_,_(i)),(0,n.listen)(f,o.default.CLICK,i.handleContainerClick_,_(i)),(0,n.listen)(g,o.default.CLICK,r.stopPropagation),i}return v(h,t.default),f(h,[{key:"disposeInternal",value:function(){this.dragger_.dispose(),p(y(h.prototype),"disposeInternal",this).call(this)}},{key:"setMap",value:function(t){p(y(h.prototype),"setMap",this).call(this,t),t&&t.render()}},{key:"initSlider_",value:function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,n=t.firstElementChild,r=getComputedStyle(n),o=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),s=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[o,s],e>i?(this.direction_=E.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=E.VERTICAL,this.heightLimit_=i-s),this.sliderInitialized_=!0}},{key:"handleContainerClick_",value:function(t){var e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(n),o=e.getConstrainedZoom(e.getZoomForResolution(r));e.animate({zoom:o,duration:this.duration_,easing:i.easeOut})}},{key:"handleDraggerStart_",value:function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var i=this.handleDraggerDrag_,r=this.handleDraggerEnd_;this.dragListenerKeys_.push((0,n.listen)(document,o.default.MOUSEMOVE,i,this),(0,n.listen)(document,a.default.POINTERMOVE,i,this),(0,n.listen)(document,o.default.MOUSEUP,r,this),(0,n.listen)(document,a.default.POINTERUP,r,this))}}}},{key:"handleDraggerDrag_",value:function(t){if(this.dragging_){var e=t.clientX-this.startX_,i=t.clientY-this.startY_,n=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}},{key:"handleDraggerEnd_",value:function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(n.unlistenByKey),this.dragListenerKeys_.length=0)}},{key:"setThumbPosition_",value:function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==E.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"}},{key:"getRelativePosition_",value:function(t,e){var i;return i=this.direction_===E.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,(0,s.clamp)(i,0,1)}},{key:"getResolutionForPosition_",value:function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}},{key:"getPositionForResolution_",value:function(t){var e=this.getMap().getView().getValueForResolutionFunction();return(0,s.clamp)(1-e(t),0,1)}}]),h}();function R(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var L=O;exports.default=L;
},{"./Control.js":"AN01","../css.js":"Gcgx","../easing.js":"XQse","../events.js":"sgxS","../events/Event.js":"nz3i","../events/EventType.js":"KZbn","../math.js":"t/nT","../pointer/EventType.js":"VFqs","../pointer/PointerEventHandler.js":"Xrq6"}],"IMwT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=r(require("../events/EventType.js")),n=r(require("./Control.js")),o=require("../css.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(r){function i(n){var r;u(this,i);var l=n||{};(r=c(this,f(i).call(this,{element:document.createElement("div"),target:l.target}))).extent=l.extent?l.extent:null;var a=void 0!==l.className?l.className:"ol-zoom-extent",p=void 0!==l.label?l.label:"E",y=void 0!==l.tipLabel?l.tipLabel:"Fit to extent",b=document.createElement("button");b.setAttribute("type","button"),b.title=y,b.appendChild("string"==typeof p?document.createTextNode(p):p),(0,e.listen)(b,t.default.CLICK,r.handleClick_,s(r));var d=a+" "+o.CLASS_UNSELECTABLE+" "+o.CLASS_CONTROL,v=r.element;return v.className=d,v.appendChild(b),r}return p(i,n.default),a(i,[{key:"handleClick_",value:function(e){e.preventDefault(),this.handleZoomToExtent()}},{key:"handleZoomToExtent",value:function(){var e=this.getMap().getView(),t=this.extent?this.extent:e.getProjection().getExtent();e.fit(t)}}]),i}(),d=b;exports.default=d;
},{"../events.js":"sgxS","../events/EventType.js":"KZbn","./Control.js":"AN01","../css.js":"Gcgx"}],"srnd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=d,Object.defineProperty(exports,"Attribution",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Rotate",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"FullScreen",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"MousePosition",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"OverviewMap",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"ScaleLine",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ZoomSlider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"ZoomToExtent",{enumerable:!0,get:function(){return f.default}});var e=s(require("./Collection.js")),t=s(require("./control/Attribution.js")),r=s(require("./control/Rotate.js")),o=s(require("./control/Zoom.js")),n=s(require("./control/Control.js")),u=s(require("./control/FullScreen.js")),i=s(require("./control/MousePosition.js")),l=s(require("./control/OverviewMap.js")),a=s(require("./control/ScaleLine.js")),c=s(require("./control/ZoomSlider.js")),f=s(require("./control/ZoomToExtent.js"));function s(e){return e&&e.__esModule?e:{default:e}}function d(n){var u=n||{},i=new e.default;return(void 0===u.zoom||u.zoom)&&i.push(new o.default(u.zoomOptions)),(void 0===u.rotate||u.rotate)&&i.push(new r.default(u.rotateOptions)),(void 0===u.attribution||u.attribution)&&i.push(new t.default(u.attributionOptions)),i}
},{"./Collection.js":"dXq/","./control/Attribution.js":"0UdI","./control/Rotate.js":"cG5r","./control/Zoom.js":"vhDn","./control/Control.js":"AN01","./control/FullScreen.js":"SAao","./control/MousePosition.js":"OS00","./control/OverviewMap.js":"HFLP","./control/ScaleLine.js":"PX2H","./control/ZoomSlider.js":"6cbT","./control/ZoomToExtent.js":"IMwT"}],"JXB6":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function i(e,n,s){t(this,i),this.decay_=e,this.minVelocity_=n,this.delay_=s,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e(i,[{key:"begin",value:function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}},{key:"update",value:function(t,i){this.points_.push(t,i,Date.now())}},{key:"end",value:function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,i=this.points_.length-3;if(this.points_[i+2]<t)return!1;for(var e=i-3;e>0&&this.points_[e+2]>t;)e-=3;var n=this.points_[i+2]-this.points_[e+2];if(n<1e3/60)return!1;var s=this.points_[i]-this.points_[e],o=this.points_[i+1]-this.points_[e+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}},{key:"getDistance",value:function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}},{key:"getAngle",value:function(){return this.angle_}}]),i}(),s=n;exports.default=s;
},{}],"0oFU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ACTIVE:"active"};exports.default=e;
},{}],"OY0/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pan=v,exports.zoomByDelta=b,exports.default=void 0;var e=o(require("../Object.js")),t=require("../easing.js"),n=o(require("./Property.js"));function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(t){function o(e){var t;return i(this,o),t=c(this,l(o).call(this)),e.handleEvent&&(t.handleEvent=e.handleEvent),t.map_=null,t.setActive(!0),t}return s(o,e.default),a(o,[{key:"getActive",value:function(){return this.get(n.default.ACTIVE)}},{key:"getMap",value:function(){return this.map_}},{key:"handleEvent",value:function(e){return!0}},{key:"setActive",value:function(e){this.set(n.default.ACTIVE,e)}},{key:"setMap",value:function(e){this.map_=e}}]),o}();function v(e,n,o){var r=e.getCenter();if(r){var i=[r[0]+n[0],r[1]+n[1]];e.animate_({duration:void 0!==o?o:250,easing:t.linear,center:e.getConstrainedCenter(i)})}}function b(e,n,o,r){var i=e.getZoom();if(void 0!==i){var u=e.getConstrainedZoom(i+n),a=e.getResolutionForZoom(u);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:o,duration:void 0!==r?r:250,easing:t.easeOut})}}var d=y;exports.default=d;
},{"../Object.js":"luFO","../easing.js":"XQse","./Property.js":"0oFU"}],"z5pr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("../MapBrowserEventType.js")),e=r(require("./Interaction.js"));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};o.get||o.set?Object.defineProperty(e,r,o):e[r]=t[r]}return e.default=t,e}function o(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function r(t){var e;i(this,r);var o=t||{};return(e=u(this,a(r).call(this,{handleEvent:s}))).delta_=o.delta?o.delta:1,e.duration_=void 0!==o.duration?o.duration:250,e}return c(r,e.default),r}();function s(r){var o=!1;if(r.type==t.default.DBLCLICK){var n=r.originalEvent,i=r.map,u=r.coordinate,f=n.shiftKey?-this.delta_:this.delta_,a=i.getView();(0,e.zoomByDelta)(a,f,u,this.duration_),r.preventDefault(),o=!0}return!o}var y=p;exports.default=y;
},{"../MapBrowserEventType.js":"530S","./Interaction.js":"OY0/"}],"2Mo3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.primaryAction=exports.penOnly=exports.touchOnly=exports.mouseOnly=exports.targetNotEditable=exports.shiftKeyOnly=exports.platformModifierKeyOnly=exports.noModifierKeys=exports.doubleClick=exports.singleClick=exports.pointerMove=exports.never=exports.mouseActionButton=exports.click=exports.always=exports.focus=exports.altShiftKeysOnly=exports.altKeyOnly=void 0;var e=o(require("../MapBrowserEventType.js")),t=require("../asserts.js"),r=require("../functions.js"),n=require("../has.js");function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.altKeyOnly=i;var a=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.altShiftKeysOnly=a;var s=function(e){return e.target.getTargetElement()===document.activeElement};exports.focus=s;var p=r.TRUE;exports.always=p;var u=function(t){return t.type==e.default.CLICK};exports.click=u;var l=function(e){var t=e.originalEvent;return 0==t.button&&!(n.WEBKIT&&n.MAC&&t.ctrlKey)};exports.mouseActionButton=l;var y=r.FALSE;exports.never=y;var v=function(e){return"pointermove"==e.type};exports.pointerMove=v;var c=function(t){return t.type==e.default.SINGLECLICK};exports.singleClick=c;var f=function(t){return t.type==e.default.DBLCLICK};exports.doubleClick=f;var x=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};exports.noModifierKeys=x;var K=function(e){var t=e.originalEvent;return!t.altKey&&(n.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey};exports.platformModifierKeyOnly=K;var E=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey};exports.shiftKeyOnly=E;var d=function(e){var t=e.originalEvent.target.tagName;return"INPUT"!==t&&"SELECT"!==t&&"TEXTAREA"!==t};exports.targetNotEditable=d;var m=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"mouse"==r.pointerType};exports.mouseOnly=m;var g=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"touch"===r.pointerType};exports.touchOnly=g;var O=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),"pen"===r.pointerType};exports.penOnly=O;var h=function(e){var r=e.pointerEvent;return(0,t.assert)(void 0!==r,56),r.isPrimary&&0===r.button};exports.primaryAction=h;
},{"../MapBrowserEventType.js":"530S","../asserts.js":"d7gk","../functions.js":"bH9H","../has.js":"1fCX"}],"8Z00":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.centroid=v,exports.default=void 0;var e=r(require("../MapBrowserEventType.js")),t=r(require("./Interaction.js")),n=require("../obj.js");function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(r){function o(e){var t;i(this,o);var n=e||{};return t=l(this,c(o).call(this,n)),n.handleDownEvent&&(t.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(t.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(t.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(t.handleUpEvent=n.handleUpEvent),n.stopDown&&(t.stopDown=n.stopDown),t.handlingDownUpSequence=!1,t.trackedPointers_={},t.targetPointers=[],t}return s(o,t.default),u(o,[{key:"handleDownEvent",value:function(e){return!1}},{key:"handleDragEvent",value:function(e){}},{key:"handleEvent",value:function(t){if(!t.pointerEvent)return!0;var n=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==e.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==e.default.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==e.default.POINTERDOWN){var o=this.handleDownEvent(t);o&&t.preventDefault(),this.handlingDownUpSequence=o,n=this.stopDown(o)}else t.type==e.default.POINTERMOVE&&this.handleMoveEvent(t);return!n}},{key:"handleMoveEvent",value:function(e){}},{key:"handleUpEvent",value:function(e){return!1}},{key:"stopDown",value:function(e){return e}},{key:"updateTrackedPointers_",value:function(t){if(h(t)){var r=t.pointerEvent,o=r.pointerId.toString();t.type==e.default.POINTERUP?delete this.trackedPointers_[o]:t.type==e.default.POINTERDOWN?this.trackedPointers_[o]=r:o in this.trackedPointers_&&(this.trackedPointers_[o]=r),this.targetPointers=(0,n.getValues)(this.trackedPointers_)}}}]),o}();function v(e){for(var t=e.length,n=0,r=0,o=0;o<t;o++)n+=e[o].clientX,r+=e[o].clientY;return[n/t,r/t]}function h(t){var n=t.type;return n===e.default.POINTERDOWN||n===e.default.POINTERDRAG||n===e.default.POINTERUP}var y=d;exports.default=y;
},{"../MapBrowserEventType.js":"530S","./Interaction.js":"OY0/","../obj.js":"dV1Q"}],"EijA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../coordinate.js"),e=require("../easing.js"),n=require("../events/condition.js"),i=require("../functions.js"),r=o(require("./Pointer.js"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};i.get||i.set?Object.defineProperty(e,n,i):e[n]=t[n]}return e.default=t,e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(n){function o(t){var e;a(this,o);var n=t||{};return(e=l(this,h(o).call(this,{stopDown:i.FALSE}))).kinetic_=n.kinetic,e.lastCentroid=null,e.lastPointersCount_,e.panning_=!1,e.condition_=n.condition?n.condition:y,e.noKinetic_=!1,e}return p(o,r.default),u(o,[{key:"handleDragEvent",value:function(e){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,i=(0,r.centroid)(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],s=e.map.getView();(0,t.scale)(o,s.getResolution()),(0,t.rotate)(o,s.getRotation()),s.adjustCenter(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length}},{key:"handleUpEvent",value:function(t){var n=t.map,i=n.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenter(),a=n.getPixelFromCoordinate(s),c=n.getCoordinateFromPixel([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animate({center:i.getConstrainedCenter(c),duration:500,easing:e.easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}]),o}();function y(t){return(0,n.noModifierKeys)(t)&&(0,n.primaryAction)(t)}var _=d;exports.default=_;
},{"../coordinate.js":"Gkmg","../easing.js":"XQse","../events/condition.js":"2Mo3","../functions.js":"bH9H","./Pointer.js":"8Z00"}],"h/kW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../rotationconstraint.js"),e=require("../events/condition.js"),n=require("../functions.js"),o=r(require("./Pointer.js"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(r){function i(t){var o;u(this,i);var r=t||{};return(o=c(this,f(i).call(this,{stopDown:n.FALSE}))).condition_=r.condition?r.condition:e.altShiftKeysOnly,o.lastAngle_=void 0,o.duration_=void 0!==r.duration?r.duration:250,o}return p(i,o.default),l(i,[{key:"handleDragEvent",value:function(n){if((0,e.mouseOnly)(n)){var o=n.map,r=o.getView();if(r.getConstraints().rotation!==t.disable){var i=o.getSize(),u=n.pixel,a=Math.atan2(i[1]/2-u[1],u[0]-i[0]/2);if(void 0!==this.lastAngle_){var l=a-this.lastAngle_;r.adjustRotation(-l)}this.lastAngle_=a}}}},{key:"handleUpEvent",value:function(t){return!(0,e.mouseOnly)(t)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){return!!(0,e.mouseOnly)(t)&&(!(!(0,e.mouseActionButton)(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}]),i}(),b=d;exports.default=b;
},{"../rotationconstraint.js":"oxRp","../events/condition.js":"2Mo3","../functions.js":"bH9H","./Pointer.js":"8Z00"}],"I5Pf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("../Disposable.js")),t=n(require("../geom/Polygon.js"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(n){function r(e){var t;return o(this,r),(t=a(this,s(r).call(this))).geometry_=null,t.element_=document.createElement("div"),t.element_.style.position="absolute",t.element_.className="ol-box "+e,t.map_=null,t.startPixel_=null,t.endPixel_=null,t}return f(r,e.default),l(r,[{key:"disposeInternal",value:function(){this.setMap(null)}},{key:"render_",value:function(){var e=this.startPixel_,t=this.endPixel_,n=this.element_.style;n.left=Math.min(e[0],t[0])+"px",n.top=Math.min(e[1],t[1])+"px",n.width=Math.abs(t[0]-e[0])+"px",n.height=Math.abs(t[1]-e[1])+"px"}},{key:"setMap",value:function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}},{key:"setPixels",value:function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}},{key:"createOrUpdateGeometry",value:function(){var e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new t.default([r])}},{key:"getGeometry",value:function(){return this.geometry_}}]),r}(),h=p;exports.default=h;
},{"../Disposable.js":"1A8/","../geom/Polygon.js":"mzg3"}],"108G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../events/Event.js")),e=require("../events/condition.js"),n=require("../functions.js"),o=i(require("./Pointer.js")),r=i(require("../render/Box.js"));function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},h=function(e){function n(t,e,o){var r;return l(this,n),(r=c(this,d(n).call(this,t))).coordinate=e,r.mapBrowserEvent=o,r}return p(n,t.default),n}(),x=function(t){function i(t){var o;l(this,i);var u=t||{};return(o=c(this,d(i).call(this))).box_=new r.default(u.className||"ol-dragbox"),o.minArea_=void 0!==u.minArea?u.minArea:64,o.onBoxEnd_=u.onBoxEnd?u.onBoxEnd:n.VOID,o.startPixel_=null,o.condition_=u.condition?u.condition:e.always,o.boxEndCondition_=u.boxEndCondition?u.boxEndCondition:o.defaultBoxEndCondition,o}return p(i,o.default),s(i,[{key:"defaultBoxEndCondition",value:function(t,e,n){var o=n[0]-e[0],r=n[1]-e[1];return o*o+r*r>=this.minArea_}},{key:"getGeometry",value:function(){return this.box_.getGeometry()}},{key:"handleDragEvent",value:function(t){(0,e.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new h(y.BOXDRAG,t.coordinate,t)))}},{key:"handleUpEvent",value:function(t){return!(0,e.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new h(y.BOXEND,t.coordinate,t))),!1)}},{key:"handleDownEvent",value:function(t){return!!(0,e.mouseOnly)(t)&&(!(!(0,e.mouseActionButton)(t)||!this.condition_(t))&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new h(y.BOXSTART,t.coordinate,t)),!0))}}]),i}(),_=x;exports.default=_;
},{"../events/Event.js":"nz3i","../events/condition.js":"2Mo3","../functions.js":"bH9H","./Pointer.js":"8Z00","../render/Box.js":"I5Pf"}],"1MWs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../easing.js"),e=require("../events/condition.js"),o=require("../extent.js"),n=r(require("./DragBox.js"));function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function o(t){var n;u(this,o);var r=t||{},i=r.condition?r.condition:e.shiftKeyOnly;return(n=a(this,c(o).call(this,{condition:i,className:r.className||"ol-dragzoom",onBoxEnd:d}))).duration_=void 0!==r.duration?r.duration:200,n.out_=void 0!==r.out&&r.out,n}return f(o,n.default),o}();function d(){var e=this.getMap(),n=e.getView(),r=e.getSize(),i=this.getGeometry().getExtent();if(this.out_){var u=n.calculateExtent(r),a=(0,o.createOrUpdateFromCoordinates)([e.getPixelFromCoordinate((0,o.getBottomLeft)(i)),e.getPixelFromCoordinate((0,o.getTopRight)(i))]),s=n.getResolutionForExtent(a,r);(0,o.scaleFromCenter)(u,1/s),i=u}var c=n.getConstrainedResolution(n.getResolutionForExtent(i,r)),f=n.getConstrainedCenter((0,o.getCenter)(i),c);n.animate({resolution:c,center:f,duration:this.duration_,easing:t.easeOut})}var y=p;exports.default=y;
},{"../easing.js":"XQse","../events/condition.js":"2Mo3","../extent.js":"+QKI","./DragBox.js":"108G"}],"7Mqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LEFT:37,UP:38,RIGHT:39,DOWN:40};exports.default=e;
},{}],"BZBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../coordinate.js"),e=u(require("../events/EventType.js")),o=u(require("../events/KeyCode.js")),n=require("../events/condition.js"),r=i(require("./Interaction.js"));function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,o):{};n.get||n.set?Object.defineProperty(e,o,n):e[o]=t[o]}return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(t){var o;f(this,e);var r=t||{};return(o=c(this,p(e).call(this,{handleEvent:v}))).defaultCondition_=function(t){return(0,n.noModifierKeys)(t)&&(0,n.targetNotEditable)(t)},o.condition_=void 0!==r.condition?r.condition:o.defaultCondition_,o.duration_=void 0!==r.duration?r.duration:100,o.pixelDelta_=void 0!==r.pixelDelta?r.pixelDelta:128,o}return s(e,r.default),e}();function v(n){var i=!1;if(n.type==e.default.KEYDOWN){var u=n.originalEvent.keyCode;if(this.condition_(n)&&(u==o.default.DOWN||u==o.default.LEFT||u==o.default.RIGHT||u==o.default.UP)){var a=n.map.getView(),f=a.getResolution()*this.pixelDelta_,c=0,l=0;u==o.default.DOWN?l=-f:u==o.default.LEFT?c=-f:u==o.default.RIGHT?c=f:l=f;var p=[c,l];(0,t.rotate)(p,a.getRotation()),(0,r.pan)(a,p,this.duration_),n.preventDefault(),i=!0}}return!i}var b=y;exports.default=b;
},{"../coordinate.js":"Gkmg","../events/EventType.js":"KZbn","../events/KeyCode.js":"7Mqg","../events/condition.js":"2Mo3","./Interaction.js":"OY0/"}],"HgHC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../events/EventType.js")),e=require("../events/condition.js"),r=o(require("./Interaction.js"));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,r):{};o.get||o.set?Object.defineProperty(e,r,o):e[r]=t[r]}return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(t){function o(t){var r;u(this,o);var n=t||{};return(r=a(this,f(o).call(this,{handleEvent:d}))).condition_=n.condition?n.condition:e.targetNotEditable,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return l(o,r.default),o}();function d(e){var o=!1;if(e.type==t.default.KEYDOWN||e.type==t.default.KEYPRESS){var n=e.originalEvent.charCode;if(this.condition_(e)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){var i=e.map,u=n=="+".charCodeAt(0)?this.delta_:-this.delta_,a=i.getView();(0,r.zoomByDelta)(a,u,void 0,this.duration_),e.preventDefault(),o=!0}}return!o}var y=s;exports.default=y;
},{"../events/EventType.js":"KZbn","../events/condition.js":"2Mo3","./Interaction.js":"OY0/"}],"oIqQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Mode=void 0;var t=require("../events/condition.js"),e=a(require("../events/EventType.js")),o=require("../has.js"),r=n(require("./Interaction.js")),i=require("../math.js");function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,o):{};r.get||r.set?Object.defineProperty(e,o,r):e[o]=t[o]}return e.default=t,e}function a(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,o){return e&&l(t.prototype,e),o&&l(t,o),t}function d(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m={TRACKPAD:"trackpad",WHEEL:"wheel"};exports.Mode=m;var v=function(n){function a(e){var o;u(this,a);var r=e||{};return(o=d(this,_(a).call(this,r))).totalDelta_=0,o.lastDelta_=0,o.maxDelta_=void 0!==r.maxDelta?r.maxDelta:1,o.duration_=void 0!==r.duration?r.duration:250,o.timeout_=void 0!==r.timeout?r.timeout:80,o.useAnchor_=void 0===r.useAnchor||r.useAnchor,o.condition_=r.condition?r.condition:t.always,o.lastAnchor_=null,o.startTime_=void 0,o.timeoutId_,o.mode_=void 0,o.trackpadEventGap_=400,o.trackpadTimeoutId_,o.trackpadDeltaPerZoom_=300,o}return f(a,r.default),c(a,[{key:"endInteraction_",value:function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,Math.sign(this.lastDelta_),this.lastAnchor_)}},{key:"handleEvent",value:function(t){if(!this.condition_(t))return!0;var r=t.type;if(r!==e.default.WHEEL&&r!==e.default.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,a=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==e.default.WHEEL?(i=a.deltaY,o.FIREFOX&&a.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=o.DEVICE_PIXEL_RATIO),a.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==e.default.MOUSEWHEEL&&(i=-a.wheelDeltaY,o.SAFARI&&(i/=3)),0===i)return!1;this.lastDelta_=i;var s=Date.now();if(void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?m.TRACKPAD:m.WHEEL),this.mode_===m.TRACKPAD){var u=n.getView();return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):u.beginInteraction(),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.trackpadEventGap_),u.adjustZoom(-i/this.trackpadDeltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1}this.totalDelta_+=i;var l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}},{key:"handleWheelZoom_",value:function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var o=(0,i.clamp)(this.totalDelta_,-this.maxDelta_,this.maxDelta_);(0,r.zoomByDelta)(e,-o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}},{key:"setMouseAnchor",value:function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}]),a}(),y=v;exports.default=y;
},{"../events/condition.js":"2Mo3","../events/EventType.js":"KZbn","../has.js":"1fCX","./Interaction.js":"OY0/","../math.js":"t/nT"}],"vgD5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=r(require("./Pointer.js")),n=require("../rotationconstraint.js");function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(r){function o(e){var n;i(this,o);var r=e||{},a=r;return a.stopDown||(a.stopDown=t.FALSE),(n=u(this,c(o).call(this,a))).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==r.threshold?r.threshold:.3,n.duration_=void 0!==r.duration?r.duration:250,n}return f(o,e.default),s(o,[{key:"handleDragEvent",value:function(t){var r=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.lastAngle_){var s=a-this.lastAngle_;this.rotationDelta_+=s,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),r=s}this.lastAngle_=a;var u=t.map,l=u.getView();if(l.getConstraints().rotation!==n.disable){var c=u.getViewport().getBoundingClientRect(),f=(0,e.centroid)(this.targetPointers);f[0]-=c.left,f[1]-=c.top,this.anchor_=u.getCoordinateFromPixel(f),this.rotating_&&(u.render(),l.adjustRotation(r,this.anchor_))}}},{key:"handleUpEvent",value:function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),o}(),d=p;exports.default=d;
},{"../functions.js":"bH9H","./Pointer.js":"8Z00","../rotationconstraint.js":"oxRp"}],"PtbH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../functions.js"),e=n(require("./Pointer.js"));function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(n){function r(e){var n;o(this,r);var i=e||{},a=i;return a.stopDown||(a.stopDown=t.FALSE),(n=u(this,l(r).call(this,a))).anchor_=null,n.duration_=void 0!==i.duration?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return s(r,e.default),a(r,[{key:"handleDragEvent",value:function(t){var n=1,r=this.targetPointers[0],o=this.targetPointers[1],i=r.clientX-o.clientX,a=r.clientY-o.clientY,u=Math.sqrt(i*i+a*a);void 0!==this.lastDistance_&&(n=this.lastDistance_/u),this.lastDistance_=u;var c=t.map,l=c.getView();1!=n&&(this.lastScaleDelta_=n);var s=c.getViewport().getBoundingClientRect(),f=(0,e.centroid)(this.targetPointers);f[0]-=s.left,f[1]-=s.top,this.anchor_=c.getCoordinateFromPixel(f),c.render(),l.adjustResolution(n,this.anchor_)}},{key:"handleUpEvent",value:function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}},{key:"handleDownEvent",value:function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}]),r}(),h=p;exports.default=h;
},{"../functions.js":"bH9H","./Pointer.js":"8Z00"}],"wb9I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../functions.js"),t=require("../events.js"),r=s(require("../events/Event.js")),n=s(require("../events/EventType.js")),o=s(require("./Interaction.js")),i=require("../proj.js");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=l(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function l(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g={ADD_FEATURES:"addfeatures"},b=function(e){function t(e,r,n,o){var i;return p(this,t),(i=h(this,d(t).call(this,e))).features=n,i.file=r,i.projection=o,i}return v(t,r.default),t}(),j=function(r){function s(t){var r;p(this,s);var n=t||{};return(r=h(this,d(s).call(this,{handleEvent:e.TRUE}))).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?(0,i.get)(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return v(s,o.default),a(s,[{key:"handleResult_",value:function(e,t){var r=t.target.result,n=this.getMap(),o=this.projection_;o||(o=n.getView().getProjection());for(var i=this.formatConstructors_,s=[],u=0,a=i.length;u<a;++u){var c=new i[u];if((s=this.tryReadFeatures_(c,r,{featureProjection:o}))&&s.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(s)),this.dispatchEvent(new b(g.ADD_FEATURES,e,s,o))}},{key:"registerListeners_",value:function(){var e=this.getMap();if(e){var r=this.target?this.target:e.getViewport();this.dropListenKeys_=[(0,t.listen)(r,n.default.DROP,O,this),(0,t.listen)(r,n.default.DRAGENTER,E,this),(0,t.listen)(r,n.default.DRAGOVER,E,this),(0,t.listen)(r,n.default.DROP,E,this)]}}},{key:"setActive",value:function(e){c(d(s.prototype),"setActive",this).call(this,e),e?this.registerListeners_():this.unregisterListeners_()}},{key:"setMap",value:function(e){this.unregisterListeners_(),c(d(s.prototype),"setMap",this).call(this,e),this.getActive()&&this.registerListeners_()}},{key:"tryReadFeatures_",value:function(e,t,r){try{return e.readFeatures(t,r)}catch(n){return null}}},{key:"unregisterListeners_",value:function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(t.unlistenByKey),this.dropListenKeys_=null)}}]),s}();function O(e){for(var t=e.dataTransfer.files,r=0,o=t.length;r<o;++r){var i=t.item(r),s=new FileReader;s.addEventListener(n.default.LOAD,this.handleResult_.bind(this,i)),s.readAsText(i)}}function E(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}var R=j;exports.default=R;
},{"../functions.js":"bH9H","../events.js":"sgxS","../events/Event.js":"nz3i","../events/EventType.js":"KZbn","./Interaction.js":"OY0/","../proj.js":"5Zkk"}],"Xao7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../events/condition.js"),e=n(require("./Pointer.js"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(n){function o(e){var n;i(this,o);var r=e||{};return(n=u(this,s(o).call(this,r))).condition_=r.condition?r.condition:t.shiftKeyOnly,n.lastAngle_=void 0,n.lastMagnitude_=void 0,n.lastScaleDelta_=0,n.duration_=void 0!==r.duration?r.duration:400,n}return c(o,e.default),a(o,[{key:"handleDragEvent",value:function(e){if((0,t.mouseOnly)(e)){var n=e.map,o=n.getSize(),i=e.pixel,r=i[0]-o[0]/2,a=o[1]/2-i[1],u=Math.atan2(a,r),l=Math.sqrt(r*r+a*a),s=n.getView();if(void 0!==this.lastAngle_){var c=this.lastAngle_-u;s.adjustRotation(c)}this.lastAngle_=u,void 0!==this.lastMagnitude_&&s.adjustResolution(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}}},{key:"handleUpEvent",value:function(e){if(!(0,t.mouseOnly)(e))return!0;var n=e.map.getView(),o=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,o),this.lastScaleDelta_=0,!1}},{key:"handleDownEvent",value:function(e){return!!(0,t.mouseOnly)(e)&&(!!this.condition_(e)&&(e.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}]),o}(),p=d;exports.default=p;
},{"../events/condition.js":"2Mo3","./Pointer.js":"8Z00"}],"wUQb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStyleFunction=p,exports.default=void 0;var e=require("./asserts.js"),t=require("./events.js"),n=i(require("./events/EventType.js")),r=o(require("./Object.js"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function l(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(e){function o(e){var n;if(s(this,o),(n=l(this,c(o).call(this))).id_=void 0,n.geometryName_="geometry",n.style_=null,n.styleFunction_=void 0,n.geometryChangeKey_=null,(0,t.listen)(f(n),(0,r.getChangeEventType)(n.geometryName_),n.handleGeometryChanged_,f(n)),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;n.setGeometry(i)}else{var u=e;n.setProperties(u)}return n}return h(o,r.default),a(o,[{key:"clone",value:function(){var e=new o(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var n=this.getStyle();return n&&e.setStyle(n),e}},{key:"getGeometry",value:function(){return this.get(this.geometryName_)}},{key:"getId",value:function(){return this.id_}},{key:"getGeometryName",value:function(){return this.geometryName_}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"handleGeometryChange_",value:function(){this.changed()}},{key:"handleGeometryChanged_",value:function(){this.geometryChangeKey_&&((0,t.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=(0,t.listen)(e,n.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}},{key:"setGeometry",value:function(e){this.set(this.geometryName_,e)}},{key:"setStyle",value:function(e){this.style_=e,this.styleFunction_=e?p(e):void 0,this.changed()}},{key:"setId",value:function(e){this.id_=e,this.changed()}},{key:"setGeometryName",value:function(e){(0,t.unlisten)(this,(0,r.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=e,(0,t.listen)(this,(0,r.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()}}]),o}();function p(t){return"function"==typeof t?t:(Array.isArray(t)?n=t:((0,e.assert)("function"==typeof t.getZIndex,41),n=[t]),function(){return n});var n}var d=m;exports.default=d;
},{"./asserts.js":"d7gk","./events.js":"sgxS","./events/EventType.js":"KZbn","./Object.js":"luFO"}],"1ReZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),e=o(require("./GeometryType.js")),r=o(require("./SimpleGeometry.js")),n=require("./flat/deflate.js"),i=require("./flat/transform.js");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(o){function s(t,e,r){var n;if(a(this,s),n=l(this,d(s).call(this)),void 0!==r&&void 0===e)n.setFlatCoordinates(r,t);else{var i=e||0;n.setCenterAndRadius(t,i,r)}return n}return h(s,r.default),f(s,[{key:"clone",value:function(){return new s(this.flatCoordinates.slice(),void 0,this.layout)}},{key:"closestPointXY",value:function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],s=e-i[1],a=o*o+s*s;if(a<n){if(0===a)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var f=this.getRadius()/Math.sqrt(a);r[0]=i[0]+f*o,r[1]=i[1]+f*s;for(var l=2;l<this.stride;++l)r[l]=i[l]}return r.length=this.stride,a}return n}},{key:"containsXY",value:function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()}},{key:"getCenter",value:function(){return this.flatCoordinates.slice(0,this.stride)}},{key:"computeExtent",value:function(e){var r=this.flatCoordinates,n=r[this.stride]-r[0];return(0,t.createOrUpdate)(r[0]-n,r[1]-n,r[0]+n,r[1]+n,e)}},{key:"getRadius",value:function(){return Math.sqrt(this.getRadiusSquared_())}},{key:"getRadiusSquared_",value:function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}},{key:"getType",value:function(){return e.default.CIRCLE}},{key:"intersectsExtent",value:function(e){var r=this.getExtent();if((0,t.intersects)(e,r)){var n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||(e[1]<=n[1]&&e[3]>=n[1]||(0,t.forEachCorner)(e,this.intersectsCoordinate.bind(this)))}return!1}},{key:"setCenter",value:function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()}},{key:"setCenterAndRadius",value:function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var i=this.flatCoordinates,o=(0,n.deflateCoordinate)(i,0,t,this.stride);i[o++]=i[0]+e;for(var s=1,a=this.stride;s<a;++s)i[o++]=i[s];i.length=o,this.changed()}},{key:"getCoordinates",value:function(){return null}},{key:"setCoordinates",value:function(t,e){}},{key:"setRadius",value:function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}},{key:"rotate",value:function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter((0,i.rotate)(r,0,r.length,n,t,e,r)),this.changed()}},{key:"translate",value:function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter((0,i.translate)(r,0,r.length,n,t,e,r)),this.changed()}}]),s}();v.prototype.transform;var p=v;exports.default=p;
},{"../extent.js":"+QKI","./GeometryType.js":"mFnd","./SimpleGeometry.js":"AOUP","./flat/deflate.js":"81ry","./flat/transform.js":"K8GA"}],"t4l/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolatePoint=n,exports.lineStringCoordinateAtM=t,exports.lineStringsCoordinateAtM=i;var r=require("../../array.js"),e=require("../../math.js");function n(n,t,i,l,u,a){var f=NaN,s=NaN,o=(i-t)/l;if(1===o)f=n[t],s=n[t+1];else if(2==o)f=(1-u)*n[t]+u*n[t+l],s=(1-u)*n[t+1]+u*n[t+l+1];else if(0!==o){for(var v=n[t],c=n[t+1],p=0,h=[0],g=t+l;g<i;g+=l){var d=n[g],x=n[g+1];p+=Math.sqrt((d-v)*(d-v)+(x-c)*(x-c)),h.push(p),v=d,c=x}var M=u*p,N=(0,r.binarySearch)(h,M);if(N<0){var j=(M-h[-N-2])/(h[-N-1]-h[-N-2]),q=t+(-N-2)*l;f=(0,e.lerp)(n[q],n[q+l],j),s=(0,e.lerp)(n[q+1],n[q+l+1],j)}else f=n[t+N*l],s=n[t+N*l+1]}return a?(a[0]=f,a[1]=s,a):[f,s]}function t(r,n,t,i,l,u){if(t==n)return null;var a;if(l<r[n+i-1])return u?((a=r.slice(n,n+i))[i-1]=l,a):null;if(r[t-1]<l)return u?((a=r.slice(t-i,t))[i-1]=l,a):null;if(l==r[n+i-1])return r.slice(n,n+i);for(var f=n/i,s=t/i;f<s;){var o=f+s>>1;l<r[(o+1)*i-1]?s=o:f=o+1}var v=r[f*i-1];if(l==v)return r.slice((f-1)*i,(f-1)*i+i);var c=(l-v)/(r[(f+1)*i-1]-v);a=[];for(var p=0;p<i-1;++p)a.push((0,e.lerp)(r[(f-1)*i+p],r[f*i+p],c));return a.push(l),a}function i(r,e,n,i,l,u,a){if(a)return t(r,e,n[n.length-1],i,l,u);var f;if(l<r[i-1])return u?((f=r.slice(0,i))[i-1]=l,f):null;if(r[r.length-1]<l)return u?((f=r.slice(r.length-i))[i-1]=l,f):null;for(var s=0,o=n.length;s<o;++s){var v=n[s];if(e!=v){if(l<r[e+i-1])return null;if(l<=r[v-1])return t(r,e,v,i,l,!1);e=v}}return null}
},{"../../array.js":"YQ1M","../../math.js":"t/nT"}],"IFNQ":[function(require,module,exports) {
"use strict";function r(r,t,e,n){for(var i=r[t],o=r[t+1],s=0,a=t+n;a<e;a+=n){var u=r[a],c=r[a+1];s+=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o)),i=u,o=c}return s}function t(t,e,n,i){var o=r(t,e,n,i),s=t[n-i]-t[e],a=t[n-i+1]-t[e+1];return o+=Math.sqrt(s*s+a*a)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.lineStringLength=r,exports.linearRingLength=t;
},{}],"Y6IR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=c(require("./GeometryLayout.js")),n=c(require("./GeometryType.js")),o=c(require("./SimpleGeometry.js")),r=require("./flat/closest.js"),s=require("./flat/deflate.js"),a=require("./flat/inflate.js"),l=require("./flat/interpolate.js"),u=require("./flat/intersectsextent.js"),f=require("./flat/length.js"),h=require("./flat/segments.js"),d=require("./flat/simplify.js");function c(t){return t&&t.__esModule?t:{default:t}}function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function C(t,e,i){return e&&g(t.prototype,e),i&&g(t,i),t}function v(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?m(t):e}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(c){function y(t,e){var i;return p(this,y),(i=v(this,_(y).call(this))).flatMidpoint_=null,i.flatMidpointRevision_=-1,i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?i.setCoordinates(t,e):i.setFlatCoordinates(e,t),i}return b(y,o.default),C(y,[{key:"appendCoordinate",value:function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()}},{key:"clone",value:function(){return new y(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,i,n,o){return o<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?o:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,i,n,o))}},{key:"forEachSegment",value:function(t){return(0,h.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"getCoordinateAtM",value:function(t,e){if(this.layout!=i.default.XYM&&this.layout!=i.default.XYZM)return null;var n=void 0!==e&&e;return(0,l.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n)}},{key:"getCoordinates",value:function(){return(0,a.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getCoordinateAt",value:function(t,e){return(0,l.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)}},{key:"getLength",value:function(){return(0,f.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getFlatMidpoint",value:function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[];return e.length=(0,d.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new y(e,i.default.XY)}},{key:"getType",value:function(){return n.default.LINE_STRING}},{key:"intersectsExtent",value:function(t){return(0,u.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),y}(),x=q;exports.default=x;
},{"../array.js":"YQ1M","../extent.js":"+QKI","./GeometryLayout.js":"sK7e","./GeometryType.js":"mFnd","./SimpleGeometry.js":"AOUP","./flat/closest.js":"CGCt","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","./flat/interpolate.js":"t4l/","./flat/intersectsextent.js":"8o94","./flat/length.js":"IFNQ","./flat/segments.js":"icib","./flat/simplify.js":"ITgx"}],"N5a8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),n=h(require("./GeometryLayout.js")),i=h(require("./GeometryType.js")),r=h(require("./LineString.js")),s=h(require("./SimpleGeometry.js")),o=require("./flat/closest.js"),a=require("./flat/deflate.js"),l=require("./flat/inflate.js"),u=require("./flat/interpolate.js"),f=require("./flat/intersectsextent.js"),d=require("./flat/simplify.js");function h(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function g(t,e,n){return e&&p(t.prototype,e),n&&p(t,n),t}function v(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=function(h){function c(e,n,i){var r;if(y(this,c),(r=v(this,C(c).call(this))).ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,n);else if(void 0!==n&&i)r.setFlatCoordinates(n,e),r.ends_=i;else{for(var s=r.getLayout(),o=e,a=[],l=[],u=0,f=o.length;u<f;++u){var d=o[u];0===u&&(s=d.getLayout()),(0,t.extend)(a,d.getFlatCoordinates()),l.push(a.length)}r.setFlatCoordinates(s,a),r.ends_=l}return r}return b(c,s.default),g(c,[{key:"appendLineString",value:function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}},{key:"clone",value:function(){return new c(this.flatCoordinates.slice(),this.layout,this.ends_.slice())}},{key:"closestPointXY",value:function(t,n,i,r){return r<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,n,i,r))}},{key:"getCoordinateAtM",value:function(t,e,i){if(this.layout!=n.default.XYM&&this.layout!=n.default.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,s=void 0!==i&&i;return(0,u.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,r,s)}},{key:"getCoordinates",value:function(){return(0,l.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}},{key:"getEnds",value:function(){return this.ends_}},{key:"getLineString",value:function(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}},{key:"getLineStrings",value:function(){for(var t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[],s=0,o=0,a=e.length;o<a;++o){var l=e[o],u=new r.default(t.slice(s,l),n);i.push(u),s=l}return i}},{key:"getFlatMidpoints",value:function(){for(var e=[],n=this.flatCoordinates,i=0,r=this.ends_,s=this.stride,o=0,a=r.length;o<a;++o){var l=r[o],f=(0,u.interpolatePoint)(n,i,l,s,.5);(0,t.extend)(e,f),i=l}return e}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],i=[];return e.length=(0,d.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new c(e,n.default.XY,i)}},{key:"getType",value:function(){return i.default.MULTI_LINE_STRING}},{key:"intersectsExtent",value:function(t){return(0,f.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=(0,a.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}]),c}(),x=j;exports.default=x;
},{"../array.js":"YQ1M","../extent.js":"+QKI","./GeometryLayout.js":"sK7e","./GeometryType.js":"mFnd","./LineString.js":"Y6IR","./SimpleGeometry.js":"AOUP","./flat/closest.js":"CGCt","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","./flat/interpolate.js":"t4l/","./flat/intersectsextent.js":"8o94","./flat/simplify.js":"ITgx"}],"C72u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),r=u(require("./GeometryType.js")),n=u(require("./Point.js")),o=u(require("./SimpleGeometry.js")),i=require("./flat/deflate.js"),s=require("./flat/inflate.js"),a=require("../math.js");function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?y(t):e}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(u){function l(t,e){var r;return f(this,l),r=h(this,p(l).call(this)),e&&!Array.isArray(t[0])?r.setFlatCoordinates(e,t):r.setCoordinates(t,e),r}return v(l,o.default),d(l,[{key:"appendPoint",value:function(e){this.flatCoordinates?(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()}},{key:"clone",value:function(){return new l(this.flatCoordinates.slice(),this.layout)}},{key:"closestPointXY",value:function(t,r,n,o){if(o<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,r))return o;for(var i=this.flatCoordinates,s=this.stride,u=0,l=i.length;u<l;u+=s){var f=(0,a.squaredDistance)(t,r,i[u],i[u+1]);if(f<o){o=f;for(var c=0;c<s;++c)n[c]=i[u+c];n.length=s}}return o}},{key:"getCoordinates",value:function(){return(0,s.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}},{key:"getPoint",value:function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new n.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}},{key:"getPoints",value:function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,o=[],i=0,s=t.length;i<s;i+=r){var a=new n.default(t.slice(i,i+r),e);o.push(a)}return o}},{key:"getType",value:function(){return r.default.MULTI_POINT}},{key:"intersectsExtent",value:function(t){for(var r=this.flatCoordinates,n=this.stride,o=0,i=r.length;o<i;o+=n){var s=r[o],a=r[o+1];if((0,e.containsXY)(t,s,a))return!0}return!1}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,i.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}]),l}(),g=b;exports.default=g;
},{"../array.js":"YQ1M","../extent.js":"+QKI","./GeometryType.js":"mFnd","./Point.js":"phv5","./SimpleGeometry.js":"AOUP","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","../math.js":"t/nT"}],"ZX05":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.linearRingss=r;var e=require("../../extent.js");function r(r,t,a,n){for(var s=[],o=(0,e.createEmpty)(),i=0,u=a.length;i<u;++i){var l=a[i];o=(0,e.createOrUpdateFromFlatCoordinates)(r,t,l[0],n),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),t=l[l.length-1]}return s}
},{"../../extent.js":"+QKI"}],"gjfC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../array.js"),e=require("../extent.js"),i=_(require("./GeometryLayout.js")),n=_(require("./GeometryType.js")),s=_(require("./MultiPoint.js")),r=_(require("./Polygon.js")),o=_(require("./SimpleGeometry.js")),a=require("./flat/area.js"),l=require("./flat/center.js"),u=require("./flat/closest.js"),d=require("./flat/contains.js"),h=require("./flat/deflate.js"),f=require("./flat/inflate.js"),c=require("./flat/interiorpoint.js"),y=require("./flat/intersectsextent.js"),g=require("./flat/orient.js"),v=require("./flat/simplify.js");function _(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function j(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,e,i){return e&&j(t.prototype,e),i&&j(t,i),t}function m(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?P(t):e}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var F=function(_){function p(e,i,n){var s;if(C(this,p),(s=m(this,R(p).call(this))).endss_=[],s.flatInteriorPointsRevision_=-1,s.flatInteriorPoints_=null,s.maxDelta_=-1,s.maxDeltaRevision_=-1,s.orientedRevision_=-1,s.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var r=s.getLayout(),o=e,a=[],l=[],u=0,d=o.length;u<d;++u){var h=o[u];0===u&&(r=h.getLayout());for(var f=a.length,c=h.getEnds(),y=0,g=c.length;y<g;++y)c[y]+=f;(0,t.extend)(a,h.getFlatCoordinates()),l.push(c)}i=r,e=a,n=l}return void 0!==i&&n?(s.setFlatCoordinates(i,e),s.endss_=n):s.setCoordinates(e,i),s}return q(p,o.default),b(p,[{key:"appendPolygon",value:function(e){var i;if(this.flatCoordinates){var n=this.flatCoordinates.length;(0,t.extend)(this.flatCoordinates,e.getFlatCoordinates());for(var s=0,r=(i=e.getEnds().slice()).length;s<r;++s)i[s]+=n}else this.flatCoordinates=e.getFlatCoordinates().slice(),i=e.getEnds().slice(),this.endss_.push();this.endss_.push(i),this.changed()}},{key:"clone",value:function(){for(var t=this.endss_.length,e=new Array(t),i=0;i<t;++i)e[i]=this.endss_[i].slice();return new p(this.flatCoordinates.slice(),this.layout,e)}},{key:"closestPointXY",value:function(t,i,n,s){return s<(0,e.closestSquaredDistanceXY)(this.getExtent(),t,i)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,u.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,u.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,i,n,s))}},{key:"containsXY",value:function(t,e){return(0,d.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}},{key:"getArea",value:function(){return(0,a.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}},{key:"getCoordinates",value:function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,g.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}},{key:"getEndss",value:function(){return this.endss_}},{key:"getFlatInteriorPoints",value:function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=(0,l.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,c.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}},{key:"getInteriorPoints",value:function(){return new s.default(this.getFlatInteriorPoints().slice(),i.default.XYM)}},{key:"getOrientedFlatCoordinates",value:function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;(0,g.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,g.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}},{key:"getSimplifiedGeometryInternal",value:function(t){var e=[],n=[];return e.length=(0,v.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new p(e,i.default.XY,n)}},{key:"getPolygon",value:function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),s=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new r.default(this.flatCoordinates.slice(e,s),this.layout,n)}},{key:"getPolygons",value:function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],s=0,o=0,a=i.length;o<a;++o){var l=i[o].slice(),u=l[l.length-1];if(0!==s)for(var d=0,h=l.length;d<h;++d)l[d]-=s;var f=new r.default(e.slice(s,u),t,l);n.push(f),s=u}return n}},{key:"getType",value:function(){return n.default.MULTI_POLYGON}},{key:"intersectsExtent",value:function(t){return(0,y.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}},{key:"setCoordinates",value:function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,h.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()}}]),p}(),k=F;exports.default=k;
},{"../array.js":"YQ1M","../extent.js":"+QKI","./GeometryLayout.js":"sK7e","./GeometryType.js":"mFnd","./MultiPoint.js":"C72u","./Polygon.js":"mzg3","./SimpleGeometry.js":"AOUP","./flat/area.js":"yR24","./flat/center.js":"ZX05","./flat/closest.js":"CGCt","./flat/contains.js":"bXFg","./flat/deflate.js":"81ry","./flat/inflate.js":"qHzx","./flat/interiorpoint.js":"g0iU","./flat/intersectsextent.js":"8o94","./flat/orient.js":"33rR","./flat/simplify.js":"ITgx"}],"V49+":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IDLE:0,LOADING:1,LOADED:2,ERROR:3};exports.default=e;
},{}],"g7jD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js");function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}var i=function(){function a(t){e(this,a),this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale}return n(a,[{key:"clone",value:function(){return new a({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}},{key:"getOpacity",value:function(){return this.opacity_}},{key:"getRotateWithView",value:function(){return this.rotateWithView_}},{key:"getRotation",value:function(){return this.rotation_}},{key:"getScale",value:function(){return this.scale_}},{key:"getAnchor",value:function(){return(0,t.abstract)()}},{key:"getImage",value:function(e){return(0,t.abstract)()}},{key:"getHitDetectionImage",value:function(e){return(0,t.abstract)()}},{key:"getImageState",value:function(){return(0,t.abstract)()}},{key:"getImageSize",value:function(){return(0,t.abstract)()}},{key:"getHitDetectionImageSize",value:function(){return(0,t.abstract)()}},{key:"getOrigin",value:function(){return(0,t.abstract)()}},{key:"getSize",value:function(){return(0,t.abstract)()}},{key:"setOpacity",value:function(t){this.opacity_=t}},{key:"setRotateWithView",value:function(t){this.rotateWithView_=t}},{key:"setRotation",value:function(t){this.rotation_=t}},{key:"setScale",value:function(t){this.scale_=t}},{key:"listenImageChange",value:function(e,a){return(0,t.abstract)()}},{key:"load",value:function(){(0,t.abstract)()}},{key:"unlistenImageChange",value:function(e,a){(0,t.abstract)()}}]),a}(),r=i;exports.default=r;
},{"../util.js":"MHZC"}],"f0DQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../colorlike.js"),e=require("../dom.js"),i=a(require("../ImageState.js")),n=require("../render/canvas.js"),s=a(require("./Image.js"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}function h(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(a){function r(t){var e;o(this,r);var i=void 0!==t.rotateWithView&&t.rotateWithView;return(e=h(this,f(r).call(this,{opacity:1,rotateWithView:i,rotation:void 0!==t.rotation?t.rotation:0,scale:1}))).canvas_=null,e.hitDetectionCanvas_=null,e.fill_=void 0!==t.fill?t.fill:null,e.origin_=[0,0],e.points_=t.points,e.radius_=void 0!==t.radius?t.radius:t.radius1,e.radius2_=t.radius2,e.angle_=void 0!==t.angle?t.angle:0,e.stroke_=void 0!==t.stroke?t.stroke:null,e.anchor_=null,e.size_=null,e.imageSize_=null,e.hitDetectionImageSize_=null,e.render_(),e}return _(r,s.default),u(r,[{key:"clone",value:function(){var t=new r({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}},{key:"getAnchor",value:function(){return this.anchor_}},{key:"getAngle",value:function(){return this.angle_}},{key:"getFill",value:function(){return this.fill_}},{key:"getHitDetectionImage",value:function(t){return this.hitDetectionCanvas_}},{key:"getImage",value:function(t){return this.canvas_}},{key:"getImageSize",value:function(){return this.imageSize_}},{key:"getHitDetectionImageSize",value:function(){return this.hitDetectionImageSize_}},{key:"getImageState",value:function(){return i.default.LOADED}},{key:"getOrigin",value:function(){return this.origin_}},{key:"getPoints",value:function(){return this.points_}},{key:"getRadius",value:function(){return this.radius_}},{key:"getRadius2",value:function(){return this.radius2_}},{key:"getSize",value:function(){return this.size_}},{key:"getStroke",value:function(){return this.stroke_}},{key:"listenImageChange",value:function(t,e){}},{key:"load",value:function(){}},{key:"unlistenImageChange",value:function(t,e){}},{key:"render_",value:function(){var i,s="",a="",r=0,o=null,l=0,u=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=n.defaultStrokeStyle),i=(0,t.asColorLike)(i),void 0===(u=this.stroke_.getWidth())&&(u=n.defaultLineWidth),o=this.stroke_.getLineDash(),l=this.stroke_.getLineDashOffset(),void 0===(a=this.stroke_.getLineJoin())&&(a=n.defaultLineJoin),void 0===(s=this.stroke_.getLineCap())&&(s=n.defaultLineCap),void 0===(r=this.stroke_.getMiterLimit())&&(r=n.defaultMiterLimit));var h=2*(this.radius_+u)+1,c={strokeStyle:i,strokeWidth:u,size:h,lineCap:s,lineDash:o,lineDashOffset:l,lineJoin:a,miterLimit:r},f=(0,e.createCanvasContext2D)(h,h);this.canvas_=f.canvas;var _=h=this.canvas_.width;this.draw_(c,f,0,0),this.createHitDetectionCanvas_(c),this.anchor_=[h/2,h/2],this.size_=[h,h],this.imageSize_=[_,_]}},{key:"draw_",value:function(e,i,s,a){var r,o,l;i.setTransform(1,0,0,1,0,0),i.translate(s,a),i.beginPath();var u=this.points_;if(u===1/0)i.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{var h=void 0!==this.radius2_?this.radius2_:this.radius_;for(h!==this.radius_&&(u*=2),r=0;r<=u;r++)o=2*r*Math.PI/u-Math.PI/2+this.angle_,l=r%2==0?this.radius_:h,i.lineTo(e.size/2+l*Math.cos(o),e.size/2+l*Math.sin(o))}if(this.fill_){var c=this.fill_.getColor();null===c&&(c=n.defaultFillStyle),i.fillStyle=(0,t.asColorLike)(c),i.fill()}this.stroke_&&(i.strokeStyle=e.strokeStyle,i.lineWidth=e.strokeWidth,i.setLineDash&&e.lineDash&&(i.setLineDash(e.lineDash),i.lineDashOffset=e.lineDashOffset),i.lineCap=e.lineCap,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit,i.stroke()),i.closePath()}},{key:"createHitDetectionCanvas_",value:function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var i=(0,e.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=i.canvas,this.drawHitDetectionCanvas_(t,i,0,0)}}},{key:"drawHitDetectionCanvas_",value:function(t,e,i,s){e.setTransform(1,0,0,1,0,0),e.translate(i,s),e.beginPath();var a=this.points_;if(a===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var r,o,l,u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(a*=2),r=0;r<=a;r++)l=2*r*Math.PI/a-Math.PI/2+this.angle_,o=r%2==0?this.radius_:u,e.lineTo(t.size/2+o*Math.cos(l),t.size/2+o*Math.sin(l))}e.fillStyle=n.defaultFillStyle,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()}}]),r}(),g=v;exports.default=g;
},{"../colorlike.js":"u4Pe","../dom.js":"4KLO","../ImageState.js":"V49+","../render/canvas.js":"2eJG","./Image.js":"g7jD"}],"/MUl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./RegularShape.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var a=function(e){function o(t){r(this,o);var e=t||{};return u(this,l(o).call(this,{points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke}))}return f(o,t.default),i(o,[{key:"clone",value:function(){var t=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t}},{key:"setRadius",value:function(t){this.radius_=t}}]),o}(),p=a;exports.default=p;
},{"./RegularShape.js":"f0DQ"}],"Yzfm":[function(require,module,exports) {
"use strict";function e(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function o(e,o){for(var r=0;r<o.length;r++){var t=o[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function(){function o(r){e(this,o);var t=r||{};this.color_=void 0!==t.color?t.color:null}return r(o,[{key:"clone",value:function(){var e=this.getColor();return new o({color:Array.isArray(e)?e.slice():e||void 0})}},{key:"getColor",value:function(){return this.color_}},{key:"setColor",value:function(e){this.color_=e}}]),o}(),n=t;exports.default=n;
},{}],"h5nh":[function(require,module,exports) {
"use strict";function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=function(){function i(t){e(this,i);var n=t||{};this.color_=void 0!==n.color?n.color:null,this.lineCap_=n.lineCap,this.lineDash_=void 0!==n.lineDash?n.lineDash:null,this.lineDashOffset_=n.lineDashOffset,this.lineJoin_=n.lineJoin,this.miterLimit_=n.miterLimit,this.width_=n.width}return t(i,[{key:"clone",value:function(){var e=this.getColor();return new i({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}},{key:"getColor",value:function(){return this.color_}},{key:"getLineCap",value:function(){return this.lineCap_}},{key:"getLineDash",value:function(){return this.lineDash_}},{key:"getLineDashOffset",value:function(){return this.lineDashOffset_}},{key:"getLineJoin",value:function(){return this.lineJoin_}},{key:"getMiterLimit",value:function(){return this.miterLimit_}},{key:"getWidth",value:function(){return this.width_}},{key:"setColor",value:function(e){this.color_=e}},{key:"setLineCap",value:function(e){this.lineCap_=e}},{key:"setLineDash",value:function(e){this.lineDash_=e}},{key:"setLineDashOffset",value:function(e){this.lineDashOffset_=e}},{key:"setLineJoin",value:function(e){this.lineJoin_=e}},{key:"setMiterLimit",value:function(e){this.miterLimit_=e}},{key:"setWidth",value:function(e){this.width_=e}}]),i}(),s=n;exports.default=s;
},{}],"TiiD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toFunction=c,exports.createDefaultStyle=y,exports.createEditingStyle=g,exports.default=void 0;var e=require("../asserts.js"),t=i(require("../geom/GeometryType.js")),n=i(require("./Circle.js")),r=i(require("./Fill.js")),o=i(require("./Stroke.js"));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var s=function(){function e(t){l(this,e);var n=t||{};this.geometry_=null,this.geometryFunction_=h,void 0!==n.geometry&&this.setGeometry(n.geometry),this.fill_=void 0!==n.fill?n.fill:null,this.image_=void 0!==n.image?n.image:null,this.renderer_=void 0!==n.renderer?n.renderer:null,this.stroke_=void 0!==n.stroke?n.stroke:null,this.text_=void 0!==n.text?n.text:null,this.zIndex_=n.zIndex}return a(e,[{key:"clone",value:function(){var t=this.getGeometry();return t&&"object"===u(t)&&(t=t.clone()),new e({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"setRenderer",value:function(e){this.renderer_=e}},{key:"getGeometry",value:function(){return this.geometry_}},{key:"getGeometryFunction",value:function(){return this.geometryFunction_}},{key:"getFill",value:function(){return this.fill_}},{key:"setFill",value:function(e){this.fill_=e}},{key:"getImage",value:function(){return this.image_}},{key:"setImage",value:function(e){this.image_=e}},{key:"getStroke",value:function(){return this.stroke_}},{key:"setStroke",value:function(e){this.stroke_=e}},{key:"getText",value:function(){return this.text_}},{key:"setText",value:function(e){this.text_=e}},{key:"getZIndex",value:function(){return this.zIndex_}},{key:"setGeometry",value:function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=h,this.geometry_=e}},{key:"setZIndex",value:function(e){this.zIndex_=e}}]),e}();function c(t){var n;if("function"==typeof t)n=t;else{var r;if(Array.isArray(t))r=t;else(0,e.assert)("function"==typeof t.getZIndex,41),r=[t];n=function(){return r}}return n}var d=null;function y(e,t){if(!d){var i=new r.default({color:"rgba(255,255,255,0.4)"}),u=new o.default({color:"#3399CC",width:1.25});d=[new s({image:new n.default({fill:i,stroke:u,radius:5}),fill:i,stroke:u})]}return d}function g(){var e={},i=[255,255,255,1],u=[0,153,255,1];return e[t.default.POLYGON]=[new s({fill:new r.default({color:[255,255,255,.5]})})],e[t.default.MULTI_POLYGON]=e[t.default.POLYGON],e[t.default.LINE_STRING]=[new s({stroke:new o.default({color:i,width:5})}),new s({stroke:new o.default({color:u,width:3})})],e[t.default.MULTI_LINE_STRING]=e[t.default.LINE_STRING],e[t.default.CIRCLE]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING]),e[t.default.POINT]=[new s({image:new n.default({radius:6,fill:new r.default({color:u}),stroke:new o.default({color:i,width:1.5})}),zIndex:1/0})],e[t.default.MULTI_POINT]=e[t.default.POINT],e[t.default.GEOMETRY_COLLECTION]=e[t.default.POLYGON].concat(e[t.default.LINE_STRING],e[t.default.POINT]),e}function h(e){return e.getGeometry()}var v=s;exports.default=v;
},{"../asserts.js":"d7gk","../geom/GeometryType.js":"mFnd","./Circle.js":"/MUl","./Fill.js":"Yzfm","./Stroke.js":"h5nh"}],"MkI6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./Layer.js")),t=require("../obj.js"),n=require("../style/Style.js");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d={RENDER_ORDER:"renderOrder"},p=function(r){function i(e){var n;u(this,i);var r=e||{},o=(0,t.assign)({},r);return delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,(n=a(this,f(i).call(this,o))).declutter_=void 0!==r.declutter&&r.declutter,n.renderBuffer_=void 0!==r.renderBuffer?r.renderBuffer:100,n.style_=null,n.styleFunction_=void 0,n.setStyle(r.style),n.updateWhileAnimating_=void 0!==r.updateWhileAnimating&&r.updateWhileAnimating,n.updateWhileInteracting_=void 0!==r.updateWhileInteracting&&r.updateWhileInteracting,n}return s(i,e.default),l(i,[{key:"getDeclutter",value:function(){return this.declutter_}},{key:"getRenderBuffer",value:function(){return this.renderBuffer_}},{key:"getRenderOrder",value:function(){return this.get(d.RENDER_ORDER)}},{key:"getStyle",value:function(){return this.style_}},{key:"getStyleFunction",value:function(){return this.styleFunction_}},{key:"getUpdateWhileAnimating",value:function(){return this.updateWhileAnimating_}},{key:"getUpdateWhileInteracting",value:function(){return this.updateWhileInteracting_}},{key:"setRenderOrder",value:function(e){this.set(d.RENDER_ORDER,e)}},{key:"setStyle",value:function(e){this.style_=void 0!==e?e:n.createDefaultStyle,this.styleFunction_=null===e?void 0:(0,n.toFunction)(this.style_),this.changed()}}]),i}(),h=p;exports.default=h;
},{"./Layer.js":"7nok","../obj.js":"dV1Q","../style/Style.js":"TiiD"}],"BTt0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.closePathInstruction=exports.beginPathInstruction=exports.strokeInstruction=exports.fillInstruction=void 0;var t={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[t.FILL];exports.fillInstruction=r;var e=[t.STROKE];exports.strokeInstruction=e;var o=[t.BEGIN_PATH];exports.beginPathInstruction=o;var s=[t.CLOSE_PATH];exports.closePathInstruction=s;var E=t;exports.default=E;
},{}],"NPHT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../array.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),n=l(require("../../extent/Relationship.js")),r=l(require("../../geom/GeometryType.js")),o=require("../../geom/flat/inflate.js"),s=l(require("../VectorContext.js")),a=require("../canvas.js"),u=l(require("./Instruction.js"));function l(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t}function y(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?p(t):e}function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(l){function f(t,e,i,n){var r;return c(this,f),(r=y(this,v(f).call(this))).tolerance=t,r.maxExtent=e,r.pixelRatio=n,r.maxLineWidth=0,r.resolution=i,r.beginGeometryInstruction1_=null,r.beginGeometryInstruction2_=null,r.bufferedMaxExtent_=null,r.instructions=[],r.coordinates=[],r.tmpCoordinate_=[],r.hitDetectionInstructions=[],r.state={},r}return m(f,s.default),d(f,[{key:"applyPixelRatio",value:function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}},{key:"appendFlatCoordinates",value:function(t,e,r,o,s,a){var u=this.coordinates.length,l=this.getBufferedMaxExtent();a&&(e+=o);var f,c,h,d=t[e],y=t[e+1],p=this.tmpCoordinate_,v=!0;for(f=e+o;f<r;f+=o)p[0]=t[f],p[1]=t[f+1],(h=(0,i.coordinateRelationship)(l,p))!==c?(v&&(this.coordinates[u++]=d,this.coordinates[u++]=y),this.coordinates[u++]=p[0],this.coordinates[u++]=p[1],v=!1):h===n.default.INTERSECTING?(this.coordinates[u++]=p[0],this.coordinates[u++]=p[1],v=!1):v=!0,d=p[0],y=p[1],c=h;return(s&&v||f===e+o)&&(this.coordinates[u++]=d,this.coordinates[u++]=y),u}},{key:"drawCustomCoordinates_",value:function(t,e,i,n,r){for(var o=0,s=i.length;o<s;++o){var a=i[o],u=this.appendFlatCoordinates(t,e,a,n,!1,!1);r.push(u),e=a}return e}},{key:"drawCustom",value:function(t,e,i){this.beginGeometry(e);var n,s,a,l,f,c=t.getType(),h=t.getStride(),d=this.coordinates.length;if(c==r.default.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),l=[];var y=t.getEndss();f=0;for(var p=0,v=y.length;p<v;++p){var m=[];f=this.drawCustomCoordinates_(n,f,y[p],h,m),l.push(m)}this.instructions.push([u.default.CUSTOM,d,l,t,i,o.inflateMultiCoordinatesArray])}else c==r.default.POLYGON||c==r.default.MULTI_LINE_STRING?(a=[],n=c==r.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),f=this.drawCustomCoordinates_(n,0,t.getEnds(),h,a),this.instructions.push([u.default.CUSTOM,d,a,t,i,o.inflateCoordinatesArray])):c==r.default.LINE_STRING||c==r.default.MULTI_POINT?(n=t.getFlatCoordinates(),s=this.appendFlatCoordinates(n,0,n.length,h,!1,!1),this.instructions.push([u.default.CUSTOM,d,s,t,i,o.inflateCoordinates])):c==r.default.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),s=this.coordinates.length,this.instructions.push([u.default.CUSTOM,d,s,t,i]));this.endGeometry(e)}},{key:"beginGeometry",value:function(t){this.beginGeometryInstruction1_=[u.default.BEGIN_GEOMETRY,t,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[u.default.BEGIN_GEOMETRY,t,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}},{key:"finish",value:function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}},{key:"reverseHitDetectionInstructions",value:function(){var e,i=this.hitDetectionInstructions;i.reverse();var n,r,o=i.length,s=-1;for(e=0;e<o;++e)(r=(n=i[e])[0])==u.default.END_GEOMETRY?s=e:r==u.default.BEGIN_GEOMETRY&&(n[2]=e,(0,t.reverseSubArray)(this.hitDetectionInstructions,s,e),s=-1)}},{key:"setFillStrokeStyle",value:function(t,i){var n=this.state;if(t){var r=t.getColor();n.fillStyle=(0,e.asColorLike)(r||a.defaultFillStyle)}else n.fillStyle=void 0;if(i){var o=i.getColor();n.strokeStyle=(0,e.asColorLike)(o||a.defaultStrokeStyle);var s=i.getLineCap();n.lineCap=void 0!==s?s:a.defaultLineCap;var u=i.getLineDash();n.lineDash=u?u.slice():a.defaultLineDash;var l=i.getLineDashOffset();n.lineDashOffset=l||a.defaultLineDashOffset;var f=i.getLineJoin();n.lineJoin=void 0!==f?f:a.defaultLineJoin;var c=i.getWidth();n.lineWidth=void 0!==c?c:a.defaultLineWidth;var h=i.getMiterLimit();n.miterLimit=void 0!==h?h:a.defaultMiterLimit,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}},{key:"createFill",value:function(t){var e=t.fillStyle,i=[u.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}},{key:"applyStroke",value:function(t){this.instructions.push(this.createStroke(t))}},{key:"createStroke",value:function(t){return[u.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}},{key:"updateFillStyle",value:function(t,e){var i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}},{key:"updateStrokeStyle",value:function(e,i){var n=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,u=e.lineWidth,l=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||o!=e.currentLineDash&&!(0,t.equals)(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=u||e.currentMiterLimit!=l)&&(void 0!==n&&i.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=u,e.currentMiterLimit=l)}},{key:"endGeometry",value:function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[u.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}},{key:"getBufferedMaxExtent",value:function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,i.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;(0,i.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}]),f}(),L=_;exports.default=L;
},{"../../array.js":"YQ1M","../../colorlike.js":"u4Pe","../../extent.js":"+QKI","../../extent/Relationship.js":"cCLw","../../geom/GeometryType.js":"mFnd","../../geom/flat/inflate.js":"qHzx","../VectorContext.js":"Hw/X","../canvas.js":"2eJG","./Instruction.js":"BTt0"}],"S4cs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Instruction.js")),i=e(require("./Builder.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function r(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function h(t,i,e){return i&&r(t.prototype,i),e&&r(t,e),t}function s(t,i){return!i||"object"!==o(i)&&"function"!=typeof i?a(t):i}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,i,e){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var o=u(t,i);if(o){var n=Object.getOwnPropertyDescriptor(o,i);return n.get?n.get.call(e):n.value}})(t,i,e||t)}function u(t,i){for(;!Object.prototype.hasOwnProperty.call(t,i)&&null!==(t=_(t)););return t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&d(t,i)}function d(t,i){return(d=Object.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}var f=function(e){function o(t,i,e,r){var h;return n(this,o),(h=s(this,_(o).call(this,t,i,e,r))).declutterGroup_=null,h.hitDetectionImage_=null,h.image_=null,h.anchorX_=void 0,h.anchorY_=void 0,h.height_=void 0,h.opacity_=void 0,h.originX_=void 0,h.originY_=void 0,h.rotateWithView_=void 0,h.rotation_=void 0,h.scale_=void 0,h.width_=void 0,h}return l(o,i.default),h(o,[{key:"drawCoordinates_",value:function(t,i,e,o){return this.appendFlatCoordinates(t,i,e,o,!1,!1)}},{key:"drawPoint",value:function(i,e){if(this.image_){this.beginGeometry(e);var o=i.getFlatCoordinates(),n=i.getStride(),r=this.coordinates.length,h=this.drawCoordinates_(o,0,o.length,n);this.instructions.push([t.default.DRAW_IMAGE,r,h,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,r,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}}},{key:"drawMultiPoint",value:function(i,e){if(this.image_){this.beginGeometry(e);var o=i.getFlatCoordinates(),n=i.getStride(),r=this.coordinates.length,h=this.drawCoordinates_(o,0,o.length,n);this.instructions.push([t.default.DRAW_IMAGE,r,h,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([t.default.DRAW_IMAGE,r,h,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}}},{key:"finish",value:function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,c(_(o.prototype),"finish",this).call(this)}},{key:"setImageStyle",value:function(t,i){var e=t.getAnchor(),o=t.getSize(),n=t.getHitDetectionImage(1),r=t.getImage(1),h=t.getOrigin();this.anchorX_=e[0],this.anchorY_=e[1],this.declutterGroup_=i,this.hitDetectionImage_=n,this.image_=r,this.height_=o[1],this.opacity_=t.getOpacity(),this.originX_=h[0],this.originY_=h[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=o[0]}}]),o}(),g=f;exports.default=g;
},{"./Instruction.js":"BTt0","./Builder.js":"NPHT"}],"YAAJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Instruction.js")),e=n(require("./Builder.js"));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=f(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(n){function r(t,e,n,i){return o(this,r),l(this,h(r).call(this,t,e,n,i))}return p(r,e.default),u(r,[{key:"drawFlatCoordinates_",value:function(e,n,r,i){var o=this.coordinates.length,s=this.appendFlatCoordinates(e,n,r,i,!1,!1),u=[t.default.MOVE_TO_LINE_TO,o,s];return this.instructions.push(u),this.hitDetectionInstructions.push(u),r}},{key:"drawLineString",value:function(e,n){var r=this.state,i=r.strokeStyle,o=r.lineWidth;if(void 0!==i&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(n),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],t.beginPathInstruction);var s=e.getFlatCoordinates(),u=e.getStride();this.drawFlatCoordinates_(s,0,s.length,u),this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(n)}}},{key:"drawMultiLineString",value:function(e,n){var r=this.state,i=r.strokeStyle,o=r.lineWidth;if(void 0!==i&&void 0!==o){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(n),this.hitDetectionInstructions.push([t.default.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],t.beginPathInstruction);for(var s=e.getEnds(),u=e.getFlatCoordinates(),l=e.getStride(),a=0,c=0,f=s.length;c<f;++c)a=this.drawFlatCoordinates_(u,a,s[c],l);this.hitDetectionInstructions.push(t.strokeInstruction),this.endGeometry(n)}}},{key:"finish",value:function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(t.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,c(h(r.prototype),"finish",this).call(this)}},{key:"applyStroke",value:function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(t.strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,c(h(r.prototype),"applyStroke",this).call(this,e),this.instructions.push(t.beginPathInstruction)}}]),r}(),b=d;exports.default=b;
},{"./Instruction.js":"BTt0","./Builder.js":"NPHT"}],"yW78":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../../geom/flat/simplify.js"),e=require("../canvas.js"),i=r(require("./Instruction.js")),n=o(require("./Builder.js"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,e}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),t}function a(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?h(t):e}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,i){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=y(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}function S(t,e){return(S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(o){function r(t,e,i,n){return l(this,r),a(this,p(r).call(this,t,e,i,n))}return d(r,n.default),c(r,[{key:"drawFlatCoordinatess_",value:function(t,e,n,o){var r=this.state,s=void 0!==r.fillStyle,l=null!=r.strokeStyle,u=n.length;this.instructions.push(i.beginPathInstruction),this.hitDetectionInstructions.push(i.beginPathInstruction);for(var c=0;c<u;++c){var a=n[c],h=this.coordinates.length,f=this.appendFlatCoordinates(t,e,a,o,!0,!l),y=[i.default.MOVE_TO_LINE_TO,h,f];this.instructions.push(y),this.hitDetectionInstructions.push(y),l&&(this.instructions.push(i.closePathInstruction),this.hitDetectionInstructions.push(i.closePathInstruction)),e=a}return s&&(this.instructions.push(i.fillInstruction),this.hitDetectionInstructions.push(i.fillInstruction)),l&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),e}},{key:"drawCircle",value:function(t,n){var o=this.state,r=o.fillStyle,s=o.strokeStyle;if(void 0!==r||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var l=t.getFlatCoordinates(),u=t.getStride(),c=this.coordinates.length;this.appendFlatCoordinates(l,0,l.length,u,!1,!1);var a=[i.default.CIRCLE,c];this.instructions.push(i.beginPathInstruction,a),this.hitDetectionInstructions.push(i.beginPathInstruction,a),this.hitDetectionInstructions.push(i.fillInstruction),void 0!==o.fillStyle&&this.instructions.push(i.fillInstruction),void 0!==o.strokeStyle&&(this.instructions.push(i.strokeInstruction),this.hitDetectionInstructions.push(i.strokeInstruction)),this.endGeometry(n)}}},{key:"drawPolygon",value:function(t,n){var o=this.state,r=o.fillStyle,s=o.strokeStyle;if(void 0!==r||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);var l=t.getEnds(),u=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(u,0,l,c),this.endGeometry(n)}}},{key:"drawMultiPolygon",value:function(t,n){var o=this.state,r=o.fillStyle,s=o.strokeStyle;if(void 0!==r||void 0!==s){this.setFillStrokeStyles_(),this.beginGeometry(n),void 0!==o.fillStyle&&this.hitDetectionInstructions.push([i.default.SET_FILL_STYLE,e.defaultFillStyle]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([i.default.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset]);for(var l=t.getEndss(),u=t.getOrientedFlatCoordinates(),c=t.getStride(),a=0,h=0,f=l.length;h<f;++h)a=this.drawFlatCoordinatess_(u,a,l[h],c);this.endGeometry(n)}}},{key:"finish",value:function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var i=this.coordinates,n=0,o=i.length;n<o;++n)i[n]=(0,t.snap)(i[n],e);return f(p(r.prototype),"finish",this).call(this)}},{key:"setFillStrokeStyles_",value:function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}]),r}(),b=v;exports.default=b;
},{"../../geom/flat/simplify.js":"ITgx","../canvas.js":"2eJG","./Instruction.js":"BTt0","./Builder.js":"NPHT"}],"JfZX":[function(require,module,exports) {
"use strict";function t(t,e,r,o,a){var s,i,n,u,c,v,d,h,f,p=r,M=r,l=0,x=0,_=r;for(s=r;s<o;s+=a){var b=e[s],g=e[s+1];void 0!==u&&(h=b-u,f=g-c,n=Math.sqrt(h*h+f*f),void 0!==v&&(x+=i,Math.acos((v*h+d*f)/(i*n))>t&&(x>l&&(l=x,p=_,M=s),x=0,_=s-a)),i=n,v=h,d=f),u=b,c=g}return(x+=n)>l?[_,s]:[p,M]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.matchingChunk=t;
},{}],"uNAX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={POINT:"point",LINE:"line"};exports.default=e;
},{}],"ytLK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TEXT_ALIGN=void 0;var t=require("../../util.js"),e=require("../../colorlike.js"),i=require("../../extent.js"),l=require("../../geom/flat/straightchunk.js"),s=u(require("../../geom/GeometryType.js")),n=require("../canvas.js"),r=u(require("./Instruction.js")),a=u(require("./Builder.js")),o=u(require("../../style/TextPlacement.js"));function u(t){return t&&t.__esModule?t:{default:t}}function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var l=e[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,l.key,l)}}function d(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),t}function g(t,e){return!e||"object"!==f(e)&&"function"!=typeof e?_(t):e}function _(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t,e,i){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var l=p(t,e);if(l){var s=Object.getOwnPropertyDescriptor(l,e);return s.get?s.get.call(i):s.value}})(t,e,i||t)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=S(t)););return t}function S(t){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v={};exports.TEXT_ALIGN=v,v.left=0,v.end=0,v.center=.5,v.right=1,v.start=1,v.top=0,v.middle=.5,v.hanging=.2,v.alphabetic=.8,v.ideographic=.8,v.bottom=1;var b=function(u){function f(t,e,i,l){var s;return h(this,f),(s=g(this,S(f).call(this,t,e,i,l))).declutterGroup_,s.labels_=null,s.text_="",s.textOffsetX_=0,s.textOffsetY_=0,s.textRotateWithView_=void 0,s.textRotation_=0,s.textFillState_=null,s.fillStates={},s.textStrokeState_=null,s.strokeStates={},s.textState_={},s.textStates={},s.textKey_="",s.fillKey_="",s.strokeKey_="",n.labelCache.prune(),s}return y(f,a.default),d(f,[{key:"finish",value:function(){var t=x(S(f.prototype),"finish",this).call(this);return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}},{key:"drawText",value:function(t,e){var a=this.textFillState_,u=this.textStrokeState_,f=this.textState_;if(""!==this.text_&&f&&(a||u)){var h,c,d=this.coordinates.length,g=t.getType(),_=null,x=2,p=2;if(f.placement===o.default.LINE){if(!(0,i.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var S;if(_=t.getFlatCoordinates(),p=t.getStride(),g==s.default.LINE_STRING)S=[_.length];else if(g==s.default.MULTI_LINE_STRING)S=t.getEnds();else if(g==s.default.POLYGON)S=t.getEnds().slice(0,1);else if(g==s.default.MULTI_POLYGON){var y=t.getEndss();for(S=[],h=0,c=y.length;h<c;++h)S.push(y[h][0])}this.beginGeometry(e);for(var k,v=f.textAlign,b=0,O=0,m=S.length;O<m;++O){if(null==v){var L=(0,l.matchingChunk)(f.maxAngle,_,b,S[O],p);b=L[0],k=L[1]}else k=S[O];for(h=b;h<k;h+=p)this.coordinates.push(_[h],_[h+1]);x=this.coordinates.length,b=S[O],this.drawChars_(d,x,this.declutterGroup_),d=x}this.endGeometry(e)}else{var N=null;switch(f.overflow||(N=[]),g){case s.default.POINT:case s.default.MULTI_POINT:x=(_=t.getFlatCoordinates()).length;break;case s.default.LINE_STRING:_=t.getFlatMidpoint();break;case s.default.CIRCLE:_=t.getCenter();break;case s.default.MULTI_LINE_STRING:x=(_=t.getFlatMidpoints()).length;break;case s.default.POLYGON:_=t.getFlatInteriorPoint(),f.overflow||N.push(_[2]/this.resolution),p=3;break;case s.default.MULTI_POLYGON:var T=t.getFlatInteriorPoints();for(_=[],h=0,c=T.length;h<c;h+=3)f.overflow||N.push(T[h+2]/this.resolution),_.push(T[h],T[h+1]);if(0==(x=_.length))return}x=this.appendFlatCoordinates(_,0,x,p,!1,!1),this.saveTextStates_(),(f.backgroundFill||f.backgroundStroke)&&(this.setFillStrokeStyle(f.backgroundFill,f.backgroundStroke),f.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),f.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e);var F=this.pixelRatio;this.instructions.push([r.default.DRAW_IMAGE,d,x,null,NaN,NaN,this.declutterGroup_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,f.padding==n.defaultPadding?n.defaultPadding:f.padding.map(function(t){return t*F}),!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,N]),this.hitDetectionInstructions.push([r.default.DRAW_IMAGE,d,x,null,NaN,NaN,this.declutterGroup_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,f.padding,!!f.backgroundFill,!!f.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,N]),this.endGeometry(e)}}}},{key:"saveTextStates_",value:function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,l=this.strokeKey_;t&&(l in this.strokeStates||(this.strokeStates[l]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||n.defaultTextAlign,textBaseline:e.textBaseline||n.defaultTextBaseline,scale:e.scale});var r=this.fillKey_;i&&(r in this.fillStates||(this.fillStates[r]={fillStyle:i.fillStyle}))}},{key:"drawChars_",value:function(t,e,i){var l=this.textStrokeState_,s=this.textState_,n=this.strokeKey_,a=this.textKey_,o=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,f=v[s.textBaseline],h=this.textOffsetY_*u,c=this.text_,d=s.scale,g=l?l.lineWidth*d/2:0;this.instructions.push([r.default.DRAW_CHARS,t,e,f,i,s.overflow,o,s.maxAngle,u,h,n,g*u,c,a,1]),this.hitDetectionInstructions.push([r.default.DRAW_CHARS,t,e,f,i,s.overflow,o,s.maxAngle,1,h,n,g,c,a,1/u])}},{key:"setTextStyle",value:function(i,l){var s,r,a;if(i){this.declutterGroup_=l;var o=i.getFill();o?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=(0,e.asColorLike)(o.getColor()||n.defaultFillStyle)):r=this.textFillState_=null;var u=i.getStroke();if(u){(a=this.textStrokeState_)||(a=this.textStrokeState_={});var f=u.getLineDash(),h=u.getLineDashOffset(),c=u.getWidth(),d=u.getMiterLimit();a.lineCap=u.getLineCap()||n.defaultLineCap,a.lineDash=f?f.slice():n.defaultLineDash,a.lineDashOffset=void 0===h?n.defaultLineDashOffset:h,a.lineJoin=u.getLineJoin()||n.defaultLineJoin,a.lineWidth=void 0===c?n.defaultLineWidth:c,a.miterLimit=void 0===d?n.defaultMiterLimit:d,a.strokeStyle=(0,e.asColorLike)(u.getColor()||n.defaultStrokeStyle)}else a=this.textStrokeState_=null;s=this.textState_;var g=i.getFont()||n.defaultFont;(0,n.checkFont)(g);var _=i.getScale();s.overflow=i.getOverflow(),s.font=g,s.maxAngle=i.getMaxAngle(),s.placement=i.getPlacement(),s.textAlign=i.getTextAlign(),s.textBaseline=i.getTextBaseline()||n.defaultTextBaseline,s.backgroundFill=i.getBackgroundFill(),s.backgroundStroke=i.getBackgroundStroke(),s.padding=i.getPadding()||n.defaultPadding,s.scale=void 0===_?1:_;var x=i.getOffsetX(),p=i.getOffsetY(),S=i.getRotateWithView(),y=i.getRotation();this.text_=i.getText()||"",this.textOffsetX_=void 0===x?0:x,this.textOffsetY_=void 0===p?0:p,this.textRotateWithView_=void 0!==S&&S,this.textRotation_=void 0===y?0:y,this.strokeKey_=a?("string"==typeof a.strokeStyle?a.strokeStyle:(0,t.getUid)(a.strokeStyle))+a.lineCap+a.lineDashOffset+"|"+a.lineWidth+a.lineJoin+a.miterLimit+"["+a.lineDash.join()+"]":"",this.textKey_=s.font+s.scale+(s.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,t.getUid)(r.fillStyle):""}else this.text_=""}}]),f}(),O=b;exports.default=O;
},{"../../util.js":"MHZC","../../colorlike.js":"u4Pe","../../extent.js":"+QKI","../../geom/flat/straightchunk.js":"JfZX","../../geom/GeometryType.js":"mFnd","../canvas.js":"2eJG","./Instruction.js":"BTt0","./Builder.js":"NPHT","../../style/TextPlacement.js":"uNAX"}],"3QMm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=l(require("./Builder.js")),r=l(require("./ImageBuilder.js")),i=l(require("./LineStringBuilder.js")),u=l(require("./PolygonBuilder.js")),n=l(require("./TextBuilder.js"));function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var d={Circle:u.default,Default:t.default,Image:r.default,LineString:i.default,Polygon:u.default,Text:n.default},f=function(){function t(e,r,i,u,n){a(this,t),this.declutter_=n,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=r,this.pixelRatio_=u,this.resolution_=i,this.buildersByZIndex_={}}return s(t,[{key:"addDeclutter",value:function(t){var r=null;return this.declutter_&&(t?(r=this.declutterGroup_)[4]++:(r=this.declutterGroup_=(0,e.createEmpty)()).push(1)),r}},{key:"finish",value:function(){var e={};for(var t in this.buildersByZIndex_){e[t]=e[t]||{};var r=this.buildersByZIndex_[t];for(var i in r){var u=r[i].finish();e[t][i]=u}}return e}},{key:"getBuilder",value:function(e,t){var r=void 0!==e?e.toString():"0",i=this.buildersByZIndex_[r];void 0===i&&(i={},this.buildersByZIndex_[r]=i);var u=i[t];void 0===u&&(u=new(0,d[t])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[t]=u);return u}}]),t}(),c=f;exports.default=c;
},{"../../extent.js":"+QKI","./Builder.js":"NPHT","./ImageBuilder.js":"S4cs","./LineStringBuilder.js":"YAAJ","./PolygonBuilder.js":"yW78","./TextBuilder.js":"ytLK"}],"zlJk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"};exports.default=e;
},{}],"O+NG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawTextOnPath=a;var t=require("../../math.js");function a(a,r,e,h,M,o,n,p,s,u,v){for(var P,i,l=[],f=a[r]>a[e-h],I=M.length,w=a[r],d=a[r+1],c=a[r+=h],q=a[r+1],x=0,b=Math.sqrt(Math.pow(c-w,2)+Math.pow(q-d,2)),j=!1,O=0;O<I;++O){for(var _=M[P=f?I-O-1:O],g=p*s(u,_,v),m=o+g/2;r<e-h&&x+b<m;)w=c,d=q,c=a[r+=h],q=a[r+1],x+=b,b=Math.sqrt(Math.pow(c-w,2)+Math.pow(q-d,2));var y=m-x,T=Math.atan2(q-d,c-w);if(f&&(T+=T>0?-Math.PI:Math.PI),void 0!==i){var k=T-i;if(j=j||0!==k,k+=k>Math.PI?-2*Math.PI:k<-Math.PI?2*Math.PI:0,Math.abs(k)>n)return null}i=T;var z=y/b,A=(0,t.lerp)(w,c,z),B=(0,t.lerp)(d,q,z);l[P]=[A,B,g/2,T,_],o+=g}return j?l:[[l[0][0],l[0][1],l[0][2],l[0][3],M]]}
},{"../../math.js":"t/nT"}],"XGea":[function(require,module,exports) {
var define;
var t;!function(i,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(i=i||self).RBush=n()}(this,function(){"use strict";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1);t(n,r,Math.max(e,Math.floor(r-s*f/o+u)),Math.min(a,Math.floor(r+(o-s)*f/o+u)),h)}var m=n[r],c=e,p=a;for(i(n,e,r),h(n[a],m)>0&&i(n,e,a);c<p;){for(i(n,c,p),c++,p--;h(n[c],m)<0;)c++;for(;h(n[p],m)>0;)p--}0===h(n[e],m)?i(n,e,p):i(n,++p,a),p<=r&&(e=p+1),r<=p&&(a=p-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,void 0,void 0,void 0,void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});
},{}],"AKUG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=require("../../array.js"),i=require("../../extent.js"),a=require("../../geom/flat/length.js"),r=require("../../geom/flat/textpath.js"),n=require("../../geom/flat/transform.js"),l=require("../../obj.js"),o=require("../canvas.js"),s=p(require("./Instruction.js")),h=require("./TextBuilder.js"),u=require("../../transform.js"),c=require("../../dom.js"),f=p(require("../../Disposable.js")),d=p(require("rbush"));function p(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),e}function m(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,i){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=b(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=(0,i.createEmpty)(),O=(0,u.create)(),E=[],R=[],C=[],j=[],A=function(p){function v(e,t,i,a){var r;return g(this,v),(r=m(this,k(v).call(this))).overlaps=i,r.pixelRatio=t,r.resolution=e,r.alignFill_,r.declutterItems=[],r.instructions=a.instructions,r.coordinates=a.coordinates,r.coordinateCache_={},r.renderedTransform_=(0,u.create)(),r.hitDetectionInstructions=a.hitDetectionInstructions,r.pixelCoordinates_=null,r.viewRotation_=0,r.fillStates=a.fillStates||{},r.strokeStates=a.strokeStates||{},r.textStates=a.textStates||{},r.widths_={},r}return S(v,f.default),_(v,[{key:"disposeInternal",value:function(){o.labelCache.release(this),T(k(v.prototype),"disposeInternal",this).call(this)}},{key:"getTextImage",value:function(e,t,i,a){var r,n=a+t+e+i+this.pixelRatio;if(!o.labelCache.containsKey(n)){var l=a?this.strokeStates[a]:null,s=i?this.fillStates[i]:null,u=this.textStates[t],f=this.pixelRatio,d=u.scale*f,p=h.TEXT_ALIGN[u.textAlign||o.defaultTextAlign],v=a&&l.lineWidth?l.lineWidth:0,g=e.split("\n"),y=g.length,_=[],m=(0,o.measureTextWidths)(u.font,g,_),x=(0,o.measureTextHeight)(u.font),T=x*y,b=m+v,k=(0,c.createCanvasContext2D)(Math.ceil((b+2)*d),Math.ceil((T+v)*d));r=k.canvas,o.labelCache.set(n,r),1!=d&&k.scale(d,d),k.font=u.font,a&&(k.strokeStyle=l.strokeStyle,k.lineWidth=v,k.lineCap=l.lineCap,k.lineJoin=l.lineJoin,k.miterLimit=l.miterLimit,k.setLineDash&&l.lineDash.length&&(k.setLineDash(l.lineDash),k.lineDashOffset=l.lineDashOffset)),i&&(k.fillStyle=s.fillStyle),k.textBaseline="middle",k.textAlign="center";var S,I=.5-p,w=p*b+I*v;if(a)for(S=0;S<y;++S)k.strokeText(g[S],w+I*_[S],.5*(v+x)+S*x);if(i)for(S=0;S<y;++S)k.fillText(g[S],w+I*_[S],.5*(v+x)+S*x)}return o.labelCache.get(n,this)}},{key:"replayTextBackground_",value:function(e,t,i,a,r,n,l){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,i),e.lineTo.apply(e,a),e.lineTo.apply(e,r),e.lineTo.apply(e,t),n&&(this.alignFill_=n[2],this.fill_(e)),l&&(this.setStrokeStyle_(e,l),e.stroke())}},{key:"replayImage_",value:function(e,t,a,r,n,l,s,h,c,f,d,p,v,g,y,_,m,x){var T=m||x;t-=n*=v,a-=l*=v;var b=y+f>r.width?r.width-f:y,k=h+d>r.height?r.height-d:h,S=_[3]+b*v+_[1],I=_[0]+k*v+_[2],A=t-_[3],P=a-_[0];(T||0!==p)&&(E[0]=j[0]=A,E[1]=R[1]=P,R[0]=C[0]=A+S,C[1]=j[1]=P+I);var D=null;if(0!==p){var L=t+n,M=a+l;D=(0,u.compose)(O,L,M,1,1,p,-L,-M),(0,u.apply)(O,E),(0,u.apply)(O,R),(0,u.apply)(O,C),(0,u.apply)(O,j),(0,i.createOrUpdate)(Math.min(E[0],R[0],C[0],j[0]),Math.min(E[1],R[1],C[1],j[1]),Math.max(E[0],R[0],C[0],j[0]),Math.max(E[1],R[1],C[1],j[1]),w)}else(0,i.createOrUpdate)(A,P,A+S,P+I,w);var q=e.canvas,W=x?x[2]*v/2:0,G=w[0]-W<=q.width&&w[2]+W>=0&&w[1]-W<=q.height&&w[3]+W>=0;if(g&&(t=Math.round(t),a=Math.round(a)),s){if(!G&&1==s[4])return;(0,i.extend)(s,w);var N=G?[e,D?D.slice(0):null,c,r,f,d,b,k,t,a,v]:null;N&&(T&&N.push(m,x,E,R,C,j),s.push(N))}else G&&(T&&this.replayTextBackground_(e,E,R,C,j,m,x),(0,o.drawImage)(e,D,c,r,f,d,b,k,t,a,v))}},{key:"fill_",value:function(e){if(this.alignFill_){var t=(0,u.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(t[0]%i,t[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}},{key:"setStrokeStyle_",value:function(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.setLineDash&&(e.lineDashOffset=t[7],e.setLineDash(t[6]))}},{key:"renderDeclutter",value:function(e,t,a,r){if(e&&e.length>5){var n=e[4];if(1==n||n==e.length-5){var l={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};if(r||(r=new d.default(9)),!r.collides(l)){r.insert(l);for(var s=5,h=e.length;s<h;++s){var u=e[s],c=u[0],f=c.globalAlpha;f!==a&&(c.globalAlpha=a),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),o.drawImage.apply(void 0,u),f!==a&&(c.globalAlpha=f)}}e.length=5,(0,i.createOrUpdateEmpty)(e)}}return r}},{key:"drawTextImageWithPointPlacement_",value:function(e,t,i,a){var r=this.textStates[t],n=this.getTextImage(e,t,a,i),l=this.strokeStates[i],s=this.pixelRatio,u=h.TEXT_ALIGN[r.textAlign||o.defaultTextAlign],c=h.TEXT_ALIGN[r.textBaseline||o.defaultTextBaseline],f=l&&l.lineWidth?l.lineWidth:0;return{label:n,anchorX:u*(n.width/s-2*r.scale)+2*(.5-u)*f,anchorY:c*n.height/s+2*(.5-c)*f}}},{key:"execute_",value:function(c,f,d,p,v,g,y){var _;this.declutterItems.length=0,this.pixelCoordinates_&&(0,t.equals)(f,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=(0,n.transform2D)(this.coordinates,0,this.coordinates.length,2,f,this.pixelCoordinates_),(0,u.setFromArray)(this.renderedTransform_,f));for(var m,x,T,b,k,S,I,w,O,E,R,C,j,A,P,D,L=!(0,l.isEmpty)(d),M=0,q=p.length,W=0,G=0,N=0,B=null,F=null,X=this.coordinateCache_,Y=this.viewRotation_,H={context:c,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Y},U=this.instructions!=p||this.overlaps?0:200;M<q;){var J=p[M];switch(J[0]){case s.default.BEGIN_GEOMETRY:A=J[1],L&&d[(0,e.getUid)(A)]||!A.getGeometry()?M=J[2]:void 0===y||(0,i.intersects)(y,A.getGeometry().getExtent())?++M:M=J[2]+1;break;case s.default.BEGIN_PATH:G>U&&(this.fill_(c),G=0),N>U&&(c.stroke(),N=0),G||N||(c.beginPath(),b=k=NaN),++M;break;case s.default.CIRCLE:var K=_[W=J[1]],V=_[W+1],z=_[W+2]-K,Q=_[W+3]-V,Z=Math.sqrt(z*z+Q*Q);c.moveTo(K+Z,V),c.arc(K,V,Z,0,2*Math.PI,!0),++M;break;case s.default.CLOSE_PATH:c.closePath(),++M;break;case s.default.CUSTOM:W=J[1],m=J[2];var $=J[3],ee=J[4],te=6==J.length?J[5]:void 0;H.geometry=$,H.feature=A,M in X||(X[M]=[]);var ie=X[M];te?te(_,W,m,2,ie):(ie[0]=_[W],ie[1]=_[W+1],ie.length=2),ee(ie,H),++M;break;case s.default.DRAW_IMAGE:W=J[1],m=J[2],O=J[3],x=J[4],T=J[5],w=g?null:J[6];var ae=J[7],re=J[8],ne=J[9],le=J[10],oe=J[11],se=J[12],he=J[13],ue=J[14];if(!O&&J.length>=19){E=J[18],R=J[19],C=J[20],j=J[21];var ce=this.drawTextImageWithPointPlacement_(E,R,C,j);O=J[3]=ce.label;var fe=J[22];x=J[4]=(ce.anchorX-fe)*this.pixelRatio;var de=J[23];T=J[5]=(ce.anchorY-de)*this.pixelRatio,ae=J[7]=O.height,ue=J[14]=O.width}var pe=void 0;J.length>24&&(pe=J[24]);var ve=void 0,ge=void 0,ye=void 0;J.length>16?(ve=J[15],ge=J[16],ye=J[17]):(ve=o.defaultPadding,ge=ye=!1),oe&&(se+=Y);for(var _e=0;W<m;W+=2)pe&&pe[_e++]<ue/this.pixelRatio||this.replayImage_(c,_[W],_[W+1],O,x,T,w,ae,re,ne,le,se,he,v,ue,ve,ge?B:null,ye?F:null);this.declutterItems.push(this,w,A),++M;break;case s.default.DRAW_CHARS:var me=J[1],xe=J[2],Te=J[3];w=g?null:J[4];var be=J[5];j=J[6];var ke=J[7],Se=J[8],Ie=J[9];C=J[10];var we=J[11];E=J[12],R=J[13];var Oe=J[14],Ee=this.textStates[R],Re=Ee.font,Ce=Ee.scale*Se,je=void 0;je=Re in this.widths_?this.widths_[Re]:this.widths_[Re]={};var Ae=(0,a.lineStringLength)(_,me,xe,2),Pe=Ce*(0,o.measureAndCacheTextWidth)(Re,E,je);if(be||Pe<=Ae){var De=this.textStates[R].textAlign,Le=(Ae-Pe)*h.TEXT_ALIGN[De],Me=(0,r.drawTextOnPath)(_,me,xe,2,E,Le,ke,Ce,o.measureAndCacheTextWidth,Re,je);if(Me){var qe=void 0,We=void 0,Ge=void 0,Ne=void 0,Be=void 0;if(C)for(qe=0,We=Me.length;qe<We;++qe)Ge=(Be=Me[qe])[4],Ne=this.getTextImage(Ge,R,"",C),x=Be[2]+we,T=Te*Ne.height+2*(.5-Te)*we-Ie,this.replayImage_(c,Be[0],Be[1],Ne,x,T,w,Ne.height,1,0,0,Be[3],Oe,!1,Ne.width,o.defaultPadding,null,null);if(j)for(qe=0,We=Me.length;qe<We;++qe)Ge=(Be=Me[qe])[4],Ne=this.getTextImage(Ge,R,j,""),x=Be[2],T=Te*Ne.height-Ie,this.replayImage_(c,Be[0],Be[1],Ne,x,T,w,Ne.height,1,0,0,Be[3],Oe,!1,Ne.width,o.defaultPadding,null,null)}}this.declutterItems.push(this,w,A),++M;break;case s.default.END_GEOMETRY:if(void 0!==g){var Fe=g(A=J[1]);if(Fe)return Fe}++M;break;case s.default.FILL:U?G++:this.fill_(c),++M;break;case s.default.MOVE_TO_LINE_TO:for(W=J[1],m=J[2],P=_[W],I=(D=_[W+1])+.5|0,(S=P+.5|0)===b&&I===k||(c.moveTo(P,D),b=S,k=I),W+=2;W<m;W+=2)S=(P=_[W])+.5|0,I=(D=_[W+1])+.5|0,W!=m-2&&S===b&&I===k||(c.lineTo(P,D),b=S,k=I);++M;break;case s.default.SET_FILL_STYLE:B=J,this.alignFill_=J[2],G&&(this.fill_(c),G=0,N&&(c.stroke(),N=0)),c.fillStyle=J[1],++M;break;case s.default.SET_STROKE_STYLE:F=J,N&&(c.stroke(),N=0),this.setStrokeStyle_(c,J),++M;break;case s.default.STROKE:U?N++:c.stroke(),++M;break;default:++M}}G&&this.fill_(c),N&&c.stroke()}},{key:"execute",value:function(e,t,i,a,r){this.viewRotation_=i,this.execute_(e,t,a,this.instructions,r,void 0,void 0)}},{key:"executeHitDetection",value:function(e,t,i,a,r,n){return this.viewRotation_=i,this.execute_(e,t,a,this.hitDetectionInstructions,!0,r,n)}}]),v}(),P=A;exports.default=P;
},{"../../util.js":"MHZC","../../array.js":"YQ1M","../../extent.js":"+QKI","../../geom/flat/length.js":"IFNQ","../../geom/flat/textpath.js":"O+NG","../../geom/flat/transform.js":"K8GA","../../obj.js":"dV1Q","../canvas.js":"2eJG","./Instruction.js":"BTt0","./TextBuilder.js":"ytLK","../../transform.js":"eGRU","../../dom.js":"4KLO","../../Disposable.js":"1A8/","rbush":"XGea"}],"5kR9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getCircleArray=C,exports.replayDeclutter=O,exports.default=void 0;var e=require("../../array.js"),t=require("../../dom.js"),r=require("../../extent.js"),n=require("../../geom/flat/transform.js"),o=require("../../obj.js"),i=c(require("./BuilderType.js")),a=require("../../transform.js"),u=c(require("./Executor.js")),s=c(require("../../Disposable.js"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),e}function p(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=x(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=[i.default.POLYGON,i.default.CIRCLE,i.default.LINE_STRING,i.default.IMAGE,i.default.TEXT,i.default.DEFAULT],E=function(c){function f(e,t,r,n,o,i){var u;return l(this,f),(u=p(this,_(f).call(this))).maxExtent_=e,u.overlaps_=n,u.pixelRatio_=r,u.resolution_=t,u.renderBuffer_=i,u.executorsByZIndex_={},u.hitDetectionContext_=null,u.hitDetectionTransform_=(0,a.create)(),u.createExecutors_(o),u}return m(f,s.default),h(f,[{key:"clip",value:function(e,t){var r=this.getClipCoords(t);e.beginPath(),e.moveTo(r[0],r[1]),e.lineTo(r[2],r[3]),e.lineTo(r[4],r[5]),e.lineTo(r[6],r[7]),e.clip()}},{key:"createExecutors_",value:function(e){for(var t in e){var r=this.executorsByZIndex_[t];void 0===r&&(this.executorsByZIndex_[t]=r={});var n=e[t];for(var o in n){var i=n[o];r[o]=new u.default(this.resolution_,this.pixelRatio_,this.overlaps_,i)}}}},{key:"disposeInternal",value:function(){for(var e in this.executorsByZIndex_){var t=this.executorsByZIndex_[e];for(var r in t)t[r].disposeInternal()}if(this.hitDetectionContext_){var n=this.hitDetectionContext_.canvas;n.width=n.height=0}y(_(f.prototype),"disposeInternal",this).call(this)}},{key:"hasExecutors",value:function(e){for(var t in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[t],n=0,o=e.length;n<o;++n)if(e[n]in r)return!0;return!1}},{key:"forEachFeatureAtCoordinate",value:function(n,o,u,s,c,f,l){var v=2*(s=Math.round(s))+1,h=(0,a.compose)(this.hitDetectionTransform_,s+.5,s+.5,1/o,-1/o,-u,-n[0],-n[1]);this.hitDetectionContext_||(this.hitDetectionContext_=(0,t.createCanvasContext2D)(v,v));var p,d=this.hitDetectionContext_;d.canvas.width!==v||d.canvas.height!==v?(d.canvas.width=v,d.canvas.height=v):d.clearRect(0,0,v,v),void 0!==this.renderBuffer_&&(p=(0,r.createEmpty)(),(0,r.extendCoordinate)(p,n),(0,r.buffer)(p,o*(this.renderBuffer_+s),p));var y,x=C(s);function _(e){for(var t=d.getImageData(0,0,v,v).data,r=0;r<v;r++)for(var n=0;n<v;n++)if(x[r][n]&&t[4*(n*v+r)+3]>0){var o=void 0;return(!l||y!=i.default.IMAGE&&y!=i.default.TEXT||-1!==l.indexOf(e))&&(o=f(e)),o||void d.clearRect(0,0,v,v)}}var m,b,E,j,I,O=Object.keys(this.executorsByZIndex_).map(Number);for(O.sort(e.numberSafeCompareFunction),m=O.length-1;m>=0;--m){var T=O[m].toString();for(E=this.executorsByZIndex_[T],b=g.length-1;b>=0;--b)if(void 0!==(j=E[y=g[b]])&&(I=j.executeHitDetection(d,h,u,c,_,p)))return I}}},{key:"getClipCoords",value:function(e){var t=this.maxExtent_;if(!t)return null;var r=t[0],o=t[1],i=t[2],a=t[3],u=[r,o,r,a,i,a,i,o];return(0,n.transform2D)(u,0,8,2,e,u),u}},{key:"isEmpty",value:function(){return(0,o.isEmpty)(this.executorsByZIndex_)}},{key:"execute",value:function(t,r,n,o,a,u,s){var c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(e.numberSafeCompareFunction),this.maxExtent_&&(t.save(),this.clip(t,r));var f,l,v,h,p,d,y=u||g;for(f=0,l=c.length;f<l;++f){var x=c[f].toString();for(p=this.executorsByZIndex_[x],v=0,h=y.length;v<h;++v){var _=y[v];if(void 0!==(d=p[_]))if(!s||_!=i.default.IMAGE&&_!=i.default.TEXT)d.execute(t,r,n,o,a);else{var m=s[x];m?m.push(d,r.slice(0)):s[x]=[d,r.slice(0)]}}}this.maxExtent_&&t.restore()}}]),f}(),j={0:[[!0]]};function I(e,t,r){var n,o=Math.floor(e.length/2);if(t>=o)for(n=o;n<t;n++)e[n][r]=!0;else if(t<o)for(n=t+1;n<o;n++)e[n][r]=!0}function C(e){if(void 0!==j[e])return j[e];for(var t=2*e+1,r=new Array(t),n=0;n<t;n++)r[n]=new Array(t);for(var o=e,i=0,a=0;o>=i;)I(r,e+o,e+i),I(r,e+i,e+o),I(r,e-i,e+o),I(r,e-o,e+i),I(r,e-o,e-i),I(r,e-i,e-o),I(r,e+i,e-o),I(r,e+o,e-i),2*((a+=1+2*++i)-o)+1>0&&(a+=1-2*(o-=1));return j[e]=r,r}function O(t,r,n,o,i,a){for(var u=Object.keys(t).map(Number).sort(e.numberSafeCompareFunction),s={},c=0,f=u.length;c<f;++c)for(var l=t[u[c].toString()],v=void 0,h=0,p=l.length;h<p;){var d=l[h++];d!==v&&(v=d,a.push({items:d.declutterItems,opacity:o}));var y=l[h++];d.execute(r,y,n,s,i)}}var T=E;exports.default=T;
},{"../../array.js":"YQ1M","../../dom.js":"4KLO","../../extent.js":"+QKI","../../geom/flat/transform.js":"K8GA","../../obj.js":"dV1Q","./BuilderType.js":"zlJk","../../transform.js":"eGRU","./Executor.js":"AKUG","../../Disposable.js":"1A8/"}],"ACNx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=u(require("../ImageState.js")),r=u(require("../Observable.js")),n=require("../events.js"),o=u(require("../events/EventType.js")),a=u(require("../source/State.js"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(u){function i(e){var t;return l(this,i),(t=s(this,y(i).call(this))).layer_=e,t}return b(i,r.default),c(i,[{key:"prepareFrame",value:function(t){return(0,e.abstract)()}},{key:"renderFrame",value:function(t,r){return(0,e.abstract)()}},{key:"loadedTileCallback",value:function(e,t,r){e[t]||(e[t]={}),e[t][r.tileCoord.toString()]=r}},{key:"createLoadedTileFinder",value:function(e,t,r){return function(n,o){var a=this.loadedTileCallback.bind(this,r,n);return e.forEachLoadedTile(t,n,o,a)}.bind(this)}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){}},{key:"getDataAtPixel",value:function(t,r,n){return(0,e.abstract)()}},{key:"getLayer",value:function(){return this.layer_}},{key:"handleFontsChanged",value:function(){}},{key:"handleImageChange_",value:function(e){e.target.getState()===t.default.LOADED&&this.renderIfReadyAndVisible()}},{key:"hasFeatureAtCoordinate",value:function(e,t){return!1}},{key:"loadImage",value:function(e){var r=e.getState();return r!=t.default.LOADED&&r!=t.default.ERROR&&(0,n.listen)(e,o.default.CHANGE,this.handleImageChange_,this),r==t.default.IDLE&&(e.load(),r=e.getState()),r==t.default.LOADED}},{key:"renderIfReadyAndVisible",value:function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==a.default.READY&&e.changed()}}]),i}(),v=h;exports.default=v;
},{"../util.js":"MHZC","../ImageState.js":"V49+","../Observable.js":"o8IP","../events.js":"sgxS","../events/EventType.js":"KZbn","../source/State.js":"FQoO"}],"uoa3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../extent.js"),t=require("../../dom.js"),n=s(require("../../render/Event.js")),r=s(require("../../render/EventType.js")),o=require("../../render/canvas.js"),a=s(require("../Layer.js")),i=require("../../transform.js");function s(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(s){function l(e){var t;return u(this,l),(t=p(this,y(l).call(this,e))).container=null,t.renderedResolution,t.tempTransform_=(0,i.create)(),t.pixelTransform_=(0,i.create)(),t.inversePixelTransform_=(0,i.create)(),t.context=null,t.containerReused=!1,t}return h(l,a.default),f(l,[{key:"useContainer",value:function(e,n,r){var o,a,s=this.getLayer().getClassName();if(e&&""===e.style.opacity&&e.className===s){var l=e.firstElementChild;l instanceof HTMLCanvasElement&&(a=l.getContext("2d"))}if(a&&a.canvas.style.transform===(0,i.toString)(n)?(this.container=e,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(o=document.createElement("div")).className=s;var u=o.style;u.position="absolute",u.width="100%",u.height="100%";var c=(a=(0,t.createCanvasContext2D)()).canvas;o.appendChild(c),(u=c.style).position="absolute",u.transformOrigin="top left",this.container=o,this.context=a}}},{key:"clip",value:function(t,n,r){var a=n.pixelRatio,s=n.size[0]*a/2,l=n.size[1]*a/2,u=n.viewState.rotation,c=(0,e.getTopLeft)(r),f=(0,e.getTopRight)(r),p=(0,e.getBottomRight)(r),d=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,c),(0,i.apply)(n.coordinateToPixelTransform,f),(0,i.apply)(n.coordinateToPixelTransform,p),(0,i.apply)(n.coordinateToPixelTransform,d),t.save(),(0,o.rotateAtOffset)(t,-u,s,l),t.beginPath(),t.moveTo(c[0]*a,c[1]*a),t.lineTo(f[0]*a,f[1]*a),t.lineTo(p[0]*a,p[1]*a),t.lineTo(d[0]*a,d[1]*a),t.clip(),(0,o.rotateAtOffset)(t,u,s,l)}},{key:"clipUnrotated",value:function(t,n,r){var o=(0,e.getTopLeft)(r),a=(0,e.getTopRight)(r),s=(0,e.getBottomRight)(r),l=(0,e.getBottomLeft)(r);(0,i.apply)(n.coordinateToPixelTransform,o),(0,i.apply)(n.coordinateToPixelTransform,a),(0,i.apply)(n.coordinateToPixelTransform,s),(0,i.apply)(n.coordinateToPixelTransform,l);var u=this.inversePixelTransform_;(0,i.apply)(u,o),(0,i.apply)(u,a),(0,i.apply)(u,s),(0,i.apply)(u,l),t.save(),t.beginPath(),t.moveTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(l[0]),Math.round(l[1])),t.clip()}},{key:"dispatchRenderEvent_",value:function(e,t,r){var o=this.getLayer();if(o.hasListener(e)){var a=new n.default(e,this.inversePixelTransform_,r,t,null);o.dispatchEvent(a)}}},{key:"preRender",value:function(e,t){this.dispatchRenderEvent_(r.default.PRERENDER,e,t)}},{key:"postRender",value:function(e,t){this.dispatchRenderEvent_(r.default.POSTRENDER,e,t)}},{key:"getRenderTransform",value:function(e,t,n,r){var o=e.viewState,a=t/2,s=n/2,l=e.pixelRatio/o.resolution,u=-l,c=-o.center[0]+r,f=-o.center[1];return(0,i.compose)(this.tempTransform_,a,s,l,u,-o.rotation,c,f)}},{key:"getDataAtPixel",value:function(e,t,n){var r,o=(0,i.apply)(this.inversePixelTransform_,e.slice()),a=this.context;try{r=a.getImageData(Math.round(o[0]),Math.round(o[1]),1,1).data}catch(s){return"SecurityError"===s.name?new Uint8Array:r}return 0===r[3]?null:r}}]),l}(),T=m;exports.default=T;
},{"../../extent.js":"+QKI","../../dom.js":"4KLO","../../render/Event.js":"eaW0","../../render/EventType.js":"X6Tz","../../render/canvas.js":"2eJG","../Layer.js":"ACNx","../../transform.js":"eGRU"}],"brOh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultOrder=u,exports.getSquaredTolerance=g,exports.getTolerance=n,exports.renderFeature=o;var e=require("../util.js"),t=l(require("../ImageState.js")),r=l(require("../geom/GeometryType.js")),a=l(require("../render/canvas/BuilderType.js"));function l(e){return e&&e.__esModule?e:{default:e}}var d=.5,i={Point:c,LineString:I,Polygon:m,MultiPoint:y,MultiLineString:s,MultiPolygon:S,GeometryCollection:v,Circle:f};function u(t,r){return parseInt((0,e.getUid)(t),10)-parseInt((0,e.getUid)(r),10)}function g(e,t){var r=n(e,t);return r*r}function n(e,t){return d*e/t}function f(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(d||i){var u=e.getBuilder(r.getZIndex(),a.default.CIRCLE);u.setFillStrokeStyle(d,i),u.drawCircle(t,l)}var g=r.getText();if(g){var n=e.getBuilder(r.getZIndex(),a.default.TEXT);n.setTextStyle(g,e.addDeclutter(!1)),n.drawText(t,l)}}function o(e,r,a,l,d,i){var u=!1,g=a.getImage();if(g){var n=g.getImageState();n==t.default.LOADED||n==t.default.ERROR?g.unlistenImageChange(d,i):(n==t.default.IDLE&&g.load(),n=g.getImageState(),g.listenImageChange(d,i),u=!0)}return T(e,r,a,l),u}function T(e,t,r,a){var l=r.getGeometryFunction()(t);if(l){var d=l.getSimplifiedGeometry(a);if(r.getRenderer())x(e,d,r,t);else(0,i[d.getType()])(e,d,r,t)}}function x(e,t,l,d){if(t.getType()!=r.default.GEOMETRY_COLLECTION)e.getBuilder(l.getZIndex(),a.default.DEFAULT).drawCustom(t,d,l.getRenderer());else for(var i=t.getGeometries(),u=0,g=i.length;u<g;++u)x(e,i[u],l,d)}function v(e,t,r,a){var l,d,u=t.getGeometriesArray();for(l=0,d=u.length;l<d;++l){(0,i[u[l].getType()])(e,u[l],r,a)}}function I(e,t,r,l){var d=r.getStroke();if(d){var i=e.getBuilder(r.getZIndex(),a.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawLineString(t,l)}var u=r.getText();if(u){var g=e.getBuilder(r.getZIndex(),a.default.TEXT);g.setTextStyle(u,e.addDeclutter(!1)),g.drawText(t,l)}}function s(e,t,r,l){var d=r.getStroke();if(d){var i=e.getBuilder(r.getZIndex(),a.default.LINE_STRING);i.setFillStrokeStyle(null,d),i.drawMultiLineString(t,l)}var u=r.getText();if(u){var g=e.getBuilder(r.getZIndex(),a.default.TEXT);g.setTextStyle(u,e.addDeclutter(!1)),g.drawText(t,l)}}function S(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(i||d){var u=e.getBuilder(r.getZIndex(),a.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawMultiPolygon(t,l)}var g=r.getText();if(g){var n=e.getBuilder(r.getZIndex(),a.default.TEXT);n.setTextStyle(g,e.addDeclutter(!1)),n.drawText(t,l)}}function c(e,r,l,d){var i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;var u=e.getBuilder(l.getZIndex(),a.default.IMAGE);u.setImageStyle(i,e.addDeclutter(!1)),u.drawPoint(r,d)}var g=l.getText();if(g){var n=e.getBuilder(l.getZIndex(),a.default.TEXT);n.setTextStyle(g,e.addDeclutter(!!i)),n.drawText(r,d)}}function y(e,r,l,d){var i=l.getImage();if(i){if(i.getImageState()!=t.default.LOADED)return;var u=e.getBuilder(l.getZIndex(),a.default.IMAGE);u.setImageStyle(i,e.addDeclutter(!1)),u.drawMultiPoint(r,d)}var g=l.getText();if(g){var n=e.getBuilder(l.getZIndex(),a.default.TEXT);n.setTextStyle(g,e.addDeclutter(!!i)),n.drawText(r,d)}}function m(e,t,r,l){var d=r.getFill(),i=r.getStroke();if(d||i){var u=e.getBuilder(r.getZIndex(),a.default.POLYGON);u.setFillStrokeStyle(d,i),u.drawPolygon(t,l)}var g=r.getText();if(g){var n=e.getBuilder(r.getZIndex(),a.default.TEXT);n.setTextStyle(g,e.addDeclutter(!1)),n.drawText(t,l)}}
},{"../util.js":"MHZC","../ImageState.js":"V49+","../geom/GeometryType.js":"mFnd","../render/canvas/BuilderType.js":"zlJk"}],"Cwnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=l(require("../../ViewHint.js")),r=require("../../extent.js"),n=l(require("../../render/canvas/BuilderGroup.js")),i=s(require("../../render/canvas/ExecutorGroup.js")),o=l(require("./Layer.js")),a=require("../vector.js"),u=require("../../transform.js");function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=g(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x=function(s){function l(e){var t;return d(this,l),(t=h(this,_(l).call(this,e))).dirty_=!1,t.renderedRevision_=-1,t.renderedResolution_=NaN,t.renderedExtent_=(0,r.createEmpty)(),t.renderedRenderOrder_=null,t.replayGroup_=null,t.replayGroupChanged=!0,t}return b(l,o.default),p(l,[{key:"useContainer",value:function(e,t,r){r<1&&(e=null),v(_(l.prototype),"useContainer",this).call(this,e,t,r)}},{key:"renderFrame",value:function(e,n){var o=e.pixelRatio,a=e.layerStatesArray[e.layerIndex];(0,u.makeScale)(this.pixelTransform_,1/o,1/o),(0,u.makeInverse)(this.inversePixelTransform_,this.pixelTransform_),this.useContainer(n,this.pixelTransform_,a.opacity);var s=this.context,l=s.canvas,c=this.replayGroup_;if(!c||c.isEmpty())return!this.containerReused&&l.width>0&&(l.width=0),this.container;var d=Math.round(e.size[0]*o),f=Math.round(e.size[1]*o);if(l.width!=d||l.height!=f){l.width=d,l.height=f;var p=(0,u.toString)(this.pixelTransform_);l.style.transform!==p&&(l.style.transform=p)}else this.containerReused||s.clearRect(0,0,d,f);this.preRender(s,e);var h=e.extent,y=e.viewState,v=y.projection,g=y.rotation,_=v.getExtent(),b=this.getLayer().getSource(),m=a.extent,x=void 0!==m;x&&this.clip(s,e,m);var R=e.viewHints,O=!(R[t.default.ANIMATING]||R[t.default.INTERACTING]),w=this.getRenderTransform(e,d,f,0),j=a.managed?e.skippedFeatureUids:{},E=this.getLayer().getDeclutter()?{}:null;if(c.execute(s,w,g,j,O,void 0,E),b.getWrapX()&&v.canWrapX()&&!(0,r.containsExtent)(_,h)){for(var I,S=h[0],T=(0,r.getWidth)(_),G=0;S<_[0];){I=T*--G;var A=this.getRenderTransform(e,d,f,I);c.execute(s,A,g,j,O,void 0,E),S+=T}for(G=0,S=h[2];S>_[2];){I=T*++G;var C=this.getRenderTransform(e,d,f,I);c.execute(s,C,g,j,O,void 0,E),S-=T}}if(E){var F=e.viewHints,N=!(F[t.default.ANIMATING]||F[t.default.INTERACTING]);(0,i.replayDeclutter)(E,s,g,1,N,e.declutterItems)}x&&s.restore(),this.postRender(s,e);var P=a.opacity,k=this.container;return P!==parseFloat(k.style.opacity)&&(k.style.opacity=1===P?"":P),this.container}},{key:"forEachFeatureAtCoordinate",value:function(t,r,n,i,o){if(this.replayGroup_){var a=r.viewState.resolution,u=r.viewState.rotation,s=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,u,n,{},function(t){var r=(0,e.getUid)(t);if(!(r in l))return l[r]=!0,i(t,s)},s.getDeclutter()?o:null)}}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"prepareFrame",value:function(e){var o=this.getLayer(),u=o.getSource(),s=e.viewHints[t.default.ANIMATING],l=e.viewHints[t.default.INTERACTING],c=o.getUpdateWhileAnimating(),d=o.getUpdateWhileInteracting();if(!this.dirty_&&!c&&s||!d&&l)return!0;var f=e.extent,p=e.viewState,h=p.projection,y=p.resolution,v=e.pixelRatio,g=o.getRevision(),_=o.getRenderBuffer(),b=o.getRenderOrder();void 0===b&&(b=a.defaultOrder);var m=(0,r.buffer)(f,_*y),x=p.projection.getExtent();if(u.getWrapX()&&p.projection.canWrapX()&&!(0,r.containsExtent)(x,e.extent)){var R=(0,r.getWidth)(x),O=Math.max((0,r.getWidth)(m)/2,R);m[0]=x[0]-O,m[2]=x[2]+O}if(!this.dirty_&&this.renderedResolution_==y&&this.renderedRevision_==g&&this.renderedRenderOrder_==b&&(0,r.containsExtent)(this.renderedExtent_,m))return this.replayGroupChanged=!1,!0;this.replayGroup_&&this.replayGroup_.dispose(),this.replayGroup_=null,this.dirty_=!1;var w=new n.default((0,a.getTolerance)(y,v),m,y,v,o.getDeclutter());u.loadFeatures(m,y,h);var j=function(e){var t,r=e.getStyleFunction()||o.getStyleFunction();if(r&&(t=r(e,y)),t){var n=this.renderFeature(e,y,v,t,w);this.dirty_=this.dirty_||n}}.bind(this);if(b){var E=[];u.forEachFeatureInExtent(m,function(e){E.push(e)}),E.sort(b);for(var I=0,S=E.length;I<S;++I)j(E[I])}else u.forEachFeatureInExtent(m,j);var T=w.finish(),G=new i.default(m,y,v,u.getOverlaps(),T,o.getRenderBuffer());return this.renderedResolution_=y,this.renderedRevision_=g,this.renderedRenderOrder_=b,this.renderedExtent_=m,this.replayGroup_=G,this.replayGroupChanged=!0,!0}},{key:"renderFeature",value:function(e,t,r,n,i){if(!n)return!1;var o=!1;if(Array.isArray(n))for(var u=0,s=n.length;u<s;++u)o=(0,a.renderFeature)(i,e,n[u],(0,a.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this)||o;else o=(0,a.renderFeature)(i,e,n,(0,a.getSquaredTolerance)(t,r),this.handleStyleImageChange_,this);return o}}]),l}(),R=x;exports.default=R;
},{"../../util.js":"MHZC","../../ViewHint.js":"Lb7V","../../extent.js":"+QKI","../../render/canvas/BuilderGroup.js":"3QMm","../../render/canvas/ExecutorGroup.js":"5kR9","./Layer.js":"uoa3","../vector.js":"brOh","../../transform.js":"eGRU"}],"qAzp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseVector.js")),t=r(require("../renderer/canvas/VectorLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(r){function n(e){return o(this,n),c(this,a(n).call(this,e))}return l(n,e.default),i(n,[{key:"createRenderer",value:function(){return new t.default(this)}}]),n}(),y=p;exports.default=y;
},{"./BaseVector.js":"MkI6","../renderer/canvas/VectorLayer.js":"Cwnk"}],"ifVj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"};exports.default=e;
},{}],"iZrG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadFeaturesXhr=s,exports.xhr=n;var e=require("./functions.js"),t=r(require("./format/FormatType.js"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e,r,s,n){return function(o,a,u){var i=new XMLHttpRequest;i.open("GET","function"==typeof e?e(o,a,u):e,!0),r.getType()==t.default.ARRAY_BUFFER&&(i.responseType="arraybuffer"),i.onload=function(e){if(!i.status||i.status>=200&&i.status<300){var a,f=r.getType();f==t.default.JSON||f==t.default.TEXT?a=i.responseText:f==t.default.XML?(a=i.responseXML)||(a=(new DOMParser).parseFromString(i.responseText,"application/xml")):f==t.default.ARRAY_BUFFER&&(a=i.response),a?s.call(this,r.readFeatures(a,{extent:o,featureProjection:u}),r.readProjection(a)):n.call(this)}else n.call(this)}.bind(this),i.onerror=function(){n.call(this)}.bind(this),i.send()}}function n(t,r){return s(t,r,function(e,t){"function"==typeof this.addFeatures&&this.addFeatures(e)},e.VOID)}
},{"./functions.js":"bH9H","./format/FormatType.js":"ifVj"}],"r1fV":[function(require,module,exports) {
"use strict";function e(e,t){return[[-1/0,-1/0,1/0,1/0]]}function t(e,t){return[e]}function r(e){return function(t,r){var n=e.getZForResolution(r),o=e.getTileRangeForExtentAndZ(t,n),u=[],i=[n,0,0];for(i[1]=o.minX;i[1]<=o.maxX;++i[1])for(i[2]=o.minY;i[2]<=o.maxY;++i[2])u.push(e.getTileCoordExtent(i));return u}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.all=e,exports.bbox=t,exports.tile=r;
},{}],"on36":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../util.js"),e=o(require("../Object.js")),n=require("../proj.js"),r=o(require("./State.js"));function o(t){return t&&t.__esModule?t:{default:t}}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(o){function i(t){var e;return u(this,i),(e=c(this,f(i).call(this))).projection_=(0,n.get)(t.projection),e.attributions_=h(t.attributions),e.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,e.loading=!1,e.state_=void 0!==t.state?t.state:r.default.READY,e.wrapX_=void 0!==t.wrapX&&t.wrapX,e}return p(i,e.default),s(i,[{key:"getAttributions",value:function(){return this.attributions_}},{key:"getAttributionsCollapsible",value:function(){return this.attributionsCollapsible_}},{key:"getProjection",value:function(){return this.projection_}},{key:"getResolutions",value:function(){return(0,t.abstract)()}},{key:"getState",value:function(){return this.state_}},{key:"getWrapX",value:function(){return this.wrapX_}},{key:"refresh",value:function(){this.changed()}},{key:"setAttributions",value:function(t){this.attributions_=h(t),this.changed()}},{key:"setState",value:function(t){this.state_=t,this.changed()}}]),i}();function h(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var _=y;exports.default=_;
},{"../util.js":"MHZC","../Object.js":"luFO","../proj.js":"5Zkk","./State.js":"FQoO"}],"aW0u":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"};exports.default=e;
},{}],"aHUZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=i(require("rbush")),n=require("../extent.js"),r=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var o=function(){function i(e){u(this,i),this.rbush_=new t.default(e),this.items_={}}return s(i,[{key:"insert",value:function(t,n){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:n};this.rbush_.insert(r),this.items_[(0,e.getUid)(n)]=r}},{key:"load",value:function(t,n){for(var r=new Array(n.length),i=0,u=n.length;i<u;i++){var a=t[i],s=n[i],o={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[i]=o,this.items_[(0,e.getUid)(s)]=o}this.rbush_.load(r)}},{key:"remove",value:function(t){var n=(0,e.getUid)(t),r=this.items_[n];return delete this.items_[n],null!==this.rbush_.remove(r)}},{key:"update",value:function(t,r){var i=this.items_[(0,e.getUid)(r)],u=[i.minX,i.minY,i.maxX,i.maxY];(0,n.equals)(u,t)||(this.remove(r),this.insert(t,r))}},{key:"getAll",value:function(){return this.rbush_.all().map(function(e){return e.value})}},{key:"getInExtent",value:function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(e){return e.value})}},{key:"forEach",value:function(e){return this.forEach_(this.getAll(),e)}},{key:"forEachInExtent",value:function(e,t){return this.forEach_(this.getInExtent(e),t)}},{key:"forEach_",value:function(e,t){for(var n,r=0,i=e.length;r<i;r++)if(n=t(e[r]))return n;return n}},{key:"isEmpty",value:function(){return(0,r.isEmpty)(this.items_)}},{key:"clear",value:function(){this.rbush_.clear(),this.items_={}}},{key:"getExtent",value:function(e){var t=this.rbush_.toJSON();return(0,n.createOrUpdate)(t.minX,t.minY,t.maxX,t.maxY,e)}},{key:"concat",value:function(e){for(var t in this.rbush_.load(e.rbush_.all()),e.items_)this.items_[t]=e.items_[t]}}]),i}(),l=o;exports.default=l;
},{"../util.js":"MHZC","rbush":"XGea","../extent.js":"+QKI","../obj.js":"dV1Q"}],"OssH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.VectorSourceEvent=void 0;var e=require("../util.js"),t=g(require("../Collection.js")),r=g(require("../CollectionEventType.js")),n=g(require("../ObjectEventType.js")),i=require("../array.js"),a=require("../asserts.js"),u=require("../events.js"),s=g(require("../events/Event.js")),o=g(require("../events/EventType.js")),l=require("../extent.js"),f=require("../featureloader.js"),h=require("../functions.js"),d=require("../loadingstrategy.js"),c=require("../obj.js"),v=g(require("./Source.js")),_=g(require("./State.js")),y=g(require("./VectorEventType.js")),E=g(require("../structs/RBush.js"));function g(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t,r){return t&&I(e.prototype,t),r&&I(e,r),e}function m(e,t,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=F(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function F(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?k(e):t}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e,r){var n;return R(this,t),(n=C(this,b(t).call(this,e))).feature=r,n}return j(t,s.default),t}();exports.VectorSourceEvent=A;var O=function(s){function g(e){var r;R(this,g);var n=e||{};(r=C(this,b(g).call(this,{attributions:n.attributions,projection:void 0,state:_.default.READY,wrapX:void 0===n.wrapX||n.wrapX}))).loader_=h.VOID,r.format_=n.format,r.overlaps_=null==n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&((0,a.assert)(r.format_,7),r.loader_=(0,f.xhr)(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:d.all;var i,u,s=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=s?new E.default:null,r.loadedExtentsRtree_=new E.default,r.nullGeometryFeatures_={},r.idIndex_={},r.undefIdIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?u=n.features:n.features&&(u=(i=n.features).getArray()),s||void 0!==i||(i=new t.default(u)),void 0!==u&&r.addFeaturesInternal(u),void 0!==i&&r.bindFeaturesCollection_(i),r}return j(g,v.default),x(g,[{key:"addFeature",value:function(e){this.addFeatureInternal(e),this.changed()}},{key:"addFeatureInternal",value:function(t){var r=(0,e.getUid)(t);if(this.addToIndex_(r,t)){this.setupChangeEvents_(r,t);var n=t.getGeometry();if(n){var i=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(i,t)}else this.nullGeometryFeatures_[r]=t;this.dispatchEvent(new A(y.default.ADDFEATURE,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)}},{key:"setupChangeEvents_",value:function(e,t){this.featureChangeKeys_[e]=[(0,u.listen)(t,o.default.CHANGE,this.handleFeatureChange_,this),(0,u.listen)(t,n.default.PROPERTYCHANGE,this.handleFeatureChange_,this)]}},{key:"addToIndex_",value:function(e,t){var r=!0,n=t.getId();return void 0!==n?n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=t:((0,a.assert)(!(e in this.undefIdIndex_),30),this.undefIdIndex_[e]=t),r}},{key:"addFeatures",value:function(e){this.addFeaturesInternal(e),this.changed()}},{key:"addFeaturesInternal",value:function(t){for(var r=[],n=[],i=[],a=0,u=t.length;a<u;a++){var s=t[a],o=(0,e.getUid)(s);this.addToIndex_(o,s)&&n.push(s)}for(var l=0,f=n.length;l<f;l++){var h=n[l],d=(0,e.getUid)(h);this.setupChangeEvents_(d,h);var c=h.getGeometry();if(c){var v=c.getExtent();r.push(v),i.push(h)}else this.nullGeometryFeatures_[d]=h}this.featuresRtree_&&this.featuresRtree_.load(r,i);for(var _=0,E=n.length;_<E;_++)this.dispatchEvent(new A(y.default.ADDFEATURE,n[_]))}},{key:"bindFeaturesCollection_",value:function(e){var t=!1;(0,u.listen)(this,y.default.ADDFEATURE,function(r){t||(t=!0,e.push(r.feature),t=!1)}),(0,u.listen)(this,y.default.REMOVEFEATURE,function(r){t||(t=!0,e.remove(r.feature),t=!1)}),(0,u.listen)(e,r.default.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)},this),(0,u.listen)(e,r.default.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)},this),this.featuresCollection_=e}},{key:"clear",value:function(e){if(e){for(var t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(u.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new A(y.default.CLEAR);this.dispatchEvent(n),this.changed()}},{key:"forEachFeature",value:function(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}},{key:"forEachFeatureAtCoordinateDirect",value:function(e,t){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){return r.getGeometry().intersectsCoordinate(e)?t(r):void 0})}},{key:"forEachFeatureInExtent",value:function(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}},{key:"forEachFeatureIntersectingExtent",value:function(e,t){return this.forEachFeatureInExtent(e,function(r){if(r.getGeometry().intersectsExtent(e)){var n=t(r);if(n)return n}})}},{key:"getFeaturesCollection",value:function(){return this.featuresCollection_}},{key:"getFeatures",value:function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),(0,c.isEmpty)(this.nullGeometryFeatures_)||(0,i.extend)(e,(0,c.getValues)(this.nullGeometryFeatures_))),e}},{key:"getFeaturesAtCoordinate",value:function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t}},{key:"getFeaturesInExtent",value:function(e){return this.featuresRtree_.getInExtent(e)}},{key:"getClosestFeatureToCoordinate",value:function(e,t){var r=e[0],n=e[1],i=null,a=[NaN,NaN],u=1/0,s=[-1/0,-1/0,1/0,1/0],o=t||h.TRUE;return this.featuresRtree_.forEachInExtent(s,function(e){if(o(e)){var t=e.getGeometry(),l=u;if((u=t.closestPointXY(r,n,a,u))<l){i=e;var f=Math.sqrt(u);s[0]=r-f,s[1]=n-f,s[2]=r+f,s[3]=n+f}}}),i}},{key:"getExtent",value:function(e){return this.featuresRtree_.getExtent(e)}},{key:"getFeatureById",value:function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null}},{key:"getFormat",value:function(){return this.format_}},{key:"getOverlaps",value:function(){return this.overlaps_}},{key:"getUrl",value:function(){return this.url_}},{key:"handleFeatureChange_",value:function(t){var r=t.target,n=(0,e.getUid)(r),i=r.getGeometry();if(i){var a=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(a,r)):this.featuresRtree_&&this.featuresRtree_.update(a,r)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(r),this.nullGeometryFeatures_[n]=r);var u=r.getId();if(void 0!==u){var s=u.toString();n in this.undefIdIndex_?(delete this.undefIdIndex_[n],this.idIndex_[s]=r):this.idIndex_[s]!==r&&(this.removeFromIdIndex_(r),this.idIndex_[s]=r)}else n in this.undefIdIndex_||(this.removeFromIdIndex_(r),this.undefIdIndex_[n]=r);this.changed(),this.dispatchEvent(new A(y.default.CHANGEFEATURE,r))}},{key:"hasFeature",value:function(t){var r=t.getId();return void 0!==r?r in this.idIndex_:(0,e.getUid)(t)in this.undefIdIndex_}},{key:"isEmpty",value:function(){return this.featuresRtree_.isEmpty()&&(0,c.isEmpty)(this.nullGeometryFeatures_)}},{key:"loadFeatures",value:function(e,t,r){var n=this,i=this.loadedExtentsRtree_,a=this.strategy_(e,t);this.loading=!1;for(var u=function(e,u){var s=a[e];i.forEachInExtent(s,function(e){return(0,l.containsExtent)(e.extent,s)})||(n.loader_.call(n,s,t,r),i.insert(s,{extent:s.slice()}),n.loading=n.loader_!==h.VOID)},s=0,o=a.length;s<o;++s)u(s)}},{key:"refresh",value:function(){this.clear(!0),this.loadedExtentsRtree_.clear(),m(b(g.prototype),"refresh",this).call(this)}},{key:"removeLoadedExtent",value:function(e){var t,r=this.loadedExtentsRtree_;r.forEachInExtent(e,function(r){if((0,l.equals)(r.extent,e))return t=r,!0}),t&&r.remove(t)}},{key:"removeFeature",value:function(t){var r=(0,e.getUid)(t);r in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[r]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()}},{key:"removeFeatureInternal",value:function(t){var r=(0,e.getUid)(t);this.featureChangeKeys_[r].forEach(u.unlistenByKey),delete this.featureChangeKeys_[r];var n=t.getId();void 0!==n?delete this.idIndex_[n.toString()]:delete this.undefIdIndex_[r],this.dispatchEvent(new A(y.default.REMOVEFEATURE,t))}},{key:"removeFromIdIndex_",value:function(e){var t=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===e){delete this.idIndex_[r],t=!0;break}return t}},{key:"setLoader",value:function(e){this.loader_=e}},{key:"setUrl",value:function(e){(0,a.assert)(this.format_,7),this.setLoader((0,f.xhr)(e,this.format_))}}]),g}(),w=O;exports.default=w;
},{"../util.js":"MHZC","../Collection.js":"dXq/","../CollectionEventType.js":"XSCF","../ObjectEventType.js":"7xWn","../array.js":"YQ1M","../asserts.js":"d7gk","../events.js":"sgxS","../events/Event.js":"nz3i","../events/EventType.js":"KZbn","../extent.js":"+QKI","../featureloader.js":"iZrG","../functions.js":"bH9H","../loadingstrategy.js":"r1fV","../obj.js":"dV1Q","./Source.js":"on36","./State.js":"FQoO","./VectorEventType.js":"aW0u","../structs/RBush.js":"aHUZ"}],"6VJd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRegularPolygon=V,exports.createBox=H,exports.default=void 0;var e=N(require("../events/EventType.js")),t=N(require("../Feature.js")),i=N(require("../MapBrowserEventType.js")),n=N(require("../MapBrowserPointerEvent.js")),s=require("../Object.js"),o=require("../coordinate.js"),r=require("../events.js"),a=N(require("../events/Event.js")),h=require("../events/condition.js"),u=require("../extent.js"),l=require("../functions.js"),d=N(require("../geom/Circle.js")),c=N(require("../geom/GeometryType.js")),_=N(require("../geom/LineString.js")),f=N(require("../geom/MultiLineString.js")),p=N(require("../geom/MultiPoint.js")),y=N(require("../geom/MultiPolygon.js")),g=require("../pointer/MouseSource.js"),m=N(require("../geom/Point.js")),v=w(require("../geom/Polygon.js")),k=N(require("./Pointer.js")),C=N(require("./Property.js")),P=N(require("../layer/Vector.js")),T=N(require("../source/Vector.js")),O=require("../style/Style.js");function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}function N(e){return e&&e.__esModule?e:{default:e}}function L(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,i){return t&&L(e.prototype,t),i&&L(e,i),e}function I(e,t,i){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=D(e,t);if(n){var s=Object.getOwnPropertyDescriptor(n,t);return s.get?s.get.call(i):s.value}})(e,t,i||e)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},x={DRAWSTART:"drawstart",DRAWEND:"drawend"},Y=function(e){function t(e,i){var n;return F(this,t),(n=R(this,j(t).call(this,e))).feature=i,n}return b(t,a.default),t}(),A=function(a){function u(e){var t;F(this,u);var i=e;i.stopDown||(i.stopDown=l.FALSE),(t=R(this,j(u).call(this,i))).shouldHandle_=!1,t.downPx_=null,t.downTimeout_,t.lastDragTime_,t.freehand_=!1,t.source_=e.source?e.source:null,t.features_=e.features?e.features:null,t.snapTolerance_=e.snapTolerance?e.snapTolerance:12,t.type_=e.type,t.mode_=B(t.type_),t.stopClick_=!!e.stopClick,t.minPoints_=e.minPoints?e.minPoints:t.mode_===q.POLYGON?3:2,t.maxPoints_=e.maxPoints?e.maxPoints:1/0,t.finishCondition_=e.finishCondition?e.finishCondition:l.TRUE;var n=e.geometryFunction;if(!n)if(t.type_===c.default.CIRCLE)n=function(e,t){var i=t||new d.default([NaN,NaN]),n=(0,o.squaredDistance)(e[0],e[1]);return i.setCenterAndRadius(e[0],Math.sqrt(n)),i};else{var a,f=t.mode_;f===q.POINT?a=m.default:f===q.LINE_STRING?a=_.default:f===q.POLYGON&&(a=v.default),n=function(e,t){var i=t;return i?f===q.POLYGON?e[0].length?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates([]):i.setCoordinates(e):i=new a(e),i}}return t.geometryFunction_=n,t.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,t.finishCoordinate_=null,t.sketchFeature_=null,t.sketchPoint_=null,t.sketchCoords_=null,t.sketchLine_=null,t.sketchLineCoords_=null,t.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,t.overlay_=new P.default({source:new T.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:U(),updateWhileInteracting:!0}),t.geometryName_=e.geometryName,t.condition_=e.condition?e.condition:h.noModifierKeys,t.freehandCondition_,e.freehand?t.freehandCondition_=h.always:t.freehandCondition_=e.freehandCondition?e.freehandCondition:h.shiftKeyOnly,(0,r.listen)(S(t),(0,s.getChangeEventType)(C.default.ACTIVE),t.updateState_,S(t)),t}return b(u,k.default),E(u,[{key:"setMap",value:function(e){I(j(u.prototype),"setMap",this).call(this,e),this.updateState_()}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleEvent",value:function(t){t.originalEvent.type===e.default.CONTEXTMENU&&t.preventDefault(),this.freehand_=this.mode_!==q.POINT&&this.freehandCondition_(t);var n=t.type===i.default.POINTERMOVE,s=!0;!this.freehand_&&this.lastDragTime_&&t.type===i.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0));return this.freehand_&&t.type===i.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t),s=!1):this.freehand_&&t.type===i.default.POINTERDOWN?s=!1:n?(s=t.type===i.default.POINTERMOVE)&&this.freehand_?s=this.handlePointerMove_(t):(t.pointerEvent.pointerType==g.POINTER_TYPE||t.type===i.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t):t.type===i.default.DBLCLICK&&(s=!1),I(j(u.prototype),"handleEvent",this).call(this,t)&&s}},{key:"handleDownEvent",value:function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new n.default(i.default.POINTERMOVE,e.map,e.pointerEvent,!1,e.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}},{key:"handleUpEvent",value:function(e){var t=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);var i=this.mode_===q.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===q.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!t&&this.stopClick_&&e.stopPropagation(),t}},{key:"handlePointerMove_",value:function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,i=e.pixel,n=t[0]-i[0],s=t[1]-i[1],o=n*n+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0}},{key:"atFinish_",value:function(e){var t=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===q.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===q.POLYGON){var s=this.sketchCoords_;i=s[0].length>this.minPoints_,n=[s[0][0],s[0][s[0].length-2]]}if(i)for(var o=e.map,r=0,a=n.length;r<a;r++){var h=n[r],u=o.getPixelFromCoordinate(h),l=e.pixel,d=l[0]-u[0],c=l[1]-u[1],_=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(d*d+c*c)<=_){this.finishCoordinate_=h;break}}}return t}},{key:"createOrUpdateSketchPoint_",value:function(e){var i=e.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(i):(this.sketchPoint_=new t.default(new m.default(i)),this.updateSketchFeatures_())}},{key:"startDrawing_",value:function(e){var i=e.coordinate;this.finishCoordinate_=i,this.mode_===q.POINT?this.sketchCoords_=i.slice():this.mode_===q.POLYGON?(this.sketchCoords_=[[i.slice(),i.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[i.slice(),i.slice()],this.sketchLineCoords_&&(this.sketchLine_=new t.default(new _.default(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new t.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Y(x.DRAWSTART,this.sketchFeature_))}},{key:"modifyDrawing_",value:function(e){var i,n,s,o=e.coordinate,r=this.sketchFeature_.getGeometry();(this.mode_===q.POINT?n=this.sketchCoords_:this.mode_===q.POLYGON?(n=(i=this.sketchCoords_[0])[i.length-1],this.atFinish_(e)&&(o=this.finishCoordinate_.slice())):n=(i=this.sketchCoords_)[i.length-1],n[0]=o[0],n[1]=o[1],this.geometryFunction_(this.sketchCoords_,r),this.sketchPoint_)&&this.sketchPoint_.getGeometry().setCoordinates(o);if(r.getType()==c.default.POLYGON&&this.mode_!==q.POLYGON){this.sketchLine_||(this.sketchLine_=new t.default);var a=r.getLinearRing(0);(s=this.sketchLine_.getGeometry())?(s.setFlatCoordinates(a.getLayout(),a.getFlatCoordinates()),s.changed()):(s=new _.default(a.getFlatCoordinates(),a.getLayout()),this.sketchLine_.setGeometry(s))}else this.sketchLineCoords_&&(s=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()}},{key:"addToDrawing_",value:function(e){var t,i,n=e.coordinate,s=this.sketchFeature_.getGeometry();this.mode_===q.LINE_STRING?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(n.slice()),this.geometryFunction_(i,s)):this.mode_===q.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():t=!0),i.push(n.slice()),t&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,s)),this.updateSketchFeatures_(),t&&this.finishDrawing()}},{key:"removeLastPoint",value:function(){if(this.sketchFeature_){var e,t=this.sketchFeature_.getGeometry();this.mode_===q.LINE_STRING?((e=this.sketchCoords_).splice(-2,1),this.geometryFunction_(e,t),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===q.POLYGON&&((e=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(e),this.geometryFunction_(this.sketchCoords_,t)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}}},{key:"finishDrawing",value:function(){var e=this.abortDrawing_();if(e){var t=this.sketchCoords_,i=e.getGeometry();this.mode_===q.LINE_STRING?(t.pop(),this.geometryFunction_(t,i)):this.mode_===q.POLYGON&&(t[0].pop(),this.geometryFunction_(t,i),t=i.getCoordinates()),this.type_===c.default.MULTI_POINT?e.setGeometry(new p.default([t])):this.type_===c.default.MULTI_LINE_STRING?e.setGeometry(new f.default([t])):this.type_===c.default.MULTI_POLYGON&&e.setGeometry(new y.default([t])),this.dispatchEvent(new Y(x.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}}},{key:"abortDrawing_",value:function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e}},{key:"extend",value:function(e){var t=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=t.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Y(x.DRAWSTART,this.sketchFeature_))}},{key:"updateSketchFeatures_",value:function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}},{key:"updateState_",value:function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)}}]),u}();function U(){var e=(0,O.createEditingStyle)();return function(t,i){return e[t.getGeometry().getType()]}}function V(e,t){return function(i,n){var s=i[0],r=i[1],a=Math.sqrt((0,o.squaredDistance)(s,r)),h=n||(0,v.fromCircle)(new d.default(s),e),u=t;if(!t){var l=r[0]-s[0],c=r[1]-s[1];u=Math.atan(c/l)-(l<0?Math.PI:0)}return(0,v.makeRegular)(h,s,a,u),h}}function H(){return function(e,t){var i=(0,u.boundingExtent)(e),n=[[(0,u.getBottomLeft)(i),(0,u.getBottomRight)(i),(0,u.getTopRight)(i),(0,u.getTopLeft)(i),(0,u.getBottomLeft)(i)]],s=t;return s?s.setCoordinates(n):s=new v.default(n),s}}function B(e){var t;return e===c.default.POINT||e===c.default.MULTI_POINT?t=q.POINT:e===c.default.LINE_STRING||e===c.default.MULTI_LINE_STRING?t=q.LINE_STRING:e===c.default.POLYGON||e===c.default.MULTI_POLYGON?t=q.POLYGON:e===c.default.CIRCLE&&(t=q.CIRCLE),t}var W=A;exports.default=W;
},{"../events/EventType.js":"KZbn","../Feature.js":"wUQb","../MapBrowserEventType.js":"530S","../MapBrowserPointerEvent.js":"UbWk","../Object.js":"luFO","../coordinate.js":"Gkmg","../events.js":"sgxS","../events/Event.js":"nz3i","../events/condition.js":"2Mo3","../extent.js":"+QKI","../functions.js":"bH9H","../geom/Circle.js":"1ReZ","../geom/GeometryType.js":"mFnd","../geom/LineString.js":"Y6IR","../geom/MultiLineString.js":"N5a8","../geom/MultiPoint.js":"C72u","../geom/MultiPolygon.js":"gjfC","../pointer/MouseSource.js":"Cv3W","../geom/Point.js":"phv5","../geom/Polygon.js":"mzg3","./Pointer.js":"8Z00","./Property.js":"0oFU","../layer/Vector.js":"qAzp","../source/Vector.js":"OssH","../style/Style.js":"TiiD"}],"ipBJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../Feature.js")),t=p(require("../MapBrowserEventType.js")),n=require("../coordinate.js"),r=p(require("../events/Event.js")),o=require("../extent.js"),i=p(require("../geom/GeometryType.js")),u=p(require("../geom/Point.js")),a=require("../geom/Polygon.js"),l=p(require("./Pointer.js")),s=p(require("../layer/Vector.js")),c=p(require("../source/Vector.js")),f=require("../style/Style.js");function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function y(e,t,n){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w={EXTENTCHANGED:"extentchanged"},P=function(e){function t(e){var n;return _(this,t),(n=g(this,m(t).call(this,w.EXTENTCHANGED))).extent=e,n}return O(t,r.default),t}(),T=function(r){function i(e){var t;_(this,i);var n=e||{};return(t=g(this,m(i).call(this,n))).extent_=null,t.pointerHandler_=null,t.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,t.snappedToVertex_=!1,t.extentFeature_=null,t.vertexFeature_=null,e||(e={}),t.extentOverlay_=new s.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:j(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.vertexOverlay_=new s.default({source:new c.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:S(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&t.setExtent(e.extent),t}return O(i,l.default),h(i,[{key:"snapToVertex_",value:function(e,t){var r=t.getCoordinateFromPixel(e),o=this.getExtent();if(o){var i=k(o);i.sort(function(e,t){return(0,n.squaredDistanceToSegment)(r,e)-(0,n.squaredDistanceToSegment)(r,t)});var u=i[0],a=(0,n.closestOnSegment)(r,u),l=t.getPixelFromCoordinate(a);if((0,n.distance)(e,l)<=this.pixelTolerance_){var s=t.getPixelFromCoordinate(u[0]),c=t.getPixelFromCoordinate(u[1]),f=(0,n.squaredDistance)(l,s),p=(0,n.squaredDistance)(l,c),d=Math.sqrt(Math.min(f,p));return this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(a=f>p?u[1]:u[0]),a}}return null}},{key:"handlePointerMove_",value:function(e){var t=e.pixel,n=e.map,r=this.snapToVertex_(t,n);r||(r=n.getCoordinateFromPixel(t)),this.createOrUpdatePointerFeature_(r)}},{key:"createOrUpdateExtentFeature_",value:function(t){var n=this.extentFeature_;return n?t?n.setGeometry((0,a.fromExtent)(t)):n.setGeometry(void 0):(n=t?new e.default((0,a.fromExtent)(t)):new e.default({}),this.extentFeature_=n,this.extentOverlay_.getSource().addFeature(n)),n}},{key:"createOrUpdatePointerFeature_",value:function(t){var n=this.vertexFeature_;n?n.getGeometry().setCoordinates(t):(n=new e.default(new u.default(t)),this.vertexFeature_=n,this.vertexOverlay_.getSource().addFeature(n));return n}},{key:"handleEvent",value:function(e){return!e.pointerEvent||(e.type!=t.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),y(m(i.prototype),"handleEvent",this).call(this,e),!1)}},{key:"handleDownEvent",value:function(e){var t=e.pixel,n=e.map,r=this.getExtent(),o=this.snapToVertex_(t,n),i=function(e){var t=null,n=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?n=r[3]:e[1]==r[3]&&(n=r[1]),null!==t&&null!==n?[t,n]:null};if(o&&r){var u=o[0]==r[0]||o[0]==r[2]?o[0]:null,a=o[1]==r[1]||o[1]==r[3]?o[1]:null;null!==u&&null!==a?this.pointerHandler_=F(i(o)):null!==u?this.pointerHandler_=q(i([u,r[1]]),i([u,r[3]])):null!==a&&(this.pointerHandler_=q(i([r[0],a]),i([r[2],a])))}else o=n.getCoordinateFromPixel(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=F(o);return!0}},{key:"handleDragEvent",value:function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0}},{key:"handleUpEvent",value:function(e){this.pointerHandler_=null;var t=this.getExtent();return t&&0!==(0,o.getArea)(t)||this.setExtent(null),!1}},{key:"setMap",value:function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),y(m(i.prototype),"setMap",this).call(this,e)}},{key:"getExtent",value:function(){return this.extent_}},{key:"setExtent",value:function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new P(this.extent_))}}]),i}();function j(){var e=(0,f.createEditingStyle)();return function(t,n){return e[i.default.POLYGON]}}function S(){var e=(0,f.createEditingStyle)();return function(t,n){return e[i.default.POINT]}}function F(e){return function(t){return(0,o.boundingExtent)([e,t])}}function q(e,t){return e[0]==t[0]?function(n){return(0,o.boundingExtent)([e,[n[0],t[1]]])}:e[1]==t[1]?function(n){return(0,o.boundingExtent)([e,[t[0],n[1]]])}:null}function k(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}var M=T;exports.default=M;
},{"../Feature.js":"wUQb","../MapBrowserEventType.js":"530S","../coordinate.js":"Gkmg","../events/Event.js":"nz3i","../extent.js":"+QKI","../geom/GeometryType.js":"mFnd","../geom/Point.js":"phv5","../geom/Polygon.js":"mzg3","./Pointer.js":"8Z00","../layer/Vector.js":"qAzp","../source/Vector.js":"OssH","../style/Style.js":"TiiD"}],"BQSr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ModifyEvent=void 0;var e=require("../util.js"),t=x(require("../Collection.js")),r=x(require("../CollectionEventType.js")),n=x(require("../Feature.js")),i=x(require("../MapBrowserEventType.js")),a=require("../array.js"),o=require("../coordinate.js"),s=require("../events.js"),u=x(require("../events/Event.js")),l=x(require("../events/EventType.js")),d=require("../events/condition.js"),h=require("../extent.js"),g=x(require("../geom/GeometryType.js")),f=x(require("../geom/Point.js")),c=x(require("./Pointer.js")),_=x(require("../layer/Vector.js")),v=x(require("../source/Vector.js")),y=x(require("../source/VectorEventType.js")),m=x(require("../structs/RBush.js")),p=require("../style/Style.js");function x(e){return e&&e.__esModule?e:{default:e}}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),e}function F(e,t,r){return(F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=T(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=0,M=1,R={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},N=function(e){function t(e,r,n){var i;return P(this,t),(i=I(this,G(t).call(this,e))).features=r,i.mapBrowserEvent=n,i}return k(t,u.default),t}();exports.ModifyEvent=N;var L=function(u){function p(e){var n,i;if(P(this,p),(n=I(this,G(p).call(this,e))).condition_=e.condition?e.condition:d.primaryAction,n.defaultDeleteCondition_=function(e){return(0,d.altKeyOnly)(e)&&(0,d.singleClick)(e)},n.deleteCondition_=e.deleteCondition?e.deleteCondition:n.defaultDeleteCondition_,n.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:d.always,n.vertexFeature_=null,n.vertexSegments_=null,n.lastPixel_=[0,0],n.ignoreNextSingleClick_=!1,n.modified_=!1,n.rBush_=new m.default,n.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,n.snappedToVertex_=!1,n.changingFeature_=!1,n.dragSegments_=[],n.overlay_=new _.default({source:new v.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:A(),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.SEGMENT_WRITERS_={Point:n.writePointGeometry_,LineString:n.writeLineStringGeometry_,LinearRing:n.writeLineStringGeometry_,Polygon:n.writePolygonGeometry_,MultiPoint:n.writeMultiPointGeometry_,MultiLineString:n.writeMultiLineStringGeometry_,MultiPolygon:n.writeMultiPolygonGeometry_,Circle:n.writeCircleGeometry_,GeometryCollection:n.writeGeometryCollectionGeometry_},n.source_=null,e.source?(n.source_=e.source,i=new t.default(n.source_.getFeatures()),(0,s.listen)(n.source_,y.default.ADDFEATURE,n.handleSourceAdd_,w(n)),(0,s.listen)(n.source_,y.default.REMOVEFEATURE,n.handleSourceRemove_,w(n))):i=e.features,!i)throw new Error("The modify interaction requires features or a source");return n.features_=i,n.features_.forEach(n.addFeature_.bind(w(n))),(0,s.listen)(n.features_,r.default.ADD,n.handleFeatureAdd_,w(n)),(0,s.listen)(n.features_,r.default.REMOVE,n.handleFeatureRemove_,w(n)),n.lastPointerEvent_=null,n}return k(p,c.default),C(p,[{key:"addFeature_",value:function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var r=this.getMap();r&&r.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,r),(0,s.listen)(e,l.default.CHANGE,this.handleFeatureChange_,this)}},{key:"willModifyFeatures_",value:function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new N(R.MODIFYSTART,this.features_,e)))}},{key:"removeFeature_",value:function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),(0,s.unlisten)(e,l.default.CHANGE,this.handleFeatureChange_,this)}},{key:"removeFeatureSegmentData_",value:function(e){var t=this.rBush_,r=[];t.forEach(function(t){e===t.feature&&r.push(t)});for(var n=r.length-1;n>=0;--n){for(var i=r[n],a=this.dragSegments_.length-1;a>=0;--a)this.dragSegments_[a][0]===i&&this.dragSegments_.splice(a,1);t.remove(i)}}},{key:"setActive",value:function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),F(G(p.prototype),"setActive",this).call(this,e)}},{key:"setMap",value:function(e){this.overlay_.setMap(e),F(G(p.prototype),"setMap",this).call(this,e)}},{key:"getOverlay",value:function(){return this.overlay_}},{key:"handleSourceAdd_",value:function(e){e.feature&&this.features_.push(e.feature)}},{key:"handleSourceRemove_",value:function(e){e.feature&&this.features_.remove(e.feature)}},{key:"handleFeatureAdd_",value:function(e){this.addFeature_(e.element)}},{key:"handleFeatureChange_",value:function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}}},{key:"handleFeatureRemove_",value:function(e){var t=e.element;this.removeFeature_(t)}},{key:"writePointGeometry_",value:function(e,t){var r=t.getCoordinates(),n={feature:e,geometry:t,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)}},{key:"writeMultiPointGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var a=r[n],o={feature:e,geometry:t,depth:[n],index:n,segment:[a,a]};this.rBush_.insert(t.getExtent(),o)}}},{key:"writeLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var a=r.slice(n,n+2),o={feature:e,geometry:t,index:n,segment:a};this.rBush_.insert((0,h.boundingExtent)(a),o)}}},{key:"writeMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],o=0,s=a.length-1;o<s;++o){var u=a.slice(o,o+2),l={feature:e,geometry:t,depth:[n],index:o,segment:u};this.rBush_.insert((0,h.boundingExtent)(u),l)}}},{key:"writePolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],o=0,s=a.length-1;o<s;++o){var u=a.slice(o,o+2),l={feature:e,geometry:t,depth:[n],index:o,segment:u};this.rBush_.insert((0,h.boundingExtent)(u),l)}}},{key:"writeMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],o=0,s=a.length;o<s;++o)for(var u=a[o],l=0,d=u.length-1;l<d;++l){var g=u.slice(l,l+2),f={feature:e,geometry:t,depth:[o,n],index:l,segment:g};this.rBush_.insert((0,h.boundingExtent)(g),f)}}},{key:"writeCircleGeometry_",value:function(e,t){var r=t.getCenter(),n={feature:e,geometry:t,index:b,segment:[r,r]},i={feature:e,geometry:t,index:M,segment:[r,r]},a=[n,i];n.featureSegments=i.featureSegments=a,this.rBush_.insert((0,h.createOrUpdateFromCoordinate)(r),n),this.rBush_.insert(t.getExtent(),i)}},{key:"writeGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n)this.SEGMENT_WRITERS_[r[n].getType()].call(this,e,r[n])}},{key:"createOrUpdateVertexFeature_",value:function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new n.default(new f.default(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t));return t}},{key:"handleEvent",value:function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=i.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=i.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==i.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),F(G(p.prototype),"handleEvent",this).call(this,e)&&!t);var t}},{key:"handleDragEvent",value:function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],a=i[0],s=a.depth,u=a.geometry,l=void 0,d=a.segment,h=i[1];t.length<u.getStride();)t.push(d[h][t.length]);switch(u.getType()){case g.default.POINT:l=t,d[0]=d[1]=t;break;case g.default.MULTI_POINT:(l=u.getCoordinates())[a.index]=t,d[0]=d[1]=t;break;case g.default.LINE_STRING:(l=u.getCoordinates())[a.index+h]=t,d[h]=t;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(l=u.getCoordinates())[s[0]][a.index+h]=t,d[h]=t;break;case g.default.MULTI_POLYGON:(l=u.getCoordinates())[s[1]][s[0]][a.index+h]=t,d[h]=t;break;case g.default.CIRCLE:d[0]=d[1]=t,a.index===b?(this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,u.setRadius((0,o.distance)(u.getCenter(),t)),this.changingFeature_=!1)}l&&this.setGeometryCoordinates_(u,l)}this.createOrUpdateVertexFeature_(t)}},{key:"handleDownEvent",value:function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var r=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var n=this.vertexFeature_;if(n){var i=[],a=n.getGeometry().getCoordinates(),s=(0,h.boundingExtent)([a]),u=this.rBush_.getInExtent(s),l={};u.sort(q);for(var d=0,f=u.length;d<f;++d){var c=u[d],_=c.segment,v=(0,e.getUid)(c.feature),y=c.depth;if(y&&(v+="-"+y.join("-")),l[v]||(l[v]=new Array(2)),c.geometry.getType()===g.default.CIRCLE&&c.index===M){var m=D(r,c);(0,o.equals)(m,a)&&!l[v][0]&&(this.dragSegments_.push([c,0]),l[v][0]=c)}else if((0,o.equals)(_[0],a)&&!l[v][0])this.dragSegments_.push([c,0]),l[v][0]=c;else if((0,o.equals)(_[1],a)&&!l[v][1]){if((c.geometry.getType()===g.default.LINE_STRING||c.geometry.getType()===g.default.MULTI_LINE_STRING)&&l[v][0]&&0===l[v][0].index)continue;this.dragSegments_.push([c,1]),l[v][1]=c}else(0,e.getUid)(_)in this.vertexSegments_&&!l[v][0]&&!l[v][1]&&this.insertVertexCondition_(t)&&i.push([c,a])}i.length&&this.willModifyFeatures_(t);for(var p=i.length-1;p>=0;--p)this.insertVertex_.apply(this,i[p])}return!!this.vertexFeature_}},{key:"handleUpEvent",value:function(e){for(var t=this.dragSegments_.length-1;t>=0;--t){var r=this.dragSegments_[t][0],n=r.geometry;if(n.getType()===g.default.CIRCLE){var i=n.getCenter(),a=r.featureSegments[0],o=r.featureSegments[1];a.segment[0]=a.segment[1]=i,o.segment[0]=o.segment[1]=i,this.rBush_.update((0,h.createOrUpdateFromCoordinate)(i),a),this.rBush_.update(n.getExtent(),o)}else this.rBush_.update((0,h.boundingExtent)(r.segment),r)}return this.modified_&&(this.dispatchEvent(new N(R.MODIFYEND,this.features_,e)),this.modified_=!1),!1}},{key:"handlePointerMove_",value:function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)}},{key:"handlePointerAtPixel_",value:function(t,r){var n=r.getCoordinateFromPixel(t),i=(0,h.buffer)((0,h.createOrUpdateFromCoordinate)(n),r.getView().getResolution()*this.pixelTolerance_),a=this.rBush_.getInExtent(i);if(a.length>0){a.sort(function(e,t){return j(n,e)-j(n,t)});var s=a[0],u=s.segment,l=D(n,s),d=r.getPixelFromCoordinate(l),f=(0,o.distance)(t,d);if(f<=this.pixelTolerance_){var c={};if(s.geometry.getType()===g.default.CIRCLE&&s.index===M)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var _=r.getPixelFromCoordinate(u[0]),v=r.getPixelFromCoordinate(u[1]),y=(0,o.squaredDistance)(d,_),m=(0,o.squaredDistance)(d,v);f=Math.sqrt(Math.min(y,m)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(l=y>m?u[1]:u[0]),this.createOrUpdateVertexFeature_(l);for(var p=1,x=a.length;p<x;++p){var E=a[p].segment;if(!((0,o.equals)(u[0],E[0])&&(0,o.equals)(u[1],E[1])||(0,o.equals)(u[0],E[1])&&(0,o.equals)(u[1],E[0])))break;c[(0,e.getUid)(E)]=!0}}return c[(0,e.getUid)(u)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}},{key:"insertVertex_",value:function(e,t){for(var r,n=e.segment,i=e.feature,a=e.geometry,o=e.depth,s=e.index;t.length<a.getStride();)t.push(0);switch(a.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(r=a.getCoordinates())[o[0]].splice(s+1,0,t);break;case g.default.MULTI_POLYGON:(r=a.getCoordinates())[o[1]][o[0]].splice(s+1,0,t);break;case g.default.LINE_STRING:(r=a.getCoordinates()).splice(s+1,0,t);break;default:return}this.setGeometryCoordinates_(a,r);var u=this.rBush_;u.remove(e),this.updateSegmentIndices_(a,s,o,1);var l={segment:[n[0],t],feature:i,geometry:a,depth:o,index:s};u.insert((0,h.boundingExtent)(l.segment),l),this.dragSegments_.push([l,1]);var d={segment:[t,n[1]],feature:i,geometry:a,depth:o,index:s+1};u.insert((0,h.boundingExtent)(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0}},{key:"removePoint",value:function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=i.default.POINTERDRAG){var e=this.lastPointerEvent_;this.willModifyFeatures_(e);var t=this.removeVertex_();return this.dispatchEvent(new N(R.MODIFYEND,this.features_,e)),this.modified_=!1,t}return!1}},{key:"removeVertex_",value:function(){var t,r,n,i,a,o,s,u,l,d,f,c=this.dragSegments_,_={},v=!1;for(a=c.length-1;a>=0;--a)d=(n=c[a])[0],f=(0,e.getUid)(d.feature),d.depth&&(f+="-"+d.depth.join("-")),f in _||(_[f]={}),0===n[1]?(_[f].right=d,_[f].index=d.index):1==n[1]&&(_[f].left=d,_[f].index=d.index+1);for(f in _){switch(l=_[f].right,s=_[f].left,(u=(o=_[f].index)-1)<0&&(u=0),t=r=(i=(d=void 0!==s?s:l).geometry).getCoordinates(),v=!1,i.getType()){case g.default.MULTI_LINE_STRING:r[d.depth[0]].length>2&&(r[d.depth[0]].splice(o,1),v=!0);break;case g.default.LINE_STRING:r.length>2&&(r.splice(o,1),v=!0);break;case g.default.MULTI_POLYGON:t=t[d.depth[1]];case g.default.POLYGON:(t=t[d.depth[0]]).length>4&&(o==t.length-1&&(o=0),t.splice(o,1),v=!0,0===o&&(t.pop(),t.push(t[0]),u=t.length-1))}if(v){this.setGeometryCoordinates_(i,r);var y=[];if(void 0!==s&&(this.rBush_.remove(s),y.push(s.segment[0])),void 0!==l&&(this.rBush_.remove(l),y.push(l.segment[1])),void 0!==s&&void 0!==l){var m={depth:d.depth,feature:d.feature,geometry:d.geometry,index:u,segment:y};this.rBush_.insert((0,h.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(i,o,d.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),c.length=0}}return v}},{key:"setGeometryCoordinates_",value:function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}},{key:"updateSegmentIndices_",value:function(e,t,r,n){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===r||void 0===i.depth||(0,a.equals)(i.depth,r))&&i.index>t&&(i.index+=n)})}}]),p}();function q(e,t){return e.index-t.index}function j(e,t){var r=t.geometry;if(r.getType()===g.default.CIRCLE){var n=r;if(t.index===M){var i=(0,o.squaredDistance)(n.getCenter(),e),a=Math.sqrt(i)-n.getRadius();return a*a}}return(0,o.squaredDistanceToSegment)(e,t.segment)}function D(e,t){var r=t.geometry;return r.getType()===g.default.CIRCLE&&t.index===M?r.getClosestPoint(e):(0,o.closestOnSegment)(e,t.segment)}function A(){var e=(0,p.createEditingStyle)();return function(t,r){return e[g.default.POINT]}}var U=L;exports.default=U;
},{"../util.js":"MHZC","../Collection.js":"dXq/","../CollectionEventType.js":"XSCF","../Feature.js":"wUQb","../MapBrowserEventType.js":"530S","../array.js":"YQ1M","../coordinate.js":"Gkmg","../events.js":"sgxS","../events/Event.js":"nz3i","../events/EventType.js":"KZbn","../events/condition.js":"2Mo3","../extent.js":"+QKI","../geom/GeometryType.js":"mFnd","../geom/Point.js":"phv5","./Pointer.js":"8Z00","../layer/Vector.js":"qAzp","../source/Vector.js":"OssH","../source/VectorEventType.js":"aW0u","../structs/RBush.js":"aHUZ","../style/Style.js":"TiiD"}],"mnul":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=d(require("../CollectionEventType.js")),r=require("../array.js"),n=require("../events.js"),i=d(require("../events/Event.js")),o=require("../events/condition.js"),a=require("../functions.js"),u=d(require("../geom/GeometryType.js")),l=d(require("./Interaction.js")),s=d(require("../layer/Vector.js")),c=require("../obj.js"),f=d(require("../source/Vector.js")),y=require("../style/Style.js");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function v(e,t,r){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=_(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function _(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T={SELECT:"select"},C=function(e){function t(e,r,n,i){var o;return m(this,t),(o=b(this,E(t).call(this,e))).selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return F(t,i.default),t}(),L=function(i){function u(e){var i;m(this,u);var l=e||{};(i=b(this,E(u).call(this,{handleEvent:k}))).condition_=l.condition?l.condition:o.singleClick,i.addCondition_=l.addCondition?l.addCondition:o.never,i.removeCondition_=l.removeCondition?l.removeCondition:o.never,i.toggleCondition_=l.toggleCondition?l.toggleCondition:o.shiftKeyOnly,i.multi_=!!l.multi&&l.multi,i.filter_=l.filter?l.filter:a.TRUE,i.hitTolerance_=l.hitTolerance?l.hitTolerance:0;var c,y=new s.default({source:new f.default({useSpatialIndex:!1,features:l.features,wrapX:l.wrapX}),style:l.style?l.style:w(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(i.featureOverlay_=y,l.layers)if("function"==typeof l.layers)c=l.layers;else{var d=l.layers;c=function(e){return(0,r.includes)(d,e)}}else c=a.TRUE;i.layerFilter_=c,i.featureLayerAssociation_={};var h=i.getFeatures();return(0,n.listen)(h,t.default.ADD,i.addFeature_,O(i)),(0,n.listen)(h,t.default.REMOVE,i.removeFeature_,O(i)),i}return F(u,l.default),p(u,[{key:"addFeatureLayerAssociation_",value:function(t,r){this.featureLayerAssociation_[(0,e.getUid)(t)]=r}},{key:"getFeatures",value:function(){return this.featureOverlay_.getSource().getFeaturesCollection()}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"getLayer",value:function(t){return this.featureLayerAssociation_[(0,e.getUid)(t)]}},{key:"getOverlay",value:function(){return this.featureOverlay_}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){var t=this.getMap(),r=this.getFeatures();t&&r.forEach(t.unskipFeature.bind(t)),v(E(u.prototype),"setMap",this).call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))}},{key:"addFeature_",value:function(e){var t=this.getMap();t&&t.skipFeature(e.element)}},{key:"removeFeature_",value:function(e){var t=this.getMap();t&&t.unskipFeature(e.element)}},{key:"removeFeatureLayerAssociation_",value:function(t){delete this.featureLayerAssociation_[(0,e.getUid)(t)]}}]),u}();function k(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),n=this.removeCondition_(e),i=this.toggleCondition_(e),a=!t&&!n&&!i,u=e.map,l=this.getFeatures(),s=[],f=[];if(a){(0,c.clear)(this.featureLayerAssociation_),u.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return f.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var y=l.getLength()-1;y>=0;--y){var d=l.item(y),h=f.indexOf(d);h>-1?f.splice(h,1):(l.remove(d),s.push(d))}0!==f.length&&l.extend(f)}else{u.forEachFeatureAtPixel(e.pixel,function(e,o){if(this.filter_(e,o))return!t&&!i||(0,r.includes)(l.getArray(),e)?(n||i)&&(0,r.includes)(l.getArray(),e)&&(s.push(e),this.removeFeatureLayerAssociation_(e)):(f.push(e),this.addFeatureLayerAssociation_(e,o)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var p=s.length-1;p>=0;--p)l.remove(s[p]);l.extend(f)}return(f.length>0||s.length>0)&&this.dispatchEvent(new C(T.SELECT,f,s,e)),(0,o.pointerMove)(e)}function w(){var e=(0,y.createEditingStyle)();return(0,r.extend)(e[u.default.POLYGON],e[u.default.LINE_STRING]),(0,r.extend)(e[u.default.GEOMETRY_COLLECTION],e[u.default.LINE_STRING]),function(t,r){return t.getGeometry()?e[t.getGeometry().getType()]:null}}var A=L;exports.default=A;
},{"../util.js":"MHZC","../CollectionEventType.js":"XSCF","../array.js":"YQ1M","../events.js":"sgxS","../events/Event.js":"nz3i","../events/condition.js":"2Mo3","../functions.js":"bH9H","../geom/GeometryType.js":"mFnd","./Interaction.js":"OY0/","../layer/Vector.js":"qAzp","../obj.js":"dV1Q","../source/Vector.js":"OssH","../style/Style.js":"TiiD"}],"tVLB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=d(require("../CollectionEventType.js")),r=require("../coordinate.js"),n=require("../events.js"),i=d(require("../events/EventType.js")),o=require("../extent.js"),a=require("../functions.js"),u=d(require("../geom/GeometryType.js")),s=require("../geom/Polygon.js"),l=d(require("./Pointer.js")),h=require("../obj.js"),c=d(require("../source/VectorEventType.js")),f=d(require("../structs/RBush.js"));function d(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function p(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,r){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=E(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=F(e)););return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){return e.feature?e.feature:e.element?e.element:void 0}var P=function(d){function g(e){var t;_(this,g);var r=e||{},n=r;return n.handleDownEvent||(n.handleDownEvent=a.TRUE),n.stopDown||(n.stopDown=a.FALSE),(t=p(this,F(g).call(this,n))).source_=r.source?r.source:null,t.vertex_=void 0===r.vertex||r.vertex,t.edge_=void 0===r.edge||r.edge,t.features_=r.features?r.features:null,t.featuresListenerKeys_=[],t.featureChangeListenerKeys_={},t.indexedFeaturesExtents_={},t.pendingFeatures_={},t.pixelCoordinate_=null,t.pixelTolerance_=void 0!==r.pixelTolerance?r.pixelTolerance:10,t.sortByDistance_=T.bind(m(t)),t.rBush_=new f.default,t.SEGMENT_WRITERS_={Point:t.writePointGeometry_,LineString:t.writeLineStringGeometry_,LinearRing:t.writeLineStringGeometry_,Polygon:t.writePolygonGeometry_,MultiPoint:t.writeMultiPointGeometry_,MultiLineString:t.writeMultiLineStringGeometry_,MultiPolygon:t.writeMultiPolygonGeometry_,GeometryCollection:t.writeGeometryCollectionGeometry_,Circle:t.writeCircleGeometry_},t}return C(g,l.default),v(g,[{key:"addFeature",value:function(t,r){var a=void 0===r||r,u=(0,e.getUid)(t),s=t.getGeometry();if(s){var l=this.SEGMENT_WRITERS_[s.getType()];l&&(this.indexedFeaturesExtents_[u]=s.getExtent((0,o.createEmpty)()),l.call(this,t,s))}a&&(this.featureChangeListenerKeys_[u]=(0,n.listen)(t,i.default.CHANGE,this.handleFeatureChange_,this))}},{key:"forEachFeatureAdd_",value:function(e){this.addFeature(e)}},{key:"forEachFeatureRemove_",value:function(e){this.removeFeature(e)}},{key:"getFeatures_",value:function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e}},{key:"handleEvent",value:function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),x(F(g.prototype),"handleEvent",this).call(this,e)}},{key:"handleFeatureAdd_",value:function(e){var t=w(e);this.addFeature(t)}},{key:"handleFeatureRemove_",value:function(e){var t=w(e);this.removeFeature(t)}},{key:"handleFeatureChange_",value:function(t){var r=t.target;if(this.handlingDownUpSequence){var n=(0,e.getUid)(r);n in this.pendingFeatures_||(this.pendingFeatures_[n]=r)}else this.updateFeature_(r)}},{key:"handleUpEvent",value:function(e){var t=(0,h.getValues)(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}},{key:"removeFeature",value:function(t,r){var i=void 0===r||r,o=(0,e.getUid)(t),a=this.indexedFeaturesExtents_[o];if(a){var u=this.rBush_,s=[];u.forEachInExtent(a,function(e){t===e.feature&&s.push(e)});for(var l=s.length-1;l>=0;--l)u.remove(s[l])}i&&((0,n.unlistenByKey)(this.featureChangeListenerKeys_[o]),delete this.featureChangeListenerKeys_[o])}},{key:"setMap",value:function(e){var r=this.getMap(),i=this.featuresListenerKeys_,o=this.getFeatures_();r&&(i.forEach(n.unlistenByKey),i.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),x(F(g.prototype),"setMap",this).call(this,e),e&&(this.features_?i.push((0,n.listen)(this.features_,t.default.ADD,this.handleFeatureAdd_,this),(0,n.listen)(this.features_,t.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push((0,n.listen)(this.source_,c.default.ADDFEATURE,this.handleFeatureAdd_,this),(0,n.listen)(this.source_,c.default.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))}},{key:"snapTo",value:function(e,t,n){var i=n.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),a=n.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),s=(0,o.boundingExtent)([i,a]),l=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(l=l.filter(function(e){return e.feature.getGeometry().getType()!==u.default.CIRCLE}));var h,c,f,d,g=!1,_=null,y=null;if(l.length>0){this.pixelCoordinate_=t,l.sort(this.sortByDistance_);var v=l[0].segment,p=l[0].feature.getGeometry().getType()===u.default.CIRCLE;this.vertex_&&!this.edge_?(h=n.getPixelFromCoordinate(v[0]),c=n.getPixelFromCoordinate(v[1]),f=(0,r.squaredDistance)(e,h),d=(0,r.squaredDistance)(e,c),Math.sqrt(Math.min(f,d))<=this.pixelTolerance_&&(g=!0,_=f>d?v[1]:v[0],y=n.getPixelFromCoordinate(_))):this.edge_&&(_=p?(0,r.closestOnCircle)(t,l[0].feature.getGeometry()):(0,r.closestOnSegment)(t,v),y=n.getPixelFromCoordinate(_),(0,r.distance)(e,y)<=this.pixelTolerance_&&(g=!0,this.vertex_&&!p&&(h=n.getPixelFromCoordinate(v[0]),c=n.getPixelFromCoordinate(v[1]),f=(0,r.squaredDistance)(y,h),d=(0,r.squaredDistance)(y,c),Math.sqrt(Math.min(f,d))<=this.pixelTolerance_&&(_=f>d?v[1]:v[0],y=n.getPixelFromCoordinate(_))))),g&&(y=[Math.round(y[0]),Math.round(y[1])])}return{snapped:g,vertex:_,vertexPixel:y}}},{key:"updateFeature_",value:function(e){this.removeFeature(e,!1),this.addFeature(e,!1)}},{key:"writeCircleGeometry_",value:function(e,t){for(var r=(0,s.fromCircle)(t).getCoordinates()[0],n=0,i=r.length-1;n<i;++n){var a=r.slice(n,n+2),u={feature:e,segment:a};this.rBush_.insert((0,o.boundingExtent)(a),u)}}},{key:"writeGeometryCollectionGeometry_",value:function(e,t){for(var r=t.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i.call(this,e,r[n])}}},{key:"writeLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length-1;n<i;++n){var a=r.slice(n,n+2),u={feature:e,segment:a};this.rBush_.insert((0,o.boundingExtent)(a),u)}}},{key:"writeMultiLineStringGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],u=0,s=a.length-1;u<s;++u){var l=a.slice(u,u+2),h={feature:e,segment:l};this.rBush_.insert((0,o.boundingExtent)(l),h)}}},{key:"writeMultiPointGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}},{key:"writeMultiPolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],u=0,s=a.length;u<s;++u)for(var l=a[u],h=0,c=l.length-1;h<c;++h){var f=l.slice(h,h+2),d={feature:e,segment:f};this.rBush_.insert((0,o.boundingExtent)(f),d)}}},{key:"writePointGeometry_",value:function(e,t){var r=t.getCoordinates(),n={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),n)}},{key:"writePolygonGeometry_",value:function(e,t){for(var r=t.getCoordinates(),n=0,i=r.length;n<i;++n)for(var a=r[n],u=0,s=a.length-1;u<s;++u){var l=a.slice(u,u+2),h={feature:e,segment:l};this.rBush_.insert((0,o.boundingExtent)(l),h)}}}]),g}();function T(e,t){return(0,r.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment)-(0,r.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment)}var G=P;exports.default=G;
},{"../util.js":"MHZC","../CollectionEventType.js":"XSCF","../coordinate.js":"Gkmg","../events.js":"sgxS","../events/EventType.js":"KZbn","../extent.js":"+QKI","../functions.js":"bH9H","../geom/GeometryType.js":"mFnd","../geom/Polygon.js":"mzg3","./Pointer.js":"8Z00","../obj.js":"dV1Q","../source/VectorEventType.js":"aW0u","../structs/RBush.js":"aHUZ"}],"/Qt6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TranslateEvent=void 0;var e=s(require("../Collection.js")),t=require("../Object.js"),r=require("../events.js"),n=s(require("../events/Event.js")),a=require("../functions.js"),i=require("../array.js"),o=s(require("./Pointer.js")),l=s(require("./Property.js"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}function h(e,t,r){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=p(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},E=function(e){function t(e,r,n){var a;return v(this,t),(a=d(this,_(t).call(this,e))).features=r,a.coordinate=n,a}return b(t,n.default),t}();exports.TranslateEvent=E;var A=function(n){function s(e){var n;v(this,s);var o,u=e||{};if((n=d(this,_(s).call(this,u))).lastCoordinate_=null,n.features_=void 0!==u.features?u.features:null,u.layers)if("function"==typeof u.layers)o=u.layers;else{var c=u.layers;o=function(e){return(0,i.includes)(c,e)}}else o=a.TRUE;return n.layerFilter_=o,n.hitTolerance_=u.hitTolerance?u.hitTolerance:0,n.lastFeature_=null,(0,r.listen)(y(n),(0,t.getChangeEventType)(l.default.ACTIVE),n.handleActiveChanged_,y(n)),n}return b(s,o.default),f(s,[{key:"handleDownEvent",value:function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var r=this.features_||new e.default([this.lastFeature_]);return this.dispatchEvent(new E(T.TRANSLATESTART,r,t.coordinate)),!0}return!1}},{key:"handleUpEvent",value:function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var r=this.features_||new e.default([this.lastFeature_]);return this.dispatchEvent(new E(T.TRANSLATEEND,r,t.coordinate)),!0}return!1}},{key:"handleDragEvent",value:function(t){if(this.lastCoordinate_){var r=t.coordinate,n=r[0]-this.lastCoordinate_[0],a=r[1]-this.lastCoordinate_[1],i=this.features_||new e.default([this.lastFeature_]);i.forEach(function(e){var t=e.getGeometry();t.translate(n,a),e.setGeometry(t)}),this.lastCoordinate_=r,this.dispatchEvent(new E(T.TRANSLATING,i,r))}}},{key:"handleMoveEvent",value:function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")}},{key:"featuresAtPixel_",value:function(e,t){return t.forEachFeatureAtPixel(e,function(e){if(!this.features_||(0,i.includes)(this.features_.getArray(),e))return e}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}},{key:"getHitTolerance",value:function(){return this.hitTolerance_}},{key:"setHitTolerance",value:function(e){this.hitTolerance_=e}},{key:"setMap",value:function(e){var t=this.getMap();h(_(s.prototype),"setMap",this).call(this,e),this.updateState_(t)}},{key:"handleActiveChanged_",value:function(){this.updateState_(null)}},{key:"updateState_",value:function(e){var t=this.getMap(),r=this.getActive();t&&r||(t=t||e)&&t.getViewport().classList.remove("ol-grab","ol-grabbing")}}]),s}(),j=A;exports.default=j;
},{"../Collection.js":"dXq/","../Object.js":"luFO","../events.js":"sgxS","../events/Event.js":"nz3i","../functions.js":"bH9H","../array.js":"YQ1M","./Pointer.js":"8Z00","./Property.js":"0oFU"}],"6yv/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaults=O,Object.defineProperty(exports,"DoubleClickZoom",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"DragPan",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"DragRotate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"DragZoom",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(exports,"KeyboardPan",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"KeyboardZoom",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"MouseWheelZoom",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"PinchRotate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(exports,"PinchZoom",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"DragAndDrop",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(exports,"DragBox",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(exports,"DragRotateAndZoom",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(exports,"Draw",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(exports,"Extent",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(exports,"Interaction",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(exports,"Modify",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(exports,"Pointer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(exports,"Select",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(exports,"Snap",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(exports,"Translate",{enumerable:!0,get:function(){return h.default}});var e=q(require("./Collection.js")),t=q(require("./Kinetic.js")),r=q(require("./interaction/DoubleClickZoom.js")),n=q(require("./interaction/DragPan.js")),o=q(require("./interaction/DragRotate.js")),i=q(require("./interaction/DragZoom.js")),u=q(require("./interaction/KeyboardPan.js")),a=q(require("./interaction/KeyboardZoom.js")),d=q(require("./interaction/MouseWheelZoom.js")),c=q(require("./interaction/PinchRotate.js")),f=q(require("./interaction/PinchZoom.js")),l=require("./events/condition.js"),s=q(require("./interaction/DragAndDrop.js")),p=q(require("./interaction/DragBox.js")),b=q(require("./interaction/DragRotateAndZoom.js")),m=q(require("./interaction/Draw.js")),j=q(require("./interaction/Extent.js")),g=q(require("./interaction/Interaction.js")),P=q(require("./interaction/Modify.js")),y=q(require("./interaction/Pointer.js")),D=q(require("./interaction/Select.js")),x=q(require("./interaction/Snap.js")),h=q(require("./interaction/Translate.js"));function q(e){return e&&e.__esModule?e:{default:e}}function O(s){var p=s||{},b=new e.default,m=new t.default(-.005,.05,100);return(void 0===p.altShiftDragRotate||p.altShiftDragRotate)&&b.push(new o.default),(void 0===p.doubleClickZoom||p.doubleClickZoom)&&b.push(new r.default({delta:p.zoomDelta,duration:p.zoomDuration})),(void 0===p.dragPan||p.dragPan)&&b.push(new n.default({condition:p.onFocusOnly?l.focus:void 0,kinetic:m})),(void 0===p.pinchRotate||p.pinchRotate)&&b.push(new c.default),(void 0===p.pinchZoom||p.pinchZoom)&&b.push(new f.default({duration:p.zoomDuration})),(void 0===p.keyboard||p.keyboard)&&(b.push(new u.default),b.push(new a.default({delta:p.zoomDelta,duration:p.zoomDuration}))),(void 0===p.mouseWheelZoom||p.mouseWheelZoom)&&b.push(new d.default({condition:p.onFocusOnly?l.focus:void 0,duration:p.zoomDuration})),(void 0===p.shiftDragZoom||p.shiftDragZoom)&&b.push(new i.default({duration:p.zoomDuration})),b}
},{"./Collection.js":"dXq/","./Kinetic.js":"JXB6","./interaction/DoubleClickZoom.js":"z5pr","./interaction/DragPan.js":"EijA","./interaction/DragRotate.js":"h/kW","./interaction/DragZoom.js":"1MWs","./interaction/KeyboardPan.js":"BZBb","./interaction/KeyboardZoom.js":"HgHC","./interaction/MouseWheelZoom.js":"oIqQ","./interaction/PinchRotate.js":"vgD5","./interaction/PinchZoom.js":"PtbH","./events/condition.js":"2Mo3","./interaction/DragAndDrop.js":"wb9I","./interaction/DragBox.js":"108G","./interaction/DragRotateAndZoom.js":"Xao7","./interaction/Draw.js":"6VJd","./interaction/Extent.js":"ipBJ","./interaction/Interaction.js":"OY0/","./interaction/Modify.js":"BQSr","./interaction/Pointer.js":"8Z00","./interaction/Select.js":"mnul","./interaction/Snap.js":"tVLB","./interaction/Translate.js":"/Qt6"}],"hetI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("./PluggableMap.js")),t=require("./control.js"),r=require("./interaction.js"),n=require("./obj.js"),o=u(require("./renderer/Composite.js"));function u(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function a(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(u){function i(e){return c(this,i),(e=(0,n.assign)({},e)).controls||(e.controls=(0,t.defaults)()),e.interactions||(e.interactions=(0,r.defaults)()),a(this,p(i).call(this,e))}return y(i,e.default),l(i,[{key:"createRenderer",value:function(){return new o.default(this)}}]),i}(),j=d;exports.default=j;
},{"./PluggableMap.js":"9d4m","./control.js":"srnd","./interaction.js":"6yv/","./obj.js":"dV1Q","./renderer/Composite.js":"GpA7"}],"kYcM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.BufferUsage=void 0;var e=require("../webgl.js");function r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function t(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var a={STATIC_DRAW:e.STATIC_DRAW,STREAM_DRAW:e.STREAM_DRAW,DYNAMIC_DRAW:e.DYNAMIC_DRAW};exports.BufferUsage=a;var u=function(){function e(t,n){r(this,e),this.arr_=void 0!==t?t:[],this.usage_=void 0!==n?n:a.STATIC_DRAW}return n(e,[{key:"getArray",value:function(){return this.arr_}},{key:"getUsage",value:function(){return this.usage_}}]),e}(),o=u;exports.default=o;
},{"../webgl.js":"quWH"}],"Hive":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};exports.default=e;
},{}],"PmPl":[function(require,module,exports) {
"use strict";function e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(e,r){return e[0]=r[0],e[1]=r[1],e[4]=r[2],e[5]=r[3],e[12]=r[4],e[13]=r[5],e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=e,exports.fromTransform=r;
},{}],"nuIB":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",i="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n",n=function(){function r(t){e(this,r),this.gl_=t.webGlContext;var n=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=n.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=n.createFramebuffer();var o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,t.vertexShader||a),n.compileShader(o);var u=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(u,t.fragmentShader||i),n.compileShader(u),this.renderTargetProgram_=n.createProgram(),n.attachShader(this.renderTargetProgram_,o),n.attachShader(this.renderTargetProgram_,u),n.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),n.STATIC_DRAW),this.renderTargetAttribLocation_=n.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=n.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(e){this.uniforms_.push({value:t.uniforms[e],location:n.getUniformLocation(this.renderTargetProgram_,e)})}.bind(this))}return t(r,[{key:"getGL",value:function(){return this.gl_}},{key:"init",value:function(e){var r=this.getGL(),t=r.canvas,a=e.size;if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,t.width*this.scaleRatio_,t.height*this.scaleRatio_),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==a[0]||this.renderTargetTextureSize_[1]!==a[1]){this.renderTargetTextureSize_=a;var i=r.RGBA,n=r.RGBA,o=r.UNSIGNED_BYTE;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,0,i,t.width*this.scaleRatio_,t.height*this.scaleRatio_,0,n,o,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}}},{key:"apply",value:function(e,r){var t=this.getGL(),a=t.canvas;t.bindFramebuffer(t.FRAMEBUFFER,r?r.getFrameBuffer():null),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.renderTargetTexture_),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.viewport(0,0,a.width,a.height),t.bindBuffer(t.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),t.useProgram(this.renderTargetProgram_),t.enableVertexAttribArray(this.renderTargetAttribLocation_),t.vertexAttribPointer(this.renderTargetAttribLocation_,2,t.FLOAT,!1,0,0),t.uniform2f(this.renderTargetUniformLocation_,a.width,a.height),t.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(e),t.drawArrays(t.TRIANGLES,0,6)}},{key:"getFrameBuffer",value:function(){return this.frameBuffer_}},{key:"applyUniforms",value:function(e){var r,t=this.getGL(),a=1;this.uniforms_.forEach(function(i){if((r="function"==typeof i.value?i.value(e):i.value)instanceof HTMLCanvasElement||r instanceof ImageData)i.texture||(i.texture=t.createTexture()),t.activeTexture(t["TEXTURE".concat(a)]),t.bindTexture(t.TEXTURE_2D,i.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r instanceof ImageData?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,r.width,r.height,0,t.UNSIGNED_BYTE,new Uint8Array(r.data)):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),t.uniform1i(i.location,a++);else if(Array.isArray(r))switch(r.length){case 2:return void t.uniform2f(i.location,r[0],r[1]);case 3:return void t.uniform3f(i.location,r[0],r[1],r[2]);case 4:return void t.uniform4f(i.location,r[0],r[1],r[2],r[3]);default:return}else"number"==typeof r&&t.uniform1f(i.location,r)})}}]),r}(),o=n;exports.default=o;
},{}],"pAiM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DefaultAttrib=exports.DefaultUniform=exports.ShaderType=void 0;var e=require("../util.js"),t=require("../webgl.js"),r=c(require("../Disposable.js")),a=require("../array.js"),n=require("../events.js"),i=require("../obj.js"),o=c(require("../webgl/ContextEventType.js")),s=require("../transform.js"),u=require("../vec/mat4.js"),f=c(require("./PostProcessingPass.js"));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t,r){return t&&_(e.prototype,t),r&&_(e,r),e}function E(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?v(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g={FRAGMENT_SHADER:35632,VERTEX_SHADER:35633};exports.ShaderType=g;var y={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix"};exports.DefaultUniform=y;var R={POSITION:"a_position",TEX_COORD:"a_texCoord",OPACITY:"a_opacity",ROTATE_WITH_VIEW:"a_rotateWithView",OFFSETS:"a_offsets",COLOR:"a_color"};exports.DefaultAttrib=R;var b=function(c){function l(e){var r;h(this,l);var i=e||{};(r=E(this,T(l).call(this))).canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.gl_=(0,t.getContext)(r.canvas_);var c=r.getGL();if(r.bufferCache_={},r.shaderCache_=[],r.programCache_=[],r.currentProgram_=null,r.hasOESElementIndexUint=(0,a.includes)(t.EXTENSIONS,"OES_element_index_uint"),r.hasOESElementIndexUint&&c.getExtension("OES_element_index_uint"),(0,n.listen)(r.canvas_,o.default.LOST,r.handleWebGLContextLost,v(r)),(0,n.listen)(r.canvas_,o.default.RESTORED,r.handleWebGLContextRestored,v(r)),r.offsetRotateMatrix_=(0,s.create)(),r.offsetScaleMatrix_=(0,s.create)(),r.tmpMat4_=(0,u.create)(),r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],i.uniforms)for(var _ in i.uniforms)r.uniforms_.push({name:_,value:i.uniforms[_]});return r.postProcessPasses_=i.postProcesses?i.postProcesses.map(function(e){return new f.default({webGlContext:c,scaleRatio:e.scaleRatio,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms})}):[new f.default({webGlContext:c})],r.shaderCompileErrors_=null,r}return p(l,r.default),m(l,[{key:"bindBuffer",value:function(t,r){var a=this.getGL(),n=(0,e.getUid)(r),i=this.bufferCache_[n];if(!i){var o=a.createBuffer();i=this.bufferCache_[n]={buffer:r,webGlBuffer:o}}a.bindBuffer(t,i.webGlBuffer)}},{key:"flushBufferData",value:function(e,r){var a,n=this.getGL(),i=r.getArray();this.bindBuffer(e,r),e==t.ARRAY_BUFFER?a=new Float32Array(i):e==t.ELEMENT_ARRAY_BUFFER&&(a=this.hasOESElementIndexUint?new Uint32Array(i):new Uint16Array(i)),n.bufferData(e,a,r.getUsage())}},{key:"deleteBuffer",value:function(t){var r=this.getGL(),a=(0,e.getUid)(t),n=this.bufferCache_[a];r.isContextLost()||r.deleteBuffer(n.buffer),delete this.bufferCache_[a]}},{key:"disposeInternal",value:function(){(0,n.unlistenAll)(this.canvas_);var e=this.getGL();if(!e.isContextLost()){for(var t in this.bufferCache_)e.deleteBuffer(this.bufferCache_[t].buffer);for(var r in this.programCache_)e.deleteProgram(this.programCache_[r]);for(var a in this.shaderCache_)e.deleteShader(this.shaderCache_[a])}}},{key:"prepareDraw",value:function(e){var t=this.getGL(),r=this.getCanvas(),a=e.size,n=e.pixelRatio;r.width=a[0]*n,r.height=a[1]*n,r.style.width=a[0]+"px",r.style.height=a[1]+"px",t.useProgram(this.currentProgram_);for(var i=this.postProcessPasses_.length-1;i>=0;i--)this.postProcessPasses_[i].init(e);t.bindTexture(t.TEXTURE_2D,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.applyFrameState(e),this.applyUniforms(e)}},{key:"drawElements",value:function(e,t){var r=this.getGL(),a=this.hasOESElementIndexUint?r.UNSIGNED_INT:r.UNSIGNED_SHORT,n=t-e,i=e*(this.hasOESElementIndexUint?4:2);r.drawElements(r.TRIANGLES,n,a,i)}},{key:"finalizeDraw",value:function(e){for(var t=0;t<this.postProcessPasses_.length;t++)this.postProcessPasses_[t].apply(e,this.postProcessPasses_[t+1]||null)}},{key:"getCanvas",value:function(){return this.canvas_}},{key:"getGL",value:function(){return this.gl_}},{key:"applyFrameState",value:function(e){var t=e.size,r=e.viewState.rotation,a=(0,s.reset)(this.offsetScaleMatrix_);(0,s.scale)(a,2/t[0],2/t[1]);var n=(0,s.reset)(this.offsetRotateMatrix_);0!==r&&(0,s.rotate)(n,-r),this.setUniformMatrixValue(y.OFFSET_SCALE_MATRIX,(0,u.fromTransform)(this.tmpMat4_,a)),this.setUniformMatrixValue(y.OFFSET_ROTATION_MATRIX,(0,u.fromTransform)(this.tmpMat4_,n))}},{key:"applyUniforms",value:function(e){var t,r=this.getGL(),a=0;this.uniforms_.forEach(function(n){if((t="function"==typeof n.value?n.value(e):n.value)instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof ImageData)n.texture||(n.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(a)]),r.bindTexture(r.TEXTURE_2D,n.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.uniform1i(this.getUniformLocation(n.name),a++);else if(Array.isArray(t)&&6===t.length)this.setUniformMatrixValue(n.name,(0,u.fromTransform)(this.tmpMat4_,t));else if(Array.isArray(t)&&t.length<=4)switch(t.length){case 2:return void r.uniform2f(this.getUniformLocation(n.name),t[0],t[1]);case 3:return void r.uniform3f(this.getUniformLocation(n.name),t[0],t[1],t[2]);case 4:return void r.uniform4f(this.getUniformLocation(n.name),t[0],t[1],t[2],t[3]);default:return}else"number"==typeof t&&r.uniform1f(this.getUniformLocation(n.name),t)}.bind(this))}},{key:"useProgram",value:function(e){return e!=this.currentProgram_&&(this.getGL().useProgram(e),this.currentProgram_=e,this.uniformLocations_={},this.attribLocations_={},!0)}},{key:"compileShader",value:function(e,t){var r=this.getGL(),a=r.createShader(t);return r.shaderSource(a,e),r.compileShader(a),this.shaderCache_.push(a),a}},{key:"getProgram",value:function(e,t){var r=this.getGL(),a=this.compileShader(e,r.FRAGMENT_SHADER),n=this.compileShader(t,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(a)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n".concat(r.getShaderInfoLog(a))),r.getShaderInfoLog(n)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n".concat(r.getShaderInfoLog(n)));var i=r.createProgram();return r.attachShader(i,a),r.attachShader(i,n),r.linkProgram(i),this.programCache_.push(i),i}},{key:"getShaderCompileErrors",value:function(){return this.shaderCompileErrors_}},{key:"getUniformLocation",value:function(e){return void 0===this.uniformLocations_[e]&&(this.uniformLocations_[e]=this.getGL().getUniformLocation(this.currentProgram_,e)),this.uniformLocations_[e]}},{key:"getAttributeLocation",value:function(e){return void 0===this.attribLocations_[e]&&(this.attribLocations_[e]=this.getGL().getAttribLocation(this.currentProgram_,e)),this.attribLocations_[e]}},{key:"makeProjectionTransform",value:function(e,t){var r=e.size,a=e.viewState.rotation,n=e.viewState.resolution,i=e.viewState.center;return(0,s.reset)(t),(0,s.scale)(t,2/(n*r[0]),2/(n*r[1])),(0,s.rotate)(t,-a),(0,s.translate)(t,-i[0],-i[1]),t}},{key:"setUniformFloatValue",value:function(e,t){this.getGL().uniform1f(this.getUniformLocation(e),t)}},{key:"setUniformMatrixValue",value:function(e,t){this.getGL().uniformMatrix4fv(this.getUniformLocation(e),!1,t)}},{key:"enableAttributeArray",value:function(e,t,r,a,n){var i=this.getAttributeLocation(e);i<0||(this.getGL().enableVertexAttribArray(i),this.getGL().vertexAttribPointer(i,t,r,!1,a,n))}},{key:"handleWebGLContextLost",value:function(){(0,i.clear)(this.bufferCache_),(0,i.clear)(this.shaderCache_),(0,i.clear)(this.programCache_),this.currentProgram_=null}},{key:"handleWebGLContextRestored",value:function(){}},{key:"createTextureInternal",value:function(e,r){var a=this.getGL(),n=a.createTexture();return a.bindTexture(a.TEXTURE_2D,n),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),void 0!==e&&a.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,e),void 0!==r&&a.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,r),n}},{key:"createEmptyTexture",value:function(e,t,r,a){var n=this.getGL(),i=this.createTextureInternal(r,a);return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,e,t,0,n.RGBA,n.UNSIGNED_BYTE,null),i}},{key:"createTexture",value:function(e,t,r){var a=this.getGL(),n=this.createTextureInternal(t,r);return a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),n}}]),l}(),L=b;exports.default=L;
},{"../util.js":"MHZC","../webgl.js":"quWH","../Disposable.js":"1A8/","../array.js":"YQ1M","../events.js":"sgxS","../obj.js":"dV1Q","../webgl/ContextEventType.js":"Hive","../transform.js":"eGRU","../vec/mat4.js":"PmPl","./PostProcessingPass.js":"nuIB"}],"5QDx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pushFeatureToBuffer=g,exports.getBlankTexture=v,exports.default=void 0;var e=r(require("../Layer.js")),t=r(require("../../webgl/Helper.js"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=c(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(r){function o(e,r){var u;n(this,o);var a=r||{};return(u=p(this,l(o).call(this,e))).helper_=new t.default({postProcesses:a.postProcesses,uniforms:a.uniforms}),u}return f(o,e.default),a(o,[{key:"disposeInternal",value:function(){s(l(o.prototype),"disposeInternal",this).call(this)}},{key:"getShaderCompileErrors",value:function(){return this.helper_.getShaderCompileErrors()}}]),o}();function g(e,t,r,o){if(r.geometry)switch(r.geometry.type){case"Point":return void b(e,t,r,o);default:return}}var d=[];function b(e,t,r,o){var n=12+(void 0!==o?o.length:0),u=r.geometry.coordinates[0],a=r.geometry.coordinates[1],p=r.properties.u0,i=r.properties.v0,s=r.properties.u1,c=r.properties.v1,l=r.properties.size,f=r.properties.opacity,y=r.properties.rotateWithView,h=r.properties.color,g=h[0],b=h[1],v=h[2],m=h[3],O=e.getArray().length/n,w=d;w.length=o?o.length:0;for(var A=0;A<w.length;A++)w[A]=parseFloat(r.properties[o[A]])||0;e.getArray().push(u,a,-l/2,-l/2,p,i,f,y,g,b,v,m),Array.prototype.push.apply(e.getArray(),w),e.getArray().push(u,a,+l/2,-l/2,s,i,f,y,g,b,v,m),Array.prototype.push.apply(e.getArray(),w),e.getArray().push(u,a,+l/2,+l/2,s,c,f,y,g,b,v,m),Array.prototype.push.apply(e.getArray(),w),e.getArray().push(u,a,-l/2,+l/2,p,c,f,y,g,b,v,m),Array.prototype.push.apply(e.getArray(),w),t.getArray().push(O,O+1,O+3,O+1,O+2,O+3)}function v(){var e=document.createElement("canvas").getContext("2d").createImageData(1,1);return e.data[0]=e.data[1]=e.data[2]=e.data[3]=255,e}var m=h;exports.default=m;
},{"../Layer.js":"ACNx","../../webgl/Helper.js":"pAiM"}],"fTaC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transformGeometryWithOptions=c,exports.transformExtentWithOptions=l,exports.default=void 0;var t=require("../obj.js"),e=require("../util.js"),r=require("../proj.js");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t}var u=function(){function r(){n(this,r),this.dataProjection=null,this.defaultFeatureProjection=null}return o(r,[{key:"getReadOptions",value:function(t,e){var r;return e&&(r={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(r)}},{key:"adaptOptions",value:function(e){return(0,t.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},e)}},{key:"getType",value:function(){return(0,e.abstract)()}},{key:"readFeature",value:function(t,r){return(0,e.abstract)()}},{key:"readFeatures",value:function(t,r){return(0,e.abstract)()}},{key:"readGeometry",value:function(t,r){return(0,e.abstract)()}},{key:"readProjection",value:function(t){return(0,e.abstract)()}},{key:"writeFeature",value:function(t,r){return(0,e.abstract)()}},{key:"writeFeatures",value:function(t,r){return(0,e.abstract)()}},{key:"writeGeometry",value:function(t,r){return(0,e.abstract)()}}]),r}(),i=u;function c(t,e,n){var a,o=n?(0,r.get)(n.featureProjection):null,u=n?(0,r.get)(n.dataProjection):null;if(a=o&&u&&!(0,r.equivalent)(o,u)?(e?t.clone():t).transform(e?o:u,e?u:o):t,e&&n&&void 0!==n.decimals){var i=Math.pow(10,n.decimals);a===t&&(a=t.clone()),a.applyTransform(function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*i)/i;return t})}return a}function l(t,e){var n=e?(0,r.get)(e.featureProjection):null,a=e?(0,r.get)(e.dataProjection):null;return n&&a&&!(0,r.equivalent)(n,a)?(0,r.transformExtent)(t,a,n):t}exports.default=i;
},{"../obj.js":"dV1Q","../util.js":"MHZC","../proj.js":"5Zkk"}],"8lOX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=n(require("./Feature.js")),r=n(require("./FormatType.js"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(n){function o(){return u(this,o),c(this,s(o).call(this))}return l(o,t.default),a(o,[{key:"getType",value:function(){return r.default.JSON}},{key:"readFeature",value:function(e,t){return this.readFeatureFromObject(p(e),this.getReadOptions(e,t))}},{key:"readFeatures",value:function(e,t){return this.readFeaturesFromObject(p(e),this.getReadOptions(e,t))}},{key:"readFeatureFromObject",value:function(t,r){return(0,e.abstract)()}},{key:"readFeaturesFromObject",value:function(t,r){return(0,e.abstract)()}},{key:"readGeometry",value:function(e,t){return this.readGeometryFromObject(p(e),this.getReadOptions(e,t))}},{key:"readGeometryFromObject",value:function(t,r){return(0,e.abstract)()}},{key:"readProjection",value:function(e){return this.readProjectionFromObject(p(e))}},{key:"readProjectionFromObject",value:function(t){return(0,e.abstract)()}},{key:"writeFeature",value:function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}},{key:"writeFeatureObject",value:function(t,r){return(0,e.abstract)()}},{key:"writeFeatures",value:function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}},{key:"writeFeaturesObject",value:function(t,r){return(0,e.abstract)()}},{key:"writeGeometry",value:function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}},{key:"writeGeometryObject",value:function(t,r){return(0,e.abstract)()}}]),o}();function p(e){if("string"==typeof e){var t=JSON.parse(e);return t||null}return null!==e?e:null}var O=b;exports.default=O;
},{"../util.js":"MHZC","./Feature.js":"fTaC","./FormatType.js":"ifVj"}],"ugg5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=s(require("../events/EventType.js")),r=require("../extent.js"),n=s(require("./Geometry.js")),i=s(require("./GeometryType.js")),o=require("../obj.js");function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return(y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=m(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(s){function u(e){var t;return a(this,u),(t=c(this,g(u).call(this))).geometries_=e||null,t.listenGeometriesChange_(),t}return p(u,n.default),f(u,[{key:"unlistenGeometriesChange_",value:function(){if(this.geometries_)for(var r=0,n=this.geometries_.length;r<n;++r)(0,e.unlisten)(this.geometries_[r],t.default.CHANGE,this.changed,this)}},{key:"listenGeometriesChange_",value:function(){if(this.geometries_)for(var r=0,n=this.geometries_.length;r<n;++r)(0,e.listen)(this.geometries_[r],t.default.CHANGE,this.changed,this)}},{key:"clone",value:function(){var e=new u(null);return e.setGeometries(this.geometries_),e}},{key:"closestPointXY",value:function(e,t,n,i){if(i<(0,r.closestSquaredDistanceXY)(this.getExtent(),e,t))return i;for(var o=this.geometries_,s=0,u=o.length;s<u;++s)i=o[s].closestPointXY(e,t,n,i);return i}},{key:"containsXY",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(e,t))return!0;return!1}},{key:"computeExtent",value:function(e){(0,r.createOrUpdateEmpty)(e);for(var t=this.geometries_,n=0,i=t.length;n<i;++n)(0,r.extend)(e,t[n].getExtent());return e}},{key:"getGeometries",value:function(){return _(this.geometries_)}},{key:"getGeometriesArray",value:function(){return this.geometries_}},{key:"getSimplifiedGeometry",value:function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&((0,o.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];for(var r=[],n=this.geometries_,i=!1,s=0,a=n.length;s<a;++s){var l=n[s],f=l.getSimplifiedGeometry(e);r.push(f),f!==l&&(i=!0)}if(i){var c=new u(null);return c.setGeometriesArray(r),this.simplifiedGeometryCache[t]=c,c}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}},{key:"getType",value:function(){return i.default.GEOMETRY_COLLECTION}},{key:"intersectsExtent",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)if(t[r].intersectsExtent(e))return!0;return!1}},{key:"isEmpty",value:function(){return 0===this.geometries_.length}},{key:"rotate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(e,t);this.changed()}},{key:"scale",value:function(e,t,n){var i=n;i||(i=(0,r.getCenter)(this.getExtent()));for(var o=this.geometries_,s=0,u=o.length;s<u;++s)o[s].scale(e,t,i);this.changed()}},{key:"setGeometries",value:function(e){this.setGeometriesArray(_(e))}},{key:"setGeometriesArray",value:function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}},{key:"applyTransform",value:function(e){for(var t=this.geometries_,r=0,n=t.length;r<n;++r)t[r].applyTransform(e);this.changed()}},{key:"translate",value:function(e,t){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(e,t);this.changed()}},{key:"disposeInternal",value:function(){this.unlistenGeometriesChange_(),y(g(u.prototype),"disposeInternal",this).call(this)}}]),u}();function _(e){for(var t=[],r=0,n=e.length;r<n;++r)t.push(e[r].clone());return t}var G=d;exports.default=G;
},{"../events.js":"sgxS","../events/EventType.js":"KZbn","../extent.js":"+QKI","./Geometry.js":"lnvX","./GeometryType.js":"mFnd","../obj.js":"dV1Q"}],"JzRX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=p(require("../Feature.js")),r=require("./Feature.js"),o=p(require("./JSONFeature.js")),n=p(require("../geom/GeometryCollection.js")),a=p(require("../geom/LineString.js")),u=p(require("../geom/MultiLineString.js")),i=p(require("../geom/MultiPoint.js")),s=p(require("../geom/MultiPolygon.js")),c=p(require("../geom/Point.js")),f=p(require("../geom/Polygon.js")),l=require("../obj.js"),y=require("../proj.js"),d=p(require("../geom/GeometryType.js"));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function O(e,t,r){return t&&b(e.prototype,t),r&&b(e,r),e}function j(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=function(r){function n(e){var t;g(this,n);var r=e||{};return(t=j(this,P(n).call(this))).dataProjection=(0,y.get)(r.dataProjection?r.dataProjection:"EPSG:4326"),r.featureProjection&&(t.defaultFeatureProjection=(0,y.get)(r.featureProjection)),t.geometryName_=r.geometryName,t.extractGeometryName_=r.extractGeometryName,t}return h(n,o.default),O(n,[{key:"readFeatureFromObject",value:function(e,r){var o=null,n=G((o="Feature"===e.type?e:{type:"Feature",geometry:e,properties:null}).geometry,r),a=new t.default;return this.geometryName_?a.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in o!==void 0&&a.setGeometryName(o.geometry_name),a.setGeometry(n),"id"in o&&a.setId(o.id),o.properties&&a.setProperties(o.properties,!0),a}},{key:"readFeaturesFromObject",value:function(e,t){var r=null;if("FeatureCollection"===e.type){r=[];for(var o=e.features,n=0,a=o.length;n<a;++n)r.push(this.readFeatureFromObject(o[n],t))}else r=[this.readFeatureFromObject(e,t)];return r}},{key:"readGeometryFromObject",value:function(e,t){return G(e,t)}},{key:"readProjectionFromObject",value:function(t){var r,o=t.crs;return o?"name"==o.type?r=(0,y.get)(o.properties.name):(0,e.assert)(!1,36):r=this.dataProjection,r}},{key:"writeFeatureObject",value:function(e,t){t=this.adaptOptions(t);var r={type:"Feature",geometry:null,properties:null},o=e.getId();void 0!==o&&(r.id=o);var n=e.getGeometry();n&&(r.geometry=E(n,t));var a=e.getProperties();return delete a[e.getGeometryName()],(0,l.isEmpty)(a)||(r.properties=a),r}},{key:"writeFeaturesObject",value:function(e,t){t=this.adaptOptions(t);for(var r=[],o=0,n=e.length;o<n;++o)r.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:r}}},{key:"writeGeometryObject",value:function(e,t){return E(e,this.adaptOptions(t))}}]),n}();function G(e,t){if(!e)return null;var o;switch(e.type){case d.default.POINT:o=k(e);break;case d.default.LINE_STRING:o=I(e);break;case d.default.POLYGON:o=C(e);break;case d.default.MULTI_POINT:o=F(e);break;case d.default.MULTI_LINE_STRING:o=L(e);break;case d.default.MULTI_POLYGON:o=T(e);break;case d.default.GEOMETRY_COLLECTION:o=w(e);break;default:throw new Error("Unsupported GeoJSON type: "+e.type)}return(0,r.transformGeometryWithOptions)(o,!1,t)}function w(e,t){var r=e.geometries.map(function(e){return G(e,t)});return new n.default(r)}function k(e){return new c.default(e.coordinates)}function I(e){return new a.default(e.coordinates)}function L(e){return new u.default(e.coordinates)}function F(e){return new i.default(e.coordinates)}function T(e){return new s.default(e.coordinates)}function C(e){return new f.default(e.coordinates)}function E(e,t){var o,n=(e=(0,r.transformGeometryWithOptions)(e,!0,t)).getType();switch(n){case d.default.POINT:o=x(e,t);break;case d.default.LINE_STRING:o=M(e,t);break;case d.default.POLYGON:o=Y(e,t);break;case d.default.MULTI_POINT:o=R(e,t);break;case d.default.MULTI_LINE_STRING:o=q(e,t);break;case d.default.MULTI_POLYGON:o=U(e,t);break;case d.default.GEOMETRY_COLLECTION:o=S(e,t);break;case d.default.CIRCLE:o={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return o}function S(e,t){return{type:"GeometryCollection",geometries:e.getGeometriesArray().map(function(e){var r=(0,l.assign)({},t);return delete r.featureProjection,E(e,r)})}}function M(e,t){return{type:"LineString",coordinates:e.getCoordinates()}}function q(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}}function R(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}}function U(e,t){var r;return t&&(r=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(r)}}function x(e,t){return{type:"Point",coordinates:e.getCoordinates()}}function Y(e,t){var r;return t&&(r=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(r)}}var H=N;exports.default=H;
},{"../asserts.js":"d7gk","../Feature.js":"wUQb","./Feature.js":"fTaC","./JSONFeature.js":"8lOX","../geom/GeometryCollection.js":"ugg5","../geom/LineString.js":"Y6IR","../geom/MultiLineString.js":"N5a8","../geom/MultiPoint.js":"C72u","../geom/MultiPolygon.js":"gjfC","../geom/Point.js":"phv5","../geom/Polygon.js":"mzg3","../obj.js":"dV1Q","../proj.js":"5Zkk","../geom/GeometryType.js":"mFnd"}],"f10x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=c(require("../../webgl/Buffer.js")),t=require("../../webgl.js"),r=require("../../webgl/Helper.js"),o=c(require("../../geom/GeometryType.js")),i=f(require("./Layer.js")),a=c(require("../../format/GeoJSON.js")),n=require("../../util.js"),s=c(require("../../ViewHint.js")),u=require("../../extent.js"),l=require("../../transform.js");function f(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,r){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=g(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(r):i.value}})(e,t,r||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O="\n  precision mediump float;\n  attribute vec2 a_position;\n  attribute vec2 a_texCoord;\n  attribute float a_rotateWithView;\n  attribute vec2 a_offsets;\n  attribute float a_opacity;\n  attribute vec4 a_color;\n\n  uniform mat4 u_projectionMatrix;\n  uniform mat4 u_offsetScaleMatrix;\n  uniform mat4 u_offsetRotateMatrix;\n\n  varying vec2 v_texCoord;\n  varying float v_opacity;\n  varying vec4 v_color;\n\n  void main(void) {\n    mat4 offsetMatrix = u_offsetScaleMatrix;\n    if (a_rotateWithView == 1.0) {\n      offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n    }\n    vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n    gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n    v_texCoord = a_texCoord;\n    v_opacity = a_opacity;\n    v_color = a_color;\n  }",x="\n  precision mediump float;\n\n  uniform sampler2D u_texture;\n\n  varying vec2 v_texCoord;\n  varying float v_opacity;\n  varying vec4 v_color;\n\n  void main(void) {\n    if (v_opacity == 0.0) {\n      discard;\n    }\n    vec4 textureColor = texture2D(u_texture, v_texCoord);\n    gl_FragColor = v_color * textureColor;\n    gl_FragColor.a *= v_opacity;\n    gl_FragColor.rgb *= gl_FragColor.a;\n  }",T=function(f){function c(o,n){var s;p(this,c);var f=n||{},_=f.uniforms||{};_.u_texture=f.texture||(0,i.getBlankTexture)();var h=(0,l.create)();return _[r.DefaultUniform.PROJECTION_MATRIX]=h,(s=v(this,m(c).call(this,o,{uniforms:_,postProcesses:f.postProcesses}))).sourceRevision_=-1,s.verticesBuffer_=new e.default([],t.DYNAMIC_DRAW),s.indicesBuffer_=new e.default([],t.DYNAMIC_DRAW),s.program_=s.helper_.getProgram(f.fragmentShader||x,f.vertexShader||O),s.helper_.useProgram(s.program_),s.sizeCallback_=f.sizeCallback||function(){return 1},s.coordCallback_=f.coordCallback||function(e,t){return e.getGeometry().getCoordinates()[t]},s.opacityCallback_=f.opacityCallback||function(){return 1},s.texCoordCallback_=f.texCoordCallback||function(e,t){return t<2?0:1},s.colorArray_=[1,1,1,1],s.colorCallback_=f.colorCallback||function(e,t){return this.colorArray_},s.rotateWithViewCallback_=f.rotateWithViewCallback||function(){return!1},s.geojsonFormat_=new a.default,s.geojsonFeatureCache_={},s.previousExtent_=(0,u.createEmpty)(),s.currentTransform_=h,s.renderTransform_=(0,l.create)(),s.invertRenderTransform_=(0,l.create)(),s}return C(c,i.default),y(c,[{key:"disposeInternal",value:function(){d(m(c.prototype),"disposeInternal",this).call(this)}},{key:"renderFrame",value:function(e){var t=e.layerStatesArray[e.layerIndex];this.helper_.drawElements(0,this.indicesBuffer_.getArray().length),this.helper_.finalizeDraw(e);var r=this.helper_.getCanvas(),o=t.opacity;return o!==parseFloat(r.style.opacity)&&(r.style.opacity=o),r}},{key:"prepareFrame",value:function(e){var o=this.getLayer().getSource(),i=e.viewState,a=this.sourceRevision_<o.getRevision();if(a){this.sourceRevision_=o.getRevision(),this.geojsonFeatureCache_={};var n=i.projection,f=i.resolution;o.loadFeatures([-1/0,-1/0,1/0,1/0],f,n)}var c=!e.viewHints[s.default.ANIMATING]&&!e.viewHints[s.default.INTERACTING],_=!(0,u.equals)(this.previousExtent_,e.extent);(a||_)&&c&&(this.rebuildBuffers_(e),this.previousExtent_=e.extent.slice()),this.helper_.makeProjectionTransform(e,this.currentTransform_),(0,l.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper_.prepareDraw(e),this.helper_.bindBuffer(t.ARRAY_BUFFER,this.verticesBuffer_),this.helper_.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_);var p=Float32Array.BYTES_PER_ELEMENT;return this.helper_.enableAttributeArray(r.DefaultAttrib.POSITION,2,t.FLOAT,12*p,0),this.helper_.enableAttributeArray(r.DefaultAttrib.OFFSETS,2,t.FLOAT,12*p,2*p),this.helper_.enableAttributeArray(r.DefaultAttrib.TEX_COORD,2,t.FLOAT,12*p,4*p),this.helper_.enableAttributeArray(r.DefaultAttrib.OPACITY,1,t.FLOAT,12*p,6*p),this.helper_.enableAttributeArray(r.DefaultAttrib.ROTATE_WITH_VIEW,1,t.FLOAT,12*p,7*p),this.helper_.enableAttributeArray(r.DefaultAttrib.COLOR,4,t.FLOAT,12*p,8*p),!0}},{key:"rebuildBuffers_",value:function(e){var r=this.getLayer().getSource();this.verticesBuffer_.getArray().length=0,this.indicesBuffer_.getArray().length=0,this.helper_.makeProjectionTransform(e,this.renderTransform_),(0,l.makeInverse)(this.invertRenderTransform_,this.renderTransform_);for(var a,s=r.getFeatures(),u=0;u<s.length;u++)if((a=s[u]).getGeometry()&&a.getGeometry().getType()===o.default.POINT){var f=this.geojsonFeatureCache_[(0,n.getUid)(a)];f||(f=this.geojsonFormat_.writeFeatureObject(a),this.geojsonFeatureCache_[(0,n.getUid)(a)]=f),f.geometry.coordinates[0]=this.coordCallback_(a,0),f.geometry.coordinates[1]=this.coordCallback_(a,1),(0,l.apply)(this.renderTransform_,f.geometry.coordinates),f.properties=f.properties||{},f.properties.color=this.colorCallback_(a,this.colorArray_),f.properties.u0=this.texCoordCallback_(a,0),f.properties.v0=this.texCoordCallback_(a,1),f.properties.u1=this.texCoordCallback_(a,2),f.properties.v1=this.texCoordCallback_(a,3),f.properties.size=this.sizeCallback_(a),f.properties.opacity=this.opacityCallback_(a),f.properties.rotateWithView=this.rotateWithViewCallback_(a)?1:0,(0,i.pushFeatureToBuffer)(this.verticesBuffer_,this.indicesBuffer_,f)}this.helper_.flushBufferData(t.ARRAY_BUFFER,this.verticesBuffer_),this.helper_.flushBufferData(t.ELEMENT_ARRAY_BUFFER,this.indicesBuffer_)}}]),c}(),j=T;exports.default=j;
},{"../../webgl/Buffer.js":"kYcM","../../webgl.js":"quWH","../../webgl/Helper.js":"pAiM","../../geom/GeometryType.js":"mFnd","./Layer.js":"5QDx","../../format/GeoJSON.js":"JzRX","../../util.js":"MHZC","../../ViewHint.js":"Lb7V","../../extent.js":"+QKI","../../transform.js":"eGRU"}],"9a1V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../events.js"),t=require("../Object.js"),n=require("../dom.js"),r=a(require("./Vector.js")),o=require("../obj.js"),i=a(require("../renderer/webgl/PointsLayer.js"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?v(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},y=["#00f","#0ff","#0f0","#ff0","#f00"],h=function(n){function a(n){var r;f(this,a);var i=n||{},u=(0,o.assign)({},i);delete u.gradient,delete u.radius,delete u.blur,delete u.weight,(r=c(this,d(a).call(this,u))).gradient_=null,(0,e.listen)(v(r),(0,t.getChangeEventType)(p.GRADIENT),r.handleGradientChanged_,v(r)),r.setGradient(i.gradient?i.gradient:y),r.setBlur(void 0!==i.blur?i.blur:15),r.setRadius(void 0!==i.radius?i.radius:8);var l=i.weight?i.weight:"weight";return r.weightFunction_="string"==typeof l?function(e){return e.get(l)}:l,r.setRenderOrder(null),r}return g(a,r.default),s(a,[{key:"getBlur",value:function(){return this.get(p.BLUR)}},{key:"getGradient",value:function(){return this.get(p.GRADIENT)}},{key:"getRadius",value:function(){return this.get(p.RADIUS)}},{key:"handleGradientChanged_",value:function(){this.gradient_=b(this.getGradient())}},{key:"setBlur",value:function(e){this.set(p.BLUR,e)}},{key:"setGradient",value:function(e){this.set(p.GRADIENT,e)}},{key:"setRadius",value:function(e){this.set(p.RADIUS,e)}},{key:"createRenderer",value:function(){return new i.default(this,{vertexShader:"\n        precision mediump float;\n        attribute vec2 a_position;\n        attribute vec2 a_texCoord;\n        attribute float a_rotateWithView;\n        attribute vec2 a_offsets;\n        attribute float a_opacity;\n\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform mat4 u_offsetRotateMatrix;\n        uniform float u_size;\n\n        varying vec2 v_texCoord;\n        varying float v_opacity;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          if (a_rotateWithView == 1.0) {\n            offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n          }\n          vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets * u_size;\n          v_texCoord = a_texCoord;\n          v_opacity = a_opacity;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_resolution;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_opacity;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_opacity;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",uniforms:{u_size:function(){return 2*(this.get(p.RADIUS)+this.get(p.BLUR))}.bind(this),u_blurSlope:function(){return this.get(p.RADIUS)/Math.max(1,this.get(p.BLUR))}.bind(this),u_resolution:function(e){return e.viewState.resolution}},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n            varying vec2 v_screenCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:this.gradient_}}],opacityCallback:this.weightFunction_})}}]),a}();function b(e){for(var t=(0,n.createCanvasContext2D)(1,256),r=t.createLinearGradient(0,0,1,256),o=1/(e.length-1),i=0,a=e.length;i<a;++i)r.addColorStop(i*o,e[i]);return t.fillStyle=r,t.fillRect(0,0,1,256),t.canvas}var m=h;exports.default=m;
},{"../events.js":"sgxS","../Object.js":"luFO","../dom.js":"4KLO","./Vector.js":"qAzp","../obj.js":"dV1Q","../renderer/webgl/PointsLayer.js":"f10x"}],"QTYa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./Layer.js"));function e(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(e){function o(t){n(this,o);var e=t||{};return r(this,f(o).call(this,e))}return i(o,t.default),o}(),s=l;exports.default=s;
},{"./Layer.js":"7nok"}],"wTZm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENABLE_RASTER_REPROJECTION=exports.ERROR_THRESHOLD=void 0;var R=.5;exports.ERROR_THRESHOLD=R;var E=!0;exports.ENABLE_RASTER_REPROJECTION=E;
},{}],"97pb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../reproj/common.js"),t=i(require("../../ViewHint.js")),r=require("../../extent.js"),n=i(require("./Layer.js")),o=require("../../transform.js");function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(i){function a(e){var t;return s(this,a),(t=c(this,h(a).call(this,e))).image_=null,t}return p(a,n.default),l(a,[{key:"getImage",value:function(){return this.image_?this.image_.getImage():null}},{key:"prepareFrame",value:function(n){var o=n.layerStatesArray[n.layerIndex],i=n.pixelRatio,a=n.viewState,s=a.resolution,u=this.getLayer().getSource(),l=n.viewHints,c=n.extent;if(void 0!==o.extent&&(c=(0,r.getIntersection)(c,o.extent)),!l[t.default.ANIMATING]&&!l[t.default.INTERACTING]&&!(0,r.isEmpty)(c)){var f=a.projection;if(!e.ENABLE_RASTER_REPROJECTION){var h=u.getProjection();h&&(f=h)}var p=u.getImage(c,s,i,f);p&&this.loadImage(p)&&(this.image_=p)}return!!this.image_}},{key:"renderFrame",value:function(e,t){var n=this.image_,i=n.getExtent(),a=n.getResolution(),s=n.getPixelRatio(),u=e.layerStatesArray[e.layerIndex],l=e.pixelRatio,c=e.viewState,f=c.center,h=c.resolution,p=e.size,y=l*a/(h*s),m=Math.round(p[0]*l),d=Math.round(p[1]*l),g=c.rotation;g&&(m=d=Math.round(Math.sqrt(m*m+d*d)));(0,o.compose)(this.pixelTransform_,e.size[0]/2,e.size[1]/2,1/l,1/l,g,-m/2,-d/2),(0,o.makeInverse)(this.inversePixelTransform_,this.pixelTransform_),this.useContainer(t,this.pixelTransform_,u.opacity);var v=this.context,x=v.canvas;x.width!=m||x.height!=d?(x.width=m,x.height=d):this.containerReused||v.clearRect(0,0,m,d);var b=u.extent,_=void 0!==b&&!(0,r.containsExtent)(b,e.extent)&&(0,r.intersects)(b,e.extent);_&&this.clip(v,e,b);var w=n.getImage(),j=(0,o.compose)(this.tempTransform_,m/2,d/2,y,y,0,s*(i[0]-f[0])/a,s*(f[1]-i[3])/a);this.renderedResolution=a*l/s;var I=j[4],R=j[5],O=w.width*j[0],S=w.height*j[3];if(this.preRender(v,e),O>=.5&&S>=.5){var T,E=u.opacity;1!==E&&(T=this.context.globalAlpha,this.context.globalAlpha=E),this.context.drawImage(w,0,0,+w.width,+w.height,Math.round(I),Math.round(R),Math.round(O),Math.round(S)),1!==E&&(this.context.globalAlpha=T)}this.postRender(v,e),_&&v.restore();var M=(0,o.toString)(this.pixelTransform_);return M!==x.style.transform&&(x.style.transform=M),this.container}}]),a}(),d=m;exports.default=d;
},{"../../reproj/common.js":"wTZm","../../ViewHint.js":"Lb7V","../../extent.js":"+QKI","./Layer.js":"uoa3","../../transform.js":"eGRU"}],"MsRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseImage.js")),t=r(require("../renderer/canvas/ImageLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(r){function n(e){return o(this,n),f(this,a(n).call(this,e))}return l(n,e.default),i(n,[{key:"createRenderer",value:function(){return new t.default(this)}}]),n}(),y=p;exports.default=y;
},{"./BaseImage.js":"QTYa","../renderer/canvas/ImageLayer.js":"97pb"}],"O8Ir":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};exports.default=e;
},{}],"FUux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./Layer.js")),t=n(require("./TileProperty.js")),r=require("../obj.js");function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}function f(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(n){function o(e){var t;u(this,o);var n=e||{},i=(0,r.assign)({},n);return delete i.preload,delete i.useInterimTilesOnError,(t=f(this,a(o).call(this,i))).setPreload(void 0!==n.preload?n.preload:0),t.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),t}return c(o,e.default),l(o,[{key:"getPreload",value:function(){return this.get(t.default.PRELOAD)}},{key:"setPreload",value:function(e){this.set(t.default.PRELOAD,e)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)}}]),o}(),d=y;exports.default=d;
},{"./Layer.js":"7nok","./TileProperty.js":"O8Ir","../obj.js":"dV1Q"}],"bqyG":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}function n(i,n,e){return n&&t(i.prototype,n),e&&t(i,e),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=a,exports.default=void 0;var e=function(){function t(n,e,a,m){i(this,t),this.minX=n,this.maxX=e,this.minY=a,this.maxY=m}return n(t,[{key:"contains",value:function(i){return this.containsXY(i[1],i[2])}},{key:"containsTileRange",value:function(i){return this.minX<=i.minX&&i.maxX<=this.maxX&&this.minY<=i.minY&&i.maxY<=this.maxY}},{key:"containsXY",value:function(i,t){return this.minX<=i&&i<=this.maxX&&this.minY<=t&&t<=this.maxY}},{key:"equals",value:function(i){return this.minX==i.minX&&this.minY==i.minY&&this.maxX==i.maxX&&this.maxY==i.maxY}},{key:"extend",value:function(i){i.minX<this.minX&&(this.minX=i.minX),i.maxX>this.maxX&&(this.maxX=i.maxX),i.minY<this.minY&&(this.minY=i.minY),i.maxY>this.maxY&&(this.maxY=i.maxY)}},{key:"getHeight",value:function(){return this.maxY-this.minY+1}},{key:"getSize",value:function(){return[this.getWidth(),this.getHeight()]}},{key:"getWidth",value:function(){return this.maxX-this.minX+1}},{key:"intersects",value:function(i){return this.minX<=i.maxX&&this.maxX>=i.minX&&this.minY<=i.maxY&&this.maxY>=i.minY}}]),t}();function a(i,t,n,a,m){return void 0!==m?(m.minX=i,m.maxX=t,m.minY=n,m.maxY=a,m):new e(i,t,n,a)}var m=e;exports.default=m;
},{}],"0ge5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=a(require("../../TileRange.js")),i=a(require("../../TileState.js")),r=require("../../extent.js"),n=a(require("./Layer.js")),o=require("../../transform.js");function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t,i){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=g(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(a){function l(e){var i;return s(this,l),(i=d(this,p(l).call(this,e))).extentChanged=!0,i.renderedExtent_=null,i.renderedRevision,i.renderedTiles=[],i.newTiles_=!1,i.tmpExtent=(0,r.createEmpty)(),i.tmpTileRange_=new t.default(0,0,0,0),i.zDirection=0,i}return T(l,n.default),c(l,[{key:"isDrawableTile",value:function(e){var t=this.getLayer(),r=e.getState(),n=t.getUseInterimTilesOnError();return r==i.default.LOADED||r==i.default.EMPTY||r==i.default.ERROR&&!n}},{key:"getTile",value:function(e,t,r,n){var o=n.pixelRatio,a=n.viewState.projection,l=this.getLayer(),s=l.getSource().getTile(e,t,r,o,a);return s.getState()==i.default.ERROR&&(l.getUseInterimTilesOnError()?l.getPreload()>0&&(this.newTiles_=!0):s.setState(i.default.LOADED)),this.isDrawableTile(s)||(s=s.getInterimTile()),s}},{key:"loadedTileCallback",value:function(e,t,i){return!!this.isDrawableTile(i)&&f(p(l.prototype),"loadedTileCallback",this).call(this,e,t,i)}},{key:"prepareFrame",value:function(e){return!0}},{key:"renderFrame",value:function(t,n){var a=t.layerStatesArray[t.layerIndex],l=t.viewState,s=l.projection,u=l.resolution,c=l.center,d=l.rotation,h=t.pixelRatio,f=this.getLayer(),g=f.getSource(),p=g.getRevision(),T=g.getTileGridForProjection(s),v=void 0===g.zDirection?this.zDirection:g.zDirection,y=T.getZForResolution(u,v),m=T.getResolution(y),x=t.extent;a.extent&&(x=(0,r.getIntersection)(x,a.extent));var b=g.getTilePixelRatio(h),w=Math.round(t.size[0]*b),R=Math.round(t.size[1]*b);d&&(w=R=Math.round(Math.sqrt(w*w+R*R)));var _=m*w/2/b,O=m*R/2/b,C=[c[0]-_,c[1]-O,c[0]+_,c[1]+O],E=T.getTileRangeForExtentAndZ(x,y),j={};j[y]={};var S=this.createLoadedTileFinder(g,s,j),k=this.tmpExtent,P=this.tmpTileRange_;this.newTiles_=!1;for(var D=E.minX;D<=E.maxX;++D)for(var I=E.minY;I<=E.maxY;++I){var M=this.getTile(y,D,I,t);if(this.isDrawableTile(M)){var A=(0,e.getUid)(this);if(M.getState()==i.default.LOADED){j[y][M.tileCoord.toString()]=M;var U=M.inTransition(A);this.newTiles_||!U&&-1!==this.renderedTiles.indexOf(M)||(this.newTiles_=!0)}if(1===M.getAlpha(A,t.time))continue}var z=T.getTileCoordChildTileRange(M.tileCoord,P,k),L=!1;z&&(L=S(y+1,z)),L||T.forEachTileCoordParentTileRange(M.tileCoord,S,P,k)}var q=m/u;(0,o.compose)(this.pixelTransform_,t.size[0]/2,t.size[1]/2,1/b,1/b,d,-w/2,-R/2),this.useContainer(n,this.pixelTransform_,a.opacity);var F=this.context,Y=F.canvas;(0,o.makeInverse)(this.inversePixelTransform_,this.pixelTransform_),(0,o.compose)(this.tempTransform_,w/2,R/2,q,q,0,-w/2,-R/2),Y.width!=w||Y.height!=R?(Y.width=w,Y.height=R):this.containerReused||F.clearRect(0,0,w,R),a.extent&&this.clipUnrotated(F,t,a.extent),this.preRender(F,t),this.renderedTiles.length=0;var Z,K,X,G=Object.keys(j).map(Number);G.sort(function(e,t){return e===y?1:t===y?-1:e>t?1:e<t?-1:0}),1!==a.opacity||this.containerReused&&!g.getOpaque(t.viewState.projection)?(Z=[],K=[]):G=G.reverse();for(var Q=G.length-1;Q>=0;--Q){var W=G[Q],N=g.getTilePixelSize(W,h,s),B=T.getResolution(W)/m,H=N[0]*B*q,J=N[1]*B*q,V=T.getTileCoordForCoordAndZ((0,r.getTopLeft)(C),W),$=T.getTileCoordExtent(V),ee=(0,o.apply)(this.tempTransform_,[b*($[0]-C[0])/m,b*(C[3]-$[3])/m]),te=b*g.getGutterForProjection(s),ie=j[W];for(var re in ie){var ne=ie[re],oe=ne.tileCoord,ae=ee[0]-(V[1]-oe[1])*H,le=Math.round(ae+H),se=ee[1]-(V[2]-oe[2])*J,ue=Math.round(se+J),ce=Math.round(ae),de=Math.round(se),he=le-ce,fe=ue-de,ge=y===W;if(Z&&(!ge||1===ne.getAlpha((0,e.getUid)(this),t.time))){F.save(),X=[ce,de,ce+he,de,ce+he,de+fe,ce,de+fe];for(var pe=0,Te=Z.length;pe<Te;++pe)if(y!==W&&W<K[pe]){var ve=Z[pe];F.beginPath(),F.moveTo(X[0],X[1]),F.lineTo(X[2],X[3]),F.lineTo(X[4],X[5]),F.lineTo(X[6],X[7]),F.moveTo(ve[6],ve[7]),F.lineTo(ve[4],ve[5]),F.lineTo(ve[2],ve[3]),F.lineTo(ve[0],ve[1]),F.clip()}Z.push(X),K.push(W)}this.drawTileImage(ne,t,ce,de,he,fe,te,ge,a.opacity),Z&&F.restore(),this.renderedTiles.push(ne),this.updateUsedTiles(t.usedTiles,g,ne)}}this.renderedRevision=p,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!(0,r.equals)(this.renderedExtent_,C),this.renderedExtent_=C,this.manageTilePyramid(t,g,T,h,s,x,y,f.getPreload()),this.updateCacheSize_(t,g),this.scheduleExpireCache(t,g),this.postRender(F,t),a.extent&&F.restore();var ye=(0,o.toString)(this.pixelTransform_);return ye!==Y.style.transform&&(Y.style.transform=ye),this.container}},{key:"drawTileImage",value:function(t,i,r,n,o,a,l,s,u){var c=this.getTileImage(t);if(c){var d=(0,e.getUid)(this),h=u*(s?t.getAlpha(d,i.time):1),f=h!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=h),this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,r,n,o,a),f&&this.context.restore(),1!==h?i.animate=!0:s&&t.endTransition(d)}}},{key:"getImage",value:function(){var e=this.context;return e?e.canvas:null}},{key:"getTileImage",value:function(e){return e.getImage()}},{key:"scheduleExpireCache",value:function(t,i){if(i.canExpireCache()){var r=function(t,i,r){var n=(0,e.getUid)(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,i);t.postRenderFunctions.push(r)}}},{key:"updateUsedTiles",value:function(t,i,r){var n=(0,e.getUid)(i);n in t||(t[n]={}),t[n][r.getKey()]=!0}},{key:"updateCacheSize_",value:function(t,i){var r=(0,e.getUid)(i),n=0;r in t.usedTiles&&(n+=Object.keys(t.usedTiles[r]).length),r in t.wantedTiles&&(n+=Object.keys(t.wantedTiles[r]).length);var o=i.tileCache;o.highWaterMark<n&&(o.highWaterMark=n)}},{key:"manageTilePyramid",value:function(t,r,n,o,a,l,s,u,c){var d=(0,e.getUid)(r);d in t.wantedTiles||(t.wantedTiles[d]={});var h,f,g,p,T,v,y=t.wantedTiles[d],m=t.tileQueue;for(v=n.getMinZoom();v<=s;++v)for(f=n.getTileRangeForExtentAndZ(l,v,f),g=n.getResolution(v),p=f.minX;p<=f.maxX;++p)for(T=f.minY;T<=f.maxY;++T)s-v<=u?((h=r.getTile(v,p,T,o,a)).getState()==i.default.IDLE&&(y[h.getKey()]=!0,m.isKeyQueued(h.getKey())||m.enqueue([h,d,n.getTileCoordCenter(h.tileCoord),g])),void 0!==c&&c(h)):r.useTile(v,p,T,a)}}]),l}();y.prototype.getLayer;var m=y;exports.default=m;
},{"../../util.js":"MHZC","../../TileRange.js":"bqyG","../../TileState.js":"SRu5","../../extent.js":"+QKI","./Layer.js":"uoa3","../../transform.js":"eGRU"}],"JbRq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./BaseTile.js")),t=r(require("../renderer/canvas/TileLayer.js"));function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(r){function n(e){return o(this,n),f(this,a(n).call(this,e))}return l(n,e.default),i(n,[{key:"createRenderer",value:function(){return new t.default(this)}}]),n}(),y=p;exports.default=y;
},{"./BaseTile.js":"FUux","../renderer/canvas/TileLayer.js":"0ge5"}],"yWrN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./util.js"),e=r(require("./events/Target.js")),n=r(require("./events/EventType.js"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function c(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(r){function o(t,e,n,r){var i;return u(this,o),(i=c(this,l(o).call(this))).extent=t,i.pixelRatio_=n,i.resolution=e,i.state=r,i}return s(o,e.default),a(o,[{key:"changed",value:function(){this.dispatchEvent(n.default.CHANGE)}},{key:"getExtent",value:function(){return this.extent}},{key:"getImage",value:function(){return(0,t.abstract)()}},{key:"getPixelRatio",value:function(){return this.pixelRatio_}},{key:"getResolution",value:function(){return this.resolution}},{key:"getState",value:function(){return this.state}},{key:"load",value:function(){(0,t.abstract)()}}]),o}(),b=y;exports.default=b;
},{"./util.js":"MHZC","./events/Target.js":"B5sF","./events/EventType.js":"KZbn"}],"blb5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./ImageBase.js")),e=r(require("./ImageState.js"));function r(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t}function a(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?f(t):e}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(r){function n(t,r,u,i,f){var c;o(this,n);var s=void 0!==f?e.default.IDLE:e.default.LOADED;return(c=a(this,l(n).call(this,t,r,u,s))).loader_=void 0!==f?f:null,c.canvas_=i,c.error_=null,c}return c(n,t.default),i(n,[{key:"getError",value:function(){return this.error_}},{key:"handleLoad_",value:function(t){t?(this.error_=t,this.state=e.default.ERROR):this.state=e.default.LOADED,this.changed()}},{key:"load",value:function(){this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}},{key:"getImage",value:function(){return this.canvas_}}]),n}(),y=p;exports.default=y;
},{"./ImageBase.js":"yWrN","./ImageState.js":"V49+"}],"45Ph":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=f(require("../../ImageCanvas.js")),t=f(require("../../ViewHint.js")),r=require("../../array.js"),n=require("../../extent.js"),o=require("../../obj.js"),i=f(require("./ImageLayer.js")),a=f(require("./VectorLayer.js")),u=require("../../events.js"),s=f(require("../../events/EventType.js")),l=f(require("../../ImageState.js")),c=require("../../render.js");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t,r){return t&&y(e.prototype,t),r&&y(e,r),e}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){return(b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=m(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(f){function p(e){var t;return d(this,p),(t=v(this,_(p).call(this,e))).skippedFeatures_=[],t.vectorRenderer_=new a.default(e),t.layerImageRatio_=e.getImageRatio(),t}return j(p,i.default),h(p,[{key:"disposeInternal",value:function(){this.vectorRenderer_.dispose(),b(_(p.prototype),"disposeInternal",this).call(this)}},{key:"handleFontsChanged",value:function(){this.vectorRenderer_.handleFontsChanged()}},{key:"prepareFrame",value:function(i){var a=i.pixelRatio,f=i.viewState.resolution,p=i.viewHints,d=this.vectorRenderer_,y=i.extent;if(1!==this.layerImageRatio_&&(y=y.slice(0),(0,n.scaleFromCenter)(y,this.layerImageRatio_)),!p[t.default.ANIMATING]&&!p[t.default.INTERACTING]&&!(0,n.isEmpty)(y)){var h=this.skippedFeatures_;d.useContainer(null,null,1);var v=d.context,g=(0,o.assign)({},i,{declutterItems:[],size:[(0,n.getWidth)(y)/f,(0,n.getHeight)(y)/f],viewState:(0,o.assign)({},i.viewState,{rotation:0})}),b=Object.keys(g.skippedFeatureUids).sort(),m=new e.default(y,f,a,v.canvas,function(e){!d.prepareFrame(g)||!d.replayGroupChanged&&(0,r.equals)(h,b)||(d.renderFrame(g,null),(0,c.renderDeclutterItems)(g,null),h=b,e())});(0,u.listen)(m,s.default.CHANGE,function(){m.getState()===l.default.LOADED&&(this.image_=m,this.skippedFeatures_=h)},this),m.load()}if(this.image_){var _=this.image_,j=_.getResolution(),R=_.getPixelRatio();this.renderedResolution=j*a/R}return!!this.image_}},{key:"preRender",value:function(){}},{key:"postRender",value:function(){}},{key:"forEachFeatureAtCoordinate",value:function(e,t,r,n,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,t,r,n,o):b(_(p.prototype),"forEachFeatureAtCoordinate",this).call(this,e,t,r,n,o)}}]),p}(),O=w;exports.default=O;
},{"../../ImageCanvas.js":"blb5","../../ViewHint.js":"Lb7V","../../array.js":"YQ1M","../../extent.js":"+QKI","../../obj.js":"dV1Q","./ImageLayer.js":"97pb","./VectorLayer.js":"Cwnk","../../events.js":"sgxS","../../events/EventType.js":"KZbn","../../ImageState.js":"V49+","../../render.js":"U29t"}],"CYTk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./BaseVector.js")),t=require("../obj.js"),r=o(require("../renderer/canvas/VectorImageLayer.js"));function o(e){return e&&e.__esModule?e:{default:e}}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(o){function n(e){var r;i(this,n);var o=e||{},u=(0,t.assign)({},o);return delete u.imageRatio,(r=c(this,l(n).call(this,u))).imageRatio_=void 0!==o.imageRatio?o.imageRatio:1,r}return s(n,e.default),a(n,[{key:"getImageRatio",value:function(){return this.imageRatio_}},{key:"createRenderer",value:function(){return new r.default(this)}}]),n}(),b=y;exports.default=b;
},{"./BaseVector.js":"MkI6","../obj.js":"dV1Q","../renderer/canvas/VectorImageLayer.js":"45Ph"}],"Yq2L":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={IMAGE:"image",HYBRID:"hybrid"};exports.default=e;
},{}],"ZXuw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../../util.js"),t=require("../../dom.js"),r=g(require("../../TileState.js")),i=g(require("../../ViewHint.js")),n=require("../../events.js"),o=g(require("../../events/EventType.js")),a=require("../../extent.js"),l=g(require("../../layer/VectorTileRenderType.js")),u=g(require("../../render/canvas/BuilderType.js")),s=g(require("../../render/canvas/BuilderGroup.js")),d=g(require("./TileLayer.js")),c=require("../vector.js"),f=require("../../transform.js"),v=h(require("../../render/canvas/ExecutorGroup.js"));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};i.get||i.set?Object.defineProperty(t,r,i):t[r]=e[r]}return t.default=e,t}function g(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,r){return t&&T(e.prototype,t),r&&T(e,r),e}function R(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,r){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=C(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function C(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b={image:[u.default.POLYGON,u.default.CIRCLE,u.default.LINE_STRING,u.default.IMAGE,u.default.TEXT],hybrid:[u.default.POLYGON,u.default.LINE_STRING]},I={image:[u.default.DEFAULT],hybrid:[u.default.IMAGE,u.default.TEXT,u.default.DEFAULT]},S=function(u){function h(e){var t;return p(this,h),(t=R(this,O(h).call(this,e))).overlayContext_=null,t.overlayPixelTransform_=(0,f.create)(),t.inverseOverlayPixelTransform_=(0,f.create)(),t.dirty_=!1,t.renderedLayerRevision_,t.renderTileImageQueue_={},t.tileListenerKeys_={},t.tmpTransform_=(0,f.create)(),t.zDirection=1,t}return w(h,d.default),m(h,[{key:"useContainer",value:function(e,r,i){var n;e&&2===e.childElementCount&&((n=e.lastElementChild.getContext("2d"))||(e=null));var o=this.containerReused;if(x(O(h.prototype),"useContainer",this).call(this,e,r,i),!o||this.containerReused||n||(this.overlayContext_=null),this.containerReused&&n&&(this.overlayContext_=n),!this.overlayContext_){var a=(0,t.createCanvasContext2D)(),l=a.canvas.style;l.position="absolute",l.transformOrigin="top left",this.overlayContext_=a}1===this.container.childElementCount&&this.container.appendChild(this.overlayContext_.canvas)}},{key:"prepareTile",value:function(t,i,o,a){var l=!1,u=(0,e.getUid)(t),s=t.getState();return(s===r.default.LOADED&&t.hifi||s===r.default.ERROR||s===r.default.ABORT)&&u in this.tileListenerKeys_&&((0,n.unlistenByKey)(this.tileListenerKeys_[u]),delete this.tileListenerKeys_[u]),s!==r.default.LOADED&&s!==r.default.ERROR||(this.updateExecutorGroup_(t,i,o),this.tileImageNeedsRender_(t,i,o)&&(l=!0,a&&(this.renderTileImageQueue_[u]=t))),l}},{key:"getTile",value:function(t,a,l,u){var s=x(O(h.prototype),"getTile",this).call(this,t,a,l,u),d=u.pixelRatio,c=u.viewState,f=c.resolution,v=c.projection;if(s.getState()<r.default.LOADED){s.wantedResolution=f;var g=(0,e.getUid)(s);if(!(g in this.tileListenerKeys_)){var y=(0,n.listen)(s,o.default.CHANGE,this.prepareTile.bind(this,s,d,v,!0));this.tileListenerKeys_[g]=y}}else{var p=u.viewHints;!!(p[i.default.ANIMATING]||p[i.default.INTERACTING])&&s.wantedResolution||(s.wantedResolution=f),this.prepareTile(s,d,v,!1)&&this.renderTileImage_(s,u)}return s}},{key:"isDrawableTile",value:function(e){return x(O(h.prototype),"isDrawableTile",this).call(this,e)&&e.hasContext(this.getLayer())}},{key:"getTileImage",value:function(e){return e.getImage(this.getLayer())}},{key:"prepareFrame",value:function(e){var t=this.getLayer().getRevision();return this.renderedLayerRevision_!=t&&(this.renderedTiles.length=0),this.renderedLayerRevision_=t,x(O(h.prototype),"prepareFrame",this).call(this,e)}},{key:"updateExecutorGroup_",value:function(t,i,n){var o=this,l=this.getLayer(),u=l.getRevision(),d=l.getRenderOrder()||null,f=t.wantedResolution,h=t.getReplayState(l);if(h.dirty||h.renderedResolution!==f||h.renderedRevision!=u||h.renderedRenderOrder!=d||h.renderedZ!==t.sourceZ){var g=l.getSource(),y=g.getTileGrid(),p=g.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),T=g.getSourceTiles(i,n,t),m=(0,e.getUid)(l),R=t.executorGroups[m];if(R)for(var _=0,x=R.length;_<x;++_)R[_].dispose();t.executorGroups[m]=[];for(var C=function(e,n){var u=T[e];if(u.getState()!=r.default.LOADED)return"continue";var R=u.tileCoord,_=y.getTileCoordExtent(R),x=(0,a.getIntersection)(p,_),C=(0,a.equals)(_,x)?null:(0,a.buffer)(x,l.getRenderBuffer()*f,o.tmpExtent);h.dirty=!1;var O=new s.default(0,x,f,i,l.getDeclutter()),w=(0,c.getSquaredTolerance)(f,i),E=function(e){var t,r=e.getStyleFunction()||l.getStyleFunction();if(r&&(t=r(e,f)),t){var i=this.renderFeature(e,w,t,O);this.dirty_=this.dirty_||i,h.dirty=h.dirty||i}},b=u.getFeatures();d&&d!==h.renderedRenderOrder&&b.sort(d);for(var I=0,S=b.length;I<S;++I){var j=b[I];C&&!(0,a.intersects)(C,j.getGeometry().getExtent())||E.call(o,j)}var L=O.finish(),P=l.getDeclutter()&&1===T.length?null:x,G=new v.default(P,f,i,g.getOverlaps(),L,l.getRenderBuffer());t.executorGroups[m].push(G)},O=0,w=T.length;O<w;++O)C(O);h.renderedRevision=u,h.renderedZ=t.sourceZ,h.renderedRenderOrder=d,h.renderedResolution=f}}},{key:"forEachFeatureAtCoordinate",value:function(t,r,i,n,o){var l=r.viewState.resolution,u=r.viewState.rotation;i=null==i?0:i;var s,d,c,f=this.getLayer(),v=f.getDeclutter(),h=f.getSource().getTileGridForProjection(r.viewState.projection),g={},y=this.renderedTiles;for(d=0,c=y.length;d<c;++d){var p=y[d];if(!v){var T=h.getTileCoordExtent(p.wrappedTileCoord);if(!(0,a.containsCoordinate)(T,t))continue}for(var m=p.executorGroups[(0,e.getUid)(f)],R=0,_=m.length;R<_;++R){var x=m[R];s=s||x.forEachFeatureAtCoordinate(t,l,u,i,{},function(t){var r=t.getId();if(void 0===r&&(r=(0,e.getUid)(t)),!(r in g))return g[r]=!0,n(t,f)},f.getDeclutter()?o:null)}}return s}},{key:"handleFontsChanged",value:function(){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()}},{key:"handleStyleImageChange_",value:function(e){this.renderIfReadyAndVisible()}},{key:"renderFrame",value:function(t,n){var o=t.viewHints,a=!(o[i.default.ANIMATING]||o[i.default.INTERACTING]);this.renderQueuedTileImages_(a,t),x(O(h.prototype),"renderFrame",this).call(this,t,n);var u=this.getLayer(),s=u.getRenderMode();if(s===l.default.IMAGE)return this.container;var d=u.getSource(),c=t.usedTiles[(0,e.getUid)(d)];for(var g in this.renderTileImageQueue_)g in c||delete this.renderTileImageQueue_[g];var y=this.overlayContext_,p=u.getDeclutter()?{}:null,T=I[s],m=t.pixelRatio,R=t.viewState.rotation,_=t.size;(0,f.makeScale)(this.overlayPixelTransform_,1/m,1/m),(0,f.makeInverse)(this.inverseOverlayPixelTransform_,this.overlayPixelTransform_);var C=y.canvas,w=Math.round(_[0]*m),E=Math.round(_[1]*m);if(C.width!=w||C.height!=E){C.width=w,C.height=E;var b=(0,f.toString)(this.overlayPixelTransform_);C.style.transform!==b&&(C.style.transform=b)}else this.containerReused||y.clearRect(0,0,w,E);for(var S=this.renderedTiles,j=d.getTileGridForProjection(t.viewState.projection),L=[],P=[],G=S.length-1;G>=0;--G){var A=S[G];if(A.getState()!=r.default.ABORT)for(var D=A.tileCoord,k=j.getTileCoordExtent(A.wrappedTileCoord),F=j.getTileCoordExtent(D,this.tmpExtent)[0]-k[0],N=this.getRenderTransform(t,w,E,F),q=A.executorGroups[(0,e.getUid)(u)],M=!1,U=0,Q=q.length;U<Q;++U){var Z=q[U];if(Z.hasExecutors(T)){var B=A.tileCoord[0],K=void 0;if(!p&&!M){K=Z.getClipCoords(N),y.save();for(var H=0,V=L.length;H<V;++H){var z=L[H];B<P[H]&&(y.beginPath(),y.moveTo(K[0],K[1]),y.lineTo(K[2],K[3]),y.lineTo(K[4],K[5]),y.lineTo(K[6],K[7]),y.moveTo(z[6],z[7]),y.lineTo(z[4],z[5]),y.lineTo(z[2],z[3]),y.lineTo(z[0],z[1]),y.clip())}}Z.execute(y,N,R,{},a,T,p),p||M||(y.restore(),L.push(K),P.push(B),M=!0)}}}if(p){var X=t.layerStatesArray[t.layerIndex];(0,v.replayDeclutter)(p,y,R,X.opacity,a,t.declutterItems)}return this.container}},{key:"renderQueuedTileImages_",value:function(e,t){for(var r in this.renderTileImageQueue_){if(!e&&Date.now()-t.time>8){t.animate=!0;break}var i=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(i,t)}}},{key:"renderFeature",value:function(e,t,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)n=(0,c.renderFeature)(i,e,r[o],t,this.handleStyleImageChange_,this)||n;else n=(0,c.renderFeature)(i,e,r,t,this.handleStyleImageChange_,this);return n}},{key:"tileImageNeedsRender_",value:function(e,t,r){var i=this.getLayer(),n=e.getReplayState(i),o=i.getRevision(),a=e.sourceZ,l=e.wantedResolution;return n.renderedTileResolution!==l||n.renderedTileRevision!==o||n.renderedTileZ!==a}},{key:"renderTileImage_",value:function(t,r){var i=this.getLayer(),n=t.getReplayState(i),o=i.getRevision(),a=t.executorGroups[(0,e.getUid)(i)];n.renderedTileRevision=o,n.renderedTileZ=t.sourceZ;var l=t.wrappedTileCoord,u=l[0],s=i.getSource(),d=r.pixelRatio,c=r.viewState.projection,v=s.getTileGridForProjection(c),h=v.getResolution(t.tileCoord[0]),g=r.pixelRatio/t.wantedResolution*h,y=v.getResolution(u),p=t.getContext(i);d=Math.max(d,g/d);var T=s.getTilePixelSize(u,d,c);p.canvas.width=T[0],p.canvas.height=T[1];var m=d/g;if(1!==m){var R=(0,f.reset)(this.tmpTransform_);(0,f.scale)(R,m,m),p.setTransform.apply(p,R)}var _=v.getTileCoordExtent(l,this.tmpExtent),x=g/y,C=(0,f.reset)(this.tmpTransform_);(0,f.scale)(C,x,-x),(0,f.translate)(C,-_[0],-_[3]);for(var O=0,w=a.length;O<w;++O){a[O].execute(p,C,0,{},!0,b[i.getRenderMode()])}n.renderedTileResolution=t.wantedResolution}},{key:"getDataAtPixel",value:function(e,t,r){var i=x(O(h.prototype),"getDataAtPixel",this).call(this,e,t,r);if(i)return i;var n=(0,f.apply)(this.inverseOverlayPixelTransform_,e.slice()),o=this.overlayContext_;try{i=o.getImageData(Math.round(n[0]),Math.round(n[1]),1,1).data}catch(a){return"SecurityError"===a.name?new Uint8Array:i}return 0===i[3]?null:i}}]),h}(),j=S;exports.default=j;
},{"../../util.js":"MHZC","../../dom.js":"4KLO","../../TileState.js":"SRu5","../../ViewHint.js":"Lb7V","../../events.js":"sgxS","../../events/EventType.js":"KZbn","../../extent.js":"+QKI","../../layer/VectorTileRenderType.js":"Yq2L","../../render/canvas/BuilderType.js":"zlJk","../../render/canvas/BuilderGroup.js":"3QMm","./TileLayer.js":"0ge5","../vector.js":"brOh","../../transform.js":"eGRU","../../render/canvas/ExecutorGroup.js":"5kR9"}],"gzBF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../asserts.js"),t=i(require("./TileProperty.js")),r=i(require("./BaseVector.js")),n=i(require("./VectorTileRenderType.js")),o=i(require("../renderer/canvas/VectorTileLayer.js")),u=require("../obj.js");function i(e){return e&&e.__esModule?e:{default:e}}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function c(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(i){function l(t){var r;s(this,l);var o=t||{},i=(0,u.assign)({},o);delete i.preload,delete i.useInterimTilesOnError,r=c(this,p(l).call(this,i));var a=o.renderMode||n.default.HYBRID;return(0,e.assert)(null==a||a==n.default.IMAGE||a==n.default.HYBRID,28),r.renderMode_=a,r.setPreload(o.preload?o.preload:0),r.setUseInterimTilesOnError(void 0===o.useInterimTilesOnError||o.useInterimTilesOnError),r}return y(l,r.default),f(l,[{key:"createRenderer",value:function(){return new o.default(this)}},{key:"getRenderMode",value:function(){return this.renderMode_}},{key:"getPreload",value:function(){return this.get(t.default.PRELOAD)}},{key:"getUseInterimTilesOnError",value:function(){return this.get(t.default.USE_INTERIM_TILES_ON_ERROR)}},{key:"setPreload",value:function(e){this.set(t.default.PRELOAD,e)}},{key:"setUseInterimTilesOnError",value:function(e){this.set(t.default.USE_INTERIM_TILES_ON_ERROR,e)}}]),l}(),_=O;exports.default=_;
},{"../asserts.js":"d7gk","./TileProperty.js":"O8Ir","./BaseVector.js":"MkI6","./VectorTileRenderType.js":"Yq2L","../renderer/canvas/VectorTileLayer.js":"ZXuw","../obj.js":"dV1Q"}],"GllG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Group",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"Heatmap",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Image",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"Layer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"Tile",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Vector",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"VectorImage",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"VectorTile",{enumerable:!0,get:function(){return l.default}});var e=i(require("./layer/Group.js")),r=i(require("./layer/Heatmap.js")),t=i(require("./layer/Image.js")),u=i(require("./layer/Layer.js")),n=i(require("./layer/Tile.js")),a=i(require("./layer/Vector.js")),o=i(require("./layer/VectorImage.js")),l=i(require("./layer/VectorTile.js"));function i(e){return e&&e.__esModule?e:{default:e}}
},{"./layer/Group.js":"2uKf","./layer/Heatmap.js":"9a1V","./layer/Image.js":"MsRY","./layer/Layer.js":"7nok","./layer/Tile.js":"JbRq","./layer/Vector.js":"qAzp","./layer/VectorImage.js":"CYTk","./layer/VectorTile.js":"gzBF"}],"/+sz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./TileState.js")),e=require("./easing.js"),i=o(require("./events/Target.js")),n=o(require("./events/EventType.js")),r=require("./util.js");function o(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function f(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(o){function u(t,e,i){var n;a(this,u);var r=i||{};return(n=f(this,h(u).call(this))).tileCoord=t,n.state=e,n.interimTile=null,n.hifi=!0,n.key="",n.transition_=void 0===r.transition?250:r.transition,n.transitionStarts_={},n}return y(u,i.default),l(u,[{key:"changed",value:function(){this.dispatchEvent(n.default.CHANGE)}},{key:"getKey",value:function(){return this.key+"/"+this.tileCoord}},{key:"getInterimTile",value:function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==t.default.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}},{key:"refreshInterimChain",value:function(){if(this.interimTile){var e=this.interimTile,i=this;do{if(e.getState()==t.default.LOADED){e.interimTile=null;break}e.getState()==t.default.LOADING?i=e:e.getState()==t.default.IDLE?i.interimTile=e.interimTile:i=e,e=i.interimTile}while(e)}}},{key:"getTileCoord",value:function(){return this.tileCoord}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){this.state=t,this.changed()}},{key:"load",value:function(){(0,r.abstract)()}},{key:"getAlpha",value:function(t,i){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=i,this.transitionStarts_[t]=n;var r=i-n+1e3/60;return r>=this.transition_?1:(0,e.easeIn)(r/this.transition_)}},{key:"inTransition",value:function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}},{key:"endTransition",value:function(t){this.transition_&&(this.transitionStarts_[t]=-1)}}]),u}(),d=v;exports.default=d;
},{"./TileState.js":"SRu5","./easing.js":"XQse","./events/Target.js":"B5sF","./events/EventType.js":"KZbn","./util.js":"MHZC"}],"UKPK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.listenImage=_,exports.default=void 0;var e=o(require("./ImageBase.js")),t=o(require("./ImageState.js")),n=require("./events.js"),i=o(require("./events/EventType.js")),r=require("./extent.js");function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(n){function i(e,n,r,o,u,s){var l;return a(this,i),(l=c(this,h(i).call(this,e,n,r,t.default.IDLE))).src_=o,l.image_=new Image,null!==u&&(l.image_.crossOrigin=u),l.unlisten_=null,l.state=t.default.IDLE,l.imageLoadFunction_=s,l}return d(i,e.default),l(i,[{key:"getImage",value:function(){return this.image_}},{key:"handleImageError_",value:function(){this.state=t.default.ERROR,this.unlistenImage_(),this.changed()}},{key:"handleImageLoad_",value:function(){void 0===this.resolution&&(this.resolution=(0,r.getHeight)(this.extent)/this.image_.height),this.state=t.default.LOADED,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state!=t.default.IDLE&&this.state!=t.default.ERROR||(this.state=t.default.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=_(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"setImage",value:function(e){this.image_=e}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),i}();function _(e,t,r){var o=e;if(o.decode){var u=o.decode(),a=!0;return u.then(function(){a&&t()}).catch(function(e){a&&r()}),function(){a=!1}}var s=[(0,n.listenOnce)(o,i.default.LOAD,t),(0,n.listenOnce)(o,i.default.ERROR,r)];return function(){s.forEach(n.unlistenByKey)}}var p=g;exports.default=p;
},{"./ImageBase.js":"yWrN","./ImageState.js":"V49+","./events.js":"sgxS","./events/EventType.js":"KZbn","./extent.js":"+QKI"}],"0vmZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("./Tile.js")),e=r(require("./TileState.js")),n=require("./dom.js"),i=require("./Image.js");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function l(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function f(t,e,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=h(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _=function(n){function r(t,e,n,i,o,s){var u;return a(this,r),(u=l(this,g(r).call(this,t,e,s))).crossOrigin_=i,u.src_=n,u.image_=new Image,null!==i&&(u.image_.crossOrigin=i),u.unlisten_=null,u.tileLoadFunction_=o,u}return d(r,t.default),u(r,[{key:"disposeInternal",value:function(){this.state==e.default.LOADING&&(this.unlistenImage_(),this.image_=y()),this.interimTile&&this.interimTile.dispose(),this.state=e.default.ABORT,this.changed(),f(g(r.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.image_}},{key:"getKey",value:function(){return this.src_}},{key:"handleImageError_",value:function(){this.state=e.default.ERROR,this.unlistenImage_(),this.image_=y(),this.changed()}},{key:"handleImageLoad_",value:function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=e.default.LOADED:this.state=e.default.EMPTY,this.unlistenImage_(),this.changed()}},{key:"load",value:function(){this.state==e.default.ERROR&&(this.state=e.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==e.default.IDLE&&(this.state=e.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,i.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}},{key:"unlistenImage_",value:function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}]),r}();function y(){var t=(0,n.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var m=_;exports.default=m;
},{"./Tile.js":"/+sz","./TileState.js":"SRu5","./dom.js":"4KLO","./Image.js":"UKPK"}],"QcSK":[function(require,module,exports) {
"use strict";function e(e,t,n,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=n,r):[e,t,n]}function t(e,t,n){return e+"/"+t+"/"+n}function n(e){return t(e[0],e[1],e[2])}function r(e){return e.split("/").map(Number)}function o(e){return(e[1]<<e[0])+e[2]}function u(e,t){var n=e[0],r=e[1],o=e[2];if(t.getMinZoom()>n||n>t.getMaxZoom())return!1;var u,i=t.getExtent();return!(u=i?t.getTileRangeForExtentAndZ(i,n):t.getFullTileRange(n))||u.containsXY(r,o)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOrUpdate=e,exports.getKeyZXY=t,exports.getKey=n,exports.fromKey=r,exports.hash=o,exports.withinExtentAndZ=u;
},{}],"xJkU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./structs/LRUCache.js")),t=require("./tilecoord.js");function o(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(o){function r(e){return n(this,r),c(this,s(r).call(this,e))}return a(r,e.default),u(r,[{key:"expireCache",value:function(e){for(;this.canExpireCache();){if(this.peekLast().getKey()in e)break;this.pop().dispose()}}},{key:"pruneExceptNewestZ",value:function(){if(0!==this.getCount()){var e=this.peekFirstKey(),o=(0,t.fromKey)(e)[0];this.forEach(function(e){e.tileCoord[0]!==o&&(this.remove((0,t.getKey)(e.tileCoord)),e.dispose())}.bind(this))}}}]),r}(),y=l;exports.default=y;
},{"./structs/LRUCache.js":"txpS","./tilecoord.js":"QcSK"}],"Xijb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.calculateSourceResolution=n,exports.render=i;var e=require("./dom.js"),t=require("./extent.js"),r=require("./math.js"),a=require("./proj.js");function n(e,r,n,o){var i=(0,a.transform)(n,r,e),s=(0,a.getPointResolution)(r,o,n),u=r.getMetersPerUnit();void 0!==u&&(s*=u);var c=e.getMetersPerUnit();void 0!==c&&(s/=c);var v=e.getExtent();if(!v||(0,t.containsCoordinate)(v,i)){var g=(0,a.getPointResolution)(e,s,i)/s;isFinite(g)&&g>0&&(s/=g)}return s}function o(e,t,r,a){var n=r-e,o=a-t,i=Math.sqrt(n*n+o*o);return[Math.round(r+n/i),Math.round(a+o/i)]}function i(a,n,i,s,u,c,v,g,h,l,d){var f=(0,e.createCanvasContext2D)(Math.round(i*a),Math.round(i*n));if(0===h.length)return f.canvas;f.scale(i,i);var m=(0,t.createEmpty)();h.forEach(function(e,r,a){(0,t.extend)(m,e.extent)});var x=(0,t.getWidth)(m),M=(0,t.getHeight)(m),T=(0,e.createCanvasContext2D)(Math.round(i*x/s),Math.round(i*M/s)),p=i/s;h.forEach(function(e,r,a){var n=e.extent[0]-m[0],o=-(e.extent[3]-m[3]),i=(0,t.getWidth)(e.extent),s=(0,t.getHeight)(e.extent);T.drawImage(e.image,l,l,e.image.width-2*l,e.image.height-2*l,n*p,o*p,i*p,s*p)});var P=(0,t.getTopLeft)(v);return g.getTriangles().forEach(function(e,t,a){var n=e.source,u=e.target,v=n[0][0],g=n[0][1],h=n[1][0],l=n[1][1],d=n[2][0],x=n[2][1],M=(u[0][0]-P[0])/c,p=-(u[0][1]-P[1])/c,j=(u[1][0]-P[0])/c,E=-(u[1][1]-P[1])/c,q=(u[2][0]-P[0])/c,C=-(u[2][1]-P[1])/c,b=v,y=g;v=0,g=0;var k=[[h-=b,l-=y,0,0,j-M],[d-=b,x-=y,0,0,q-M],[0,0,h,l,E-p],[0,0,d,x,C-p]],w=(0,r.solveLinearSystem)(k);if(w){f.save(),f.beginPath();var R=(M+j+q)/3,S=(p+E+C)/3,W=o(R,S,M,p),D=o(R,S,j,E),H=o(R,S,q,C);f.moveTo(D[0],D[1]),f.lineTo(W[0],W[1]),f.lineTo(H[0],H[1]),f.clip(),f.transform(w[0],w[2],w[1],w[3],M,p),f.translate(m[0]-b,m[3]-y),f.scale(s/i,-s/i),f.drawImage(T.canvas,0,0),f.restore()}}),d&&(f.save(),f.strokeStyle="black",f.lineWidth=1,g.getTriangles().forEach(function(e,t,r){var a=e.target,n=(a[0][0]-P[0])/c,o=-(a[0][1]-P[1])/c,i=(a[1][0]-P[0])/c,s=-(a[1][1]-P[1])/c,u=(a[2][0]-P[0])/c,v=-(a[2][1]-P[1])/c;f.beginPath(),f.moveTo(i,s),f.lineTo(n,o),f.lineTo(u,v),f.closePath(),f.stroke()}),f.restore()),f.canvas}
},{"./dom.js":"4KLO","./extent.js":"+QKI","./math.js":"t/nT","./proj.js":"5Zkk"}],"Pwdd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../extent.js"),r=require("../math.js"),e=require("../proj.js");function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function s(t,r){for(var e=0;e<r.length;e++){var i=r[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,r,e){return r&&s(t.prototype,r),e&&s(t,e),t}var n=10,a=.25,h=function(){function s(r,o,a,h,u){i(this,s),this.sourceProj_=r,this.targetProj_=o;var d={},c=(0,e.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var r=t[0]+"/"+t[1];return d[r]||(d[r]=c(t)),d[r]},this.maxSourceExtent_=h,this.errorThresholdSquared_=u*u,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!h&&!!this.sourceProj_.getExtent()&&(0,t.getWidth)(h)==(0,t.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,t.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,t.getWidth)(this.targetProj_.getExtent()):null;var _=(0,t.getTopLeft)(a),l=(0,t.getTopRight)(a),f=(0,t.getBottomRight)(a),g=(0,t.getBottomLeft)(a),W=this.transformInv_(_),v=this.transformInv_(l),m=this.transformInv_(f),x=this.transformInv_(g);if(this.addQuad_(_,l,f,g,W,v,m,x,n),this.wrapsXInSource_){var j=1/0;this.triangles_.forEach(function(t,r,e){j=Math.min(j,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-j>this.sourceWorldWidth_/2){var r=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];r[0][0]-j>this.sourceWorldWidth_/2&&(r[0][0]-=this.sourceWorldWidth_),r[1][0]-j>this.sourceWorldWidth_/2&&(r[1][0]-=this.sourceWorldWidth_),r[2][0]-j>this.sourceWorldWidth_/2&&(r[2][0]-=this.sourceWorldWidth_);var e=Math.min(r[0][0],r[1][0],r[2][0]);Math.max(r[0][0],r[1][0],r[2][0])-e<this.sourceWorldWidth_/2&&(t.source=r)}}.bind(this))}d={}}return o(s,[{key:"addTriangle_",value:function(t,r,e,i,s,o){this.triangles_.push({source:[i,s,o],target:[t,r,e]})}},{key:"addQuad_",value:function(e,i,s,o,n,h,u,d,c){var _=(0,t.boundingExtent)([n,h,u,d]),l=this.sourceWorldWidth_?(0,t.getWidth)(_)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,g=this.sourceProj_.canWrapX()&&l>.5&&l<1,W=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var v=(0,t.boundingExtent)([e,i,s,o]);W=(0,t.getWidth)(v)/this.targetWorldWidth_>a||W}!g&&this.sourceProj_.isGlobal()&&l&&(W=l>a||W)}if(W||!this.maxSourceExtent_||(0,t.intersects)(_,this.maxSourceExtent_)){if(!(W||isFinite(n[0])&&isFinite(n[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(u[0])&&isFinite(u[1])&&isFinite(d[0])&&isFinite(d[1]))){if(!(c>0))return;W=!0}if(c>0){if(!W){var m,x=[(e[0]+s[0])/2,(e[1]+s[1])/2],j=this.transformInv_(x);if(g)m=((0,r.modulo)(n[0],f)+(0,r.modulo)(u[0],f))/2-(0,r.modulo)(j[0],f);else m=(n[0]+u[0])/2-j[0];var p=(n[1]+u[1])/2-j[1];W=m*m+p*p>this.errorThresholdSquared_}if(W){if(Math.abs(e[0]-s[0])<=Math.abs(e[1]-s[1])){var E=[(i[0]+s[0])/2,(i[1]+s[1])/2],P=this.transformInv_(E),I=[(o[0]+e[0])/2,(o[1]+e[1])/2],b=this.transformInv_(I);this.addQuad_(e,i,E,I,n,h,P,b,c-1),this.addQuad_(I,E,s,o,b,P,u,d,c-1)}else{var S=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(S),T=[(s[0]+o[0])/2,(s[1]+o[1])/2],F=this.transformInv_(T);this.addQuad_(e,S,T,o,n,y,F,d,c-1),this.addQuad_(S,i,s,T,y,h,u,F,c-1)}return}}if(g){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(e,s,o,n,u,d),this.addTriangle_(e,i,s,n,h,u)}}},{key:"calculateSourceExtent",value:function(){var r=(0,t.createEmpty)();return this.triangles_.forEach(function(e,i,s){var o=e.source;(0,t.extendCoordinate)(r,o[0]),(0,t.extendCoordinate)(r,o[1]),(0,t.extendCoordinate)(r,o[2])}),r}},{key:"getTriangles",value:function(){return this.triangles_}}]),s}(),u=h;exports.default=u;
},{"../extent.js":"+QKI","../math.js":"t/nT","../proj.js":"5Zkk"}],"8cb7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=l(require("../Tile.js")),r=l(require("../TileState.js")),i=require("../events.js"),n=l(require("../events/EventType.js")),o=require("../extent.js"),s=require("../math.js"),u=require("../reproj.js"),a=l(require("./Triangulation.js"));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,r){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var i=y(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(r):n.value}})(e,t,r||e)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(l){function c(t,i,n,l,d,h,_,g,y,v,E){var b;f(this,c),(b=p(this,T(c).call(this,d,r.default.IDLE))).renderEdges_=void 0!==E&&E,b.pixelRatio_=_,b.gutter_=g,b.canvas_=null,b.sourceTileGrid_=i,b.targetTileGrid_=l,b.wrappedTileCoord_=h||d,b.sourceTiles_=[],b.sourcesListenerKeys_=null,b.sourceZ_=0;var m=l.getTileCoordExtent(b.wrappedTileCoord_),O=b.targetTileGrid_.getExtent(),j=b.sourceTileGrid_.getExtent(),R=O?(0,o.getIntersection)(m,O):m;if(0===(0,o.getArea)(R))return b.state=r.default.EMPTY,p(b);var x=t.getExtent();x&&(j=j?(0,o.getIntersection)(j,x):x);var S=l.getResolution(b.wrappedTileCoord_[0]),w=(0,o.getCenter)(R),L=(0,u.calculateSourceResolution)(t,n,w,S);if(!isFinite(L)||L<=0)return b.state=r.default.EMPTY,p(b);var D=void 0!==v?v:e.ERROR_THRESHOLD;if(b.triangulation_=new a.default(t,n,R,j,L*D),0===b.triangulation_.getTriangles().length)return b.state=r.default.EMPTY,p(b);b.sourceZ_=i.getZForResolution(L);var G=b.triangulation_.calculateSourceExtent();if(j&&(t.canWrapX()?(G[1]=(0,s.clamp)(G[1],j[1],j[3]),G[3]=(0,s.clamp)(G[3],j[1],j[3])):G=(0,o.getIntersection)(G,j)),(0,o.getArea)(G)){for(var I=i.getTileRangeForExtentAndZ(G,b.sourceZ_),P=I.minX;P<=I.maxX;P++)for(var C=I.minY;C<=I.maxY;C++){var A=y(b.sourceZ_,P,C,_);A&&b.sourceTiles_.push(A)}0===b.sourceTiles_.length&&(b.state=r.default.EMPTY)}else b.state=r.default.EMPTY;return b}return v(c,t.default),h(c,[{key:"disposeInternal",value:function(){this.state==r.default.LOADING&&this.unlistenSources_(),g(T(c.prototype),"disposeInternal",this).call(this)}},{key:"getImage",value:function(){return this.canvas_}},{key:"reproject_",value:function(){var e=[];if(this.sourceTiles_.forEach(function(t,i,n){t&&t.getState()==r.default.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===e.length)this.state=r.default.ERROR;else{var t=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(t),n="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,u.render)(n,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=r.default.LOADED}this.changed()}},{key:"load",value:function(){if(this.state==r.default.IDLE){this.state=r.default.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,s){var u=t.getState();if(u==r.default.IDLE||u==r.default.LOADING){e++;var a=(0,i.listen)(t,n.default.CHANGE,function(n){var o=t.getState();o!=r.default.LOADED&&o!=r.default.ERROR&&o!=r.default.EMPTY||((0,i.unlistenByKey)(a),0===--e&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),this.sourceTiles_.forEach(function(e,t,i){e.getState()==r.default.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}}},{key:"unlistenSources_",value:function(){this.sourcesListenerKeys_.forEach(i.unlistenByKey),this.sourcesListenerKeys_=null}}]),c}(),m=b;exports.default=m;
},{"./common.js":"wTZm","../Tile.js":"/+sz","../TileState.js":"SRu5","../events.js":"sgxS","../events/EventType.js":"KZbn","../extent.js":"+QKI","../math.js":"t/nT","../reproj.js":"Xijb","./Triangulation.js":"Pwdd"}],"9Moy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFromTemplate=n,exports.createFromTemplates=o,exports.createFromTileUrlFunctions=a,exports.nullTileUrlFunction=u,exports.expandUrl=i;var r=require("./asserts.js"),e=require("./math.js"),t=require("./tilecoord.js");function n(e,t){var n=/\{z\}/g,o=/\{x\}/g,a=/\{y\}/g,u=/\{-y\}/g;return function(i,c,l){return i?e.replace(n,i[0].toString()).replace(o,i[1].toString()).replace(a,i[2].toString()).replace(u,function(){var e=i[0],n=t.getFullTileRange(e);return(0,r.assert)(n,55),(n.getHeight()-i[2]-1).toString()}):void 0}}function o(r,e){for(var t=r.length,o=new Array(t),u=0;u<t;++u)o[u]=n(r[u],e);return a(o)}function a(r){return 1===r.length?r[0]:function(n,o,a){if(n){var u=(0,t.hash)(n),i=(0,e.modulo)(u,r.length);return r[i](n,o,a)}}}function u(r,e,t){}function i(r){var e=[],t=/\{([a-z])-([a-z])\}/.exec(r);if(t){var n,o=t[1].charCodeAt(0),a=t[2].charCodeAt(0);for(n=o;n<=a;++n)e.push(r.replace(t[0],String.fromCharCode(n)));return e}if(t=t=/\{(\d+)-(\d+)\}/.exec(r)){for(var u=parseInt(t[2],10),i=parseInt(t[1],10);i<=u;i++)e.push(r.replace(t[0],i.toString()));return e}return e.push(r),e}
},{"./asserts.js":"d7gk","./math.js":"t/nT","./tilecoord.js":"QcSK"}],"4GUN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=require("../asserts.js"),i=a(require("../TileRange.js")),o=require("../array.js"),r=require("../extent.js"),n=require("../math.js"),s=require("../size.js"),l=require("../tilecoord.js");function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};o.get||o.set?Object.defineProperty(t,i,o):t[i]=e[i]}return t.default=e,t}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}var f=[0,0,0],_=function(){function a(n){var s;if(u(this,a),this.minZoom=void 0!==n.minZoom?n.minZoom:0,this.resolutions_=n.resolutions,(0,t.assert)((0,o.isSorted)(this.resolutions_,function(e,t){return t-e},!0),17),!n.origins)for(var l=0,h=this.resolutions_.length-1;l<h;++l)if(s){if(this.resolutions_[l]/this.resolutions_[l+1]!==s){s=void 0;break}}else s=this.resolutions_[l]/this.resolutions_[l+1];this.zoomFactor_=s,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==n.origin?n.origin:null,this.origins_=null,void 0!==n.origins&&(this.origins_=n.origins,(0,t.assert)(this.origins_.length==this.resolutions_.length,20));var g=n.extent;void 0===g||this.origin_||this.origins_||(this.origin_=(0,r.getTopLeft)(g)),(0,t.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==n.tileSizes&&(this.tileSizes_=n.tileSizes,(0,t.assert)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==n.tileSize?n.tileSize:this.tileSizes_?null:e.DEFAULT_TILE_SIZE,(0,t.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==g?g:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==n.sizes?this.fullTileRanges_=n.sizes.map(function(e,t){return new i.default(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1))},this):g&&this.calculateTileRanges_(g)}return g(a,[{key:"forEachTileCoord",value:function(e,t,i){for(var o=this.getTileRangeForExtentAndZ(e,t),r=o.minX,n=o.maxX;r<=n;++r)for(var s=o.minY,l=o.maxY;s<=l;++s)i([t,r,s])}},{key:"forEachTileCoordParentTileRange",value:function(e,t,o,r){var n,s,l,a=null,u=e[0]-1;for(2===this.zoomFactor_?(s=e[1],l=e[2]):a=this.getTileCoordExtent(e,r);u>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),n=(0,i.createOrUpdate)(s,s,l,l,o)):n=this.getTileRangeForExtentAndZ(a,u,o),t(u,n))return!0;--u}return!1}},{key:"getExtent",value:function(){return this.extent_}},{key:"getMaxZoom",value:function(){return this.maxZoom}},{key:"getMinZoom",value:function(){return this.minZoom}},{key:"getOrigin",value:function(e){return this.origin_?this.origin_:this.origins_[e]}},{key:"getResolution",value:function(e){return this.resolutions_[e]}},{key:"getResolutions",value:function(){return this.resolutions_}},{key:"getTileCoordChildTileRange",value:function(e,t,o){if(e[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*e[1],n=2*e[2];return(0,i.createOrUpdate)(r,r+1,n,n+1,t)}var s=this.getTileCoordExtent(e,o);return this.getTileRangeForExtentAndZ(s,e[0]+1,t)}return null}},{key:"getTileRangeExtent",value:function(e,t,i){var o=this.getOrigin(e),n=this.getResolution(e),l=(0,s.toSize)(this.getTileSize(e),this.tmpSize_),a=o[0]+t.minX*l[0]*n,u=o[0]+(t.maxX+1)*l[0]*n,h=o[1]+t.minY*l[1]*n,g=o[1]+(t.maxY+1)*l[1]*n;return(0,r.createOrUpdate)(a,h,u,g,i)}},{key:"getTileRangeForExtentAndZ",value:function(e,t,o){var r=f;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);var n=r[1],s=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),(0,i.createOrUpdate)(n,r[1],s,r[2],o)}},{key:"getTileCoordCenter",value:function(e){var t=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=(0,s.toSize)(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*o[0]*i,t[1]-(e[2]+.5)*o[1]*i]}},{key:"getTileCoordExtent",value:function(e,t){var i=this.getOrigin(e[0]),o=this.getResolution(e[0]),n=(0,s.toSize)(this.getTileSize(e[0]),this.tmpSize_),l=i[0]+e[1]*n[0]*o,a=i[1]-(e[2]+1)*n[1]*o,u=l+n[0]*o,h=a+n[1]*o;return(0,r.createOrUpdate)(l,a,u,h,t)}},{key:"getTileCoordForCoordAndResolution",value:function(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}},{key:"getTileCoordForXYAndResolution_",value:function(e,t,i,o,r){var n=this.getZForResolution(i),a=i/this.getResolution(n),u=this.getOrigin(n),h=(0,s.toSize)(this.getTileSize(n),this.tmpSize_),g=o?.5:0,f=o?.5:0,_=Math.floor((e-u[0])/i+g),c=Math.floor((u[1]-t)/i+f),d=a*_/h[0],v=a*c/h[1];return o?(d=Math.ceil(d)-1,v=Math.ceil(v)-1):(d=Math.floor(d),v=Math.floor(v)),(0,l.createOrUpdate)(n,d,v,r)}},{key:"getTileCoordForXYAndZ_",value:function(e,t,i,o,r){var n=this.getOrigin(i),a=this.getResolution(i),u=(0,s.toSize)(this.getTileSize(i),this.tmpSize_),h=o?.5:0,g=o?.5:0,f=Math.floor((e-n[0])/a+h),_=Math.floor((n[1]-t)/a+g),c=f/u[0],d=_/u[1];return o?(c=Math.ceil(c)-1,d=Math.ceil(d)-1):(c=Math.floor(c),d=Math.floor(d)),(0,l.createOrUpdate)(i,c,d,r)}},{key:"getTileCoordForCoordAndZ",value:function(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}},{key:"getTileCoordResolution",value:function(e){return this.resolutions_[e[0]]}},{key:"getTileSize",value:function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}},{key:"getFullTileRange",value:function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:null}},{key:"getZForResolution",value:function(e,t){var i=(0,o.linearFindNearest)(this.resolutions_,e,t||0);return(0,n.clamp)(i,this.minZoom,this.maxZoom)}},{key:"calculateTileRanges_",value:function(e){for(var t=this.resolutions_.length,i=new Array(t),o=this.minZoom;o<t;++o)i[o]=this.getTileRangeForExtentAndZ(e,o);this.fullTileRanges_=i}}]),a}(),c=_;exports.default=c;
},{"./common.js":"BCyk","../asserts.js":"d7gk","../TileRange.js":"bqyG","../array.js":"YQ1M","../extent.js":"+QKI","../math.js":"t/nT","../size.js":"sBZd","../tilecoord.js":"QcSK"}],"RUO9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getForProjection=s,exports.wrapX=d,exports.createForExtent=l,exports.createXYZ=c,exports.createForProjection=x,exports.extentFromProjection=g;var e=require("./tilegrid/common.js"),t=require("./size.js"),r=require("./extent.js"),i=a(require("./extent/Corner.js")),o=require("./proj.js"),n=a(require("./proj/Units.js")),u=a(require("./tilegrid/TileGrid.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=e.getDefaultTileGrid();return t||(t=x(e),e.setDefaultTileGrid(t)),t}function d(e,t,i){var o=t[0],n=e.getTileCoordCenter(t),u=g(i);if((0,r.containsCoordinate)(u,n))return t;var a=(0,r.getWidth)(u),s=Math.ceil((u[0]-n[0])/a);return n[0]+=a*s,e.getTileCoordForCoordAndZ(n,o)}function l(e,t,o,n){var a=void 0!==n?n:i.default.TOP_LEFT,s=f(e,t,o);return new u.default({extent:e,origin:(0,r.getCorner)(e,a),resolutions:s,tileSize:o})}function c(e){var t=e||{},r=t.extent||(0,o.get)("EPSG:3857").getExtent(),i={extent:r,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:f(r,t.maxZoom,t.tileSize)};return new u.default(i)}function f(i,o,n){for(var u=void 0!==o?o:e.DEFAULT_MAX_ZOOM,a=(0,r.getHeight)(i),s=(0,r.getWidth)(i),d=(0,t.toSize)(void 0!==n?n:e.DEFAULT_TILE_SIZE),l=Math.max(s/d[0],a/d[1]),c=u+1,f=new Array(c),x=0;x<c;++x)f[x]=l/Math.pow(2,x);return f}function x(e,t,r,i){return l(g(e),t,r,i)}function g(e){var t=(e=(0,o.get)(e)).getExtent();if(!t){var i=180*o.METERS_PER_UNIT[n.default.DEGREES]/e.getMetersPerUnit();t=(0,r.createOrUpdate)(-i,-i,i,i)}return t}
},{"./tilegrid/common.js":"BCyk","./size.js":"sBZd","./extent.js":"+QKI","./extent/Corner.js":"fEqp","./proj.js":"5Zkk","./proj/Units.js":"Y/O/","./tilegrid/TileGrid.js":"4GUN"}],"4nSs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.TileSourceEvent=void 0;var e=require("../util.js"),t=c(require("../TileCache.js")),i=c(require("../TileState.js")),r=c(require("../events/Event.js")),n=require("../proj.js"),o=require("../size.js"),u=c(require("./Source.js")),l=require("../tilecoord.js"),a=require("../tilegrid.js");function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}function y(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t,i){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=g(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(i):n.value}})(e,t,i||e)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(r){function c(e){var i;f(this,c),(i=y(this,b(c).call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}))).opaque_=void 0!==e.opaque&&e.opaque,i.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,i.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var r=e.cacheSize;if(void 0===r){var n=[256,256],u=e.tileGrid;u&&(0,o.toSize)(u.getTileSize(u.getMinZoom()),n);var l="screen"in self,a=l?screen.availWidth||screen.width:1920,s=l?screen.availHeight||screen.height:1080;r=4*Math.ceil(a/n[0])*Math.ceil(s/n[1])}return i.tileCache=new t.default(r),i.tmpSize=[0,0],i.key_=e.key||"",i.tileOptions={transition:e.transition},i.zDirection,i}return j(c,u.default),p(c,[{key:"canExpireCache",value:function(){return this.tileCache.canExpireCache()}},{key:"expireCache",value:function(e,t){var i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}},{key:"forEachLoadedTile",value:function(e,t,r,n){var o=this.getTileCacheForProjection(e);if(!o)return!1;for(var u,a,c,s=!0,f=r.minX;f<=r.maxX;++f)for(var h=r.minY;h<=r.maxY;++h)a=(0,l.getKeyZXY)(t,f,h),c=!1,o.containsKey(a)&&(c=(u=o.get(a)).getState()===i.default.LOADED)&&(c=!1!==n(u)),c||(s=!1);return s}},{key:"getGutterForProjection",value:function(e){return 0}},{key:"getKey",value:function(){return this.key_}},{key:"setKey",value:function(e){this.key_!==e&&(this.key_=e,this.changed())}},{key:"getOpaque",value:function(e){return this.opaque_}},{key:"getResolutions",value:function(){return this.tileGrid.getResolutions()}},{key:"getTile",value:function(t,i,r,n,o){return(0,e.abstract)()}},{key:"getTileGrid",value:function(){return this.tileGrid}},{key:"getTileGridForProjection",value:function(e){return this.tileGrid?this.tileGrid:(0,a.getForProjection)(e)}},{key:"getTileCacheForProjection",value:function(e){var t=this.getProjection();return t&&!(0,n.equivalent)(t,e)?null:this.tileCache}},{key:"getTilePixelRatio",value:function(e){return this.tilePixelRatio_}},{key:"getTilePixelSize",value:function(e,t,i){var r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(t),u=(0,o.toSize)(r.getTileSize(e),this.tmpSize);return 1==n?u:(0,o.scale)(u,n,this.tmpSize)}},{key:"getTileCoordForTileUrlFunction",value:function(e,t){var i=void 0!==t?t:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(e=(0,a.wrapX)(r,e,i)),(0,l.withinExtentAndZ)(e,r)?e:null}},{key:"clear",value:function(){this.tileCache.clear()}},{key:"refresh",value:function(){this.clear(),d(b(c.prototype),"refresh",this).call(this)}},{key:"useTile",value:function(e,t,i,r){}}]),c}(),T=function(e){function t(e,i){var r;return f(this,t),(r=y(this,b(t).call(this,e))).tile=i,r}return j(t,r.default),t}();exports.TileSourceEvent=T;var x=k;exports.default=x;
},{"../util.js":"MHZC","../TileCache.js":"xJkU","../TileState.js":"SRu5","../events/Event.js":"nz3i","../proj.js":"5Zkk","../size.js":"sBZd","./Source.js":"on36","../tilecoord.js":"QcSK","../tilegrid.js":"RUO9"}],"3AUa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};exports.default=e;
},{}],"vJxw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../util.js"),t=u(require("../TileState.js")),i=require("../tileurlfunction.js"),n=l(require("./Tile.js")),r=u(require("./TileEventType.js")),o=require("../tilecoord.js");function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,i):{};n.get||n.set?Object.defineProperty(t,i,n):t[i]=e[i]}return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(l){function u(e){var t;return s(this,u),(t=p(this,y(u).call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}))).generateTileUrlFunction_=!e.tileUrlFunction,t.tileLoadFunction=e.tileLoadFunction,t.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(d(t)):i.nullTileUrlFunction,t.urls=null,e.urls?t.setUrls(e.urls):e.url&&t.setUrl(e.url),t.tileLoadingKeys_={},t}return h(u,n.default),f(u,[{key:"getTileLoadFunction",value:function(){return this.tileLoadFunction}},{key:"getTileUrlFunction",value:function(){return this.tileUrlFunction}},{key:"getUrls",value:function(){return this.urls}},{key:"handleTileChange",value:function(i){var o,l=i.target,u=(0,e.getUid)(l),a=l.getState();a==t.default.LOADING?(this.tileLoadingKeys_[u]=!0,o=r.default.TILELOADSTART):u in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[u],o=a==t.default.ERROR?r.default.TILELOADERROR:a==t.default.LOADED||a==t.default.ABORT?r.default.TILELOADEND:void 0),null!=o&&this.dispatchEvent(new n.TileSourceEvent(o,l))}},{key:"setTileLoadFunction",value:function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}},{key:"setTileUrlFunction",value:function(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),void 0!==t?this.setKey(t):this.changed()}},{key:"setUrl",value:function(e){var t=this.urls=(0,i.expandUrl)(e);this.setUrls(t)}},{key:"setUrls",value:function(e){this.urls=e;var t=e.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,i.createFromTemplates)(e,this.tileGrid),t):this.setKey(t)}},{key:"useTile",value:function(e,t,i){var n=(0,o.getKeyZXY)(e,t,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}]),u}(),O=v;exports.default=O;
},{"../util.js":"MHZC","../TileState.js":"SRu5","../tileurlfunction.js":"9Moy","./Tile.js":"4nSs","./TileEventType.js":"3AUa","../tilecoord.js":"QcSK"}],"NX+8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../reproj/common.js"),t=require("../util.js"),i=f(require("../ImageTile.js")),r=f(require("../TileCache.js")),o=f(require("../TileState.js")),n=require("../events.js"),l=f(require("../events/EventType.js")),c=require("../proj.js"),a=f(require("../reproj/Tile.js")),s=f(require("./UrlTile.js")),u=require("../tilecoord.js"),h=require("../tilegrid.js");function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,i){return t&&d(e.prototype,t),i&&d(e,i),e}function E(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,i){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(f){function p(e){var t;return j(this,p),(t=E(this,P(p).call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:_,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}))).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,t.tileClass=void 0!==e.tileClass?e.tileClass:i.default,t.tileCacheForProjection={},t.tileGridForProjection={},t.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,t.renderReprojectionEdges_=!1,t}return C(p,s.default),g(p,[{key:"canExpireCache",value:function(){if(!e.ENABLE_RASTER_REPROJECTION)return v(P(p.prototype),"canExpireCache",this).call(this);if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}},{key:"expireCache",value:function(t,i){if(e.ENABLE_RASTER_REPROJECTION){var r=this.getTileCacheForProjection(t);for(var o in this.tileCache.expireCache(this.tileCache==r?i:{}),this.tileCacheForProjection){var n=this.tileCacheForProjection[o];n.expireCache(n==r?i:{})}}else v(P(p.prototype),"expireCache",this).call(this,t,i)}},{key:"getGutterForProjection",value:function(t){return e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,c.equivalent)(this.getProjection(),t)?0:this.getGutter()}},{key:"getGutter",value:function(){return 0}},{key:"getOpaque",value:function(t){return!(e.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&t&&!(0,c.equivalent)(this.getProjection(),t))&&v(P(p.prototype),"getOpaque",this).call(this,t)}},{key:"getTileGridForProjection",value:function(i){if(!e.ENABLE_RASTER_REPROJECTION)return v(P(p.prototype),"getTileGridForProjection",this).call(this,i);var r=this.getProjection();if(!this.tileGrid||r&&!(0,c.equivalent)(r,i)){var o=(0,t.getUid)(i);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=(0,h.getForProjection)(i)),this.tileGridForProjection[o]}return this.tileGrid}},{key:"getTileCacheForProjection",value:function(i){if(!e.ENABLE_RASTER_REPROJECTION)return v(P(p.prototype),"getTileCacheForProjection",this).call(this,i);var o=this.getProjection();if(!o||(0,c.equivalent)(o,i))return this.tileCache;var n=(0,t.getUid)(i);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new r.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}},{key:"createTile_",value:function(e,t,i,r,c,a){var s=[e,t,i],u=this.getTileCoordForTileUrlFunction(s,c),h=u?this.tileUrlFunction(u,r,c):void 0,f=new this.tileClass(s,void 0!==h?o.default.IDLE:o.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return f.key=a,(0,n.listen)(f,l.default.CHANGE,this.handleTileChange,this),f}},{key:"getTile",value:function(t,i,r,o,n){var l=this.getProjection();if(e.ENABLE_RASTER_REPROJECTION&&l&&n&&!(0,c.equivalent)(l,n)){var s,h=this.getTileCacheForProjection(n),f=[t,i,r],p=(0,u.getKey)(f);h.containsKey(p)&&(s=h.get(p));var j=this.getKey();if(s&&s.key==j)return s;var d=this.getTileGridForProjection(l),g=this.getTileGridForProjection(n),E=this.getTileCoordForTileUrlFunction(f,n),y=new a.default(l,d,n,g,f,E,this.getTilePixelRatio(o),this.getGutter(),function(e,t,i,r){return this.getTileInternal(e,t,i,r,l)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return y.key=j,s?(y.interimTile=s,y.refreshInterimChain(),h.replace(p,y)):h.set(p,y),y}return this.getTileInternal(t,i,r,o,l||n)}},{key:"getTileInternal",value:function(e,t,i,r,n){var l=null,c=(0,u.getKeyZXY)(e,t,i),a=this.getKey();if(this.tileCache.containsKey(c)){if((l=this.tileCache.get(c)).key!=a){var s=l;l=this.createTile_(e,t,i,r,n,a),s.getState()==o.default.IDLE?l.interimTile=s.interimTile:l.interimTile=s,l.refreshInterimChain(),this.tileCache.replace(c,l)}}else l=this.createTile_(e,t,i,r,n,a),this.tileCache.set(c,l);return l}},{key:"setRenderReprojectionEdges",value:function(t){if(e.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=t){for(var i in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[i].clear();this.changed()}}},{key:"setTileGridForProjection",value:function(i,r){if(e.ENABLE_RASTER_REPROJECTION){var o=(0,c.get)(i);if(o){var n=(0,t.getUid)(o);n in this.tileGridForProjection||(this.tileGridForProjection[n]=r)}}}}]),p}();function _(e,t){e.getImage().src=t}var F=O;exports.default=F;
},{"../reproj/common.js":"wTZm","../util.js":"MHZC","../ImageTile.js":"0vmZ","../TileCache.js":"xJkU","../TileState.js":"SRu5","../events.js":"sgxS","../events/EventType.js":"KZbn","../proj.js":"5Zkk","../reproj/Tile.js":"8cb7","./UrlTile.js":"vJxw","../tilecoord.js":"QcSK","../tilegrid.js":"RUO9"}],"sT47":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=o(require("./TileImage.js")),e=require("../tilegrid.js");function o(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s=function(o){function r(t){i(this,r);var o=t||{},u=void 0!==o.projection?o.projection:"EPSG:3857",c=void 0!==o.tileGrid?o.tileGrid:(0,e.createXYZ)({extent:(0,e.extentFromProjection)(u),maxZoom:o.maxZoom,minZoom:o.minZoom,tileSize:o.tileSize});return n(this,l(r).call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,opaque:o.opaque,projection:u,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:o.tileLoadFunction,tilePixelRatio:o.tilePixelRatio,tileUrlFunction:o.tileUrlFunction,url:o.url,urls:o.urls,wrapX:void 0===o.wrapX||o.wrapX,transition:o.transition,attributionsCollapsible:o.attributionsCollapsible}))}return c(r,t.default),r}(),f=s;exports.default=f;
},{"./TileImage.js":"NX+8","../tilegrid.js":"RUO9"}],"Gfg3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.ATTRIBUTION=void 0;var t=o(require("./XYZ.js"));function o(t){return t&&t.__esModule?t:{default:t}}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function n(t,o){return!o||"object"!==e(o)&&"function"!=typeof o?i(t):o}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&a(t,o)}function a(t,o){return(a=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}var s='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.';exports.ATTRIBUTION=s;var p=function(o){function e(t){r(this,e);var o,i=t||{};o=void 0!==i.attributions?i.attributions:[s];var c=void 0!==i.crossOrigin?i.crossOrigin:"anonymous",a=void 0!==i.url?i.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return n(this,u(e).call(this,{attributions:o,cacheSize:i.cacheSize,crossOrigin:c,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:a,wrapX:i.wrapX,attributionsCollapsible:!1}))}return c(e,t.default),e}(),f=p;exports.default=f;
},{"./XYZ.js":"sT47"}],"aajw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_WMS_VERSION=void 0;var e="1.3.0";exports.DEFAULT_WMS_VERSION=e;
},{}],"oUvL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"};exports.default=e;
},{}],"SFhX":[function(require,module,exports) {
"use strict";function e(e,n){var o=[];Object.keys(n).forEach(function(e){null!==n[e]&&void 0!==n[e]&&o.push(e+"="+encodeURIComponent(n[e]))});var r=o.join("&");return(e=-1===(e=e.replace(/[?&]$/,"")).indexOf("?")?e+"?":e+"&")+r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.appendParams=e;
},{}],"DL1c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./common.js"),t=require("../asserts.js"),r=require("../extent.js"),i=require("../obj.js"),o=require("../math.js"),n=require("../proj.js"),s=require("../reproj.js"),a=require("../size.js"),u=h(require("./TileImage.js")),l=h(require("./WMSServerType.js")),p=require("../tilecoord.js"),c=require("../string.js"),f=require("../uri.js");function h(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),e}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var m=function(h){function _(e){var t;S(this,_);var i=e||{},o=i.params||{},n=!("TRANSPARENT"in o)||o.TRANSPARENT;return(t=v(this,T(_).call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:!n,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:b,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}))).gutter_=void 0!==i.gutter?i.gutter:0,t.params_=o,t.v13_=!0,t.serverType_=i.serverType,t.hidpi_=void 0===i.hidpi||i.hidpi,t.tmpExtent_=(0,r.createEmpty)(),t.updateV13_(),t.setKey(t.getKeyForParams_()),t}return y(_,u.default),d(_,[{key:"getGetFeatureInfoUrl",value:function(t,o,u,l){var p=(0,n.get)(u),c=this.getProjection(),f=this.getTileGrid();f||(f=this.getTileGridForProjection(p));var h=f.getTileCoordForCoordAndResolution(t,o);if(!(f.getResolutions().length<=h[0])){var _=f.getResolution(h[0]),S=f.getTileCoordExtent(h,this.tmpExtent_),g=(0,a.toSize)(f.getTileSize(h[0]),this.tmpSize),d=this.gutter_;0!==d&&(g=(0,a.buffer)(g,d,this.tmpSize),S=(0,r.buffer)(S,_*d,S)),c&&c!==p&&(_=(0,s.calculateSourceResolution)(c,p,t,_),S=(0,n.transformExtent)(S,p,c),t=(0,n.transform)(t,p,c));var v={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};(0,i.assign)(v,this.params_,l);var E=Math.floor((t[0]-S[0])/_),T=Math.floor((S[3]-t[1])/_);return v[this.v13_?"I":"X"]=E,v[this.v13_?"J":"Y"]=T,this.getRequestUrl_(h,g,S,1,c||p,v)}}},{key:"getGutter",value:function(){return this.gutter_}},{key:"getParams",value:function(){return this.params_}},{key:"getRequestUrl_",value:function(e,r,i,n,s,a){var u=this.urls;if(u){if(a.WIDTH=r[0],a.HEIGHT=r[1],a[this.v13_?"CRS":"SRS"]=s.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=n)switch(this.serverType_){case l.default.GEOSERVER:var c=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+c:a.FORMAT_OPTIONS="dpi:"+c;break;case l.default.MAPSERVER:a.MAP_RESOLUTION=90*n;break;case l.default.CARMENTA_SERVER:case l.default.QGIS:a.DPI=90*n;break;default:(0,t.assert)(!1,52)}var h,_,S=s.getAxisOrientation(),g=i;if(this.v13_&&"ne"==S.substr(0,2))h=i[0],g[0]=i[1],g[1]=h,h=i[2],g[2]=i[3],g[3]=h;if(a.BBOX=g.join(","),1==u.length)_=u[0];else _=u[(0,o.modulo)((0,p.hash)(e),u.length)];return(0,f.appendParams)(_,a)}}},{key:"getTilePixelRatio",value:function(e){return this.hidpi_&&void 0!==this.serverType_?e:1}},{key:"getKeyForParams_",value:function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")}},{key:"updateParams",value:function(e){(0,i.assign)(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}},{key:"updateV13_",value:function(){var t=this.params_.VERSION||e.DEFAULT_WMS_VERSION;this.v13_=(0,c.compareVersions)(t,"1.3")>=0}}]),_}();function b(t,o,n){var s=this.getTileGrid();if(s||(s=this.getTileGridForProjection(n)),!(s.getResolutions().length<=t[0])){1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var u=s.getResolution(t[0]),l=s.getTileCoordExtent(t,this.tmpExtent_),p=(0,a.toSize)(s.getTileSize(t[0]),this.tmpSize),c=this.gutter_;0!==c&&(p=(0,a.buffer)(p,c,this.tmpSize),l=(0,r.buffer)(l,u*c,l)),1!=o&&(p=(0,a.scale)(p,o,this.tmpSize));var f={SERVICE:"WMS",VERSION:e.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return(0,i.assign)(f,this.params_),this.getRequestUrl_(t,p,l,o,n,f)}}var O=m;exports.default=O;
},{"./common.js":"aajw","../asserts.js":"d7gk","../extent.js":"+QKI","../obj.js":"dV1Q","../math.js":"t/nT","../proj.js":"5Zkk","../reproj.js":"Xijb","../size.js":"sBZd","./TileImage.js":"NX+8","./WMSServerType.js":"oUvL","../tilecoord.js":"QcSK","../string.js":"xZAE","../uri.js":"SFhX"}],"Focm":[function(require,module,exports) {
"use strict";var e=u(require("./src/ol/Map.js")),r=u(require("./src/ol/View.js")),i=require("./src/ol/layer.js"),s=require("./src/ol/proj.js"),a=u(require("./src/ol/source/OSM.js")),o=u(require("./src/ol/source/TileWMS.js")),n=u(require("./src/ol/proj/Projection.js")),t=require("./src/ol/control.js"),l=u(require("./src/ol/control/MousePosition.js")),c=require("./src/ol/coordinate.js");function u(e){return e&&e.__esModule?e:{default:e}}var p=[-84.9534256,9.549918],g=(0,s.fromLonLat)(p),v=new r.default({center:g,zoom:7.8}),f=new l.default({coordinateFormat:(0,c.createStringXY)(4),projection:"EPSG:4326",className:"custom-mouse-position",target:document.getElementById("mouse-position"),undefinedHTML:"&nbsp;"}),w=[new i.Tile({source:new a.default}),new i.Group({layers:[new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"unidades_fitogeograficas_2014",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1}),new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"zonas_de_vida_2008",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1})]}),new i.Group({layers:[new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"areas_conservacion",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1})]}),new i.Group({layers:[new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"sinac_oficinas",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1})]}),new i.Group({layers:[new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"areas_silvestres_protegidas",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1}),new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"corredores_biologicos",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1}),new i.Tile({source:new o.default({url:"http://ceniga.sinac.go.cr/geoserver/CENIGA/wms",params:{LAYERS:"zona_inalienable_ley_lxv",TILED:!0,transparent:!0,format:"image/png",projection:new n.default("EPSG:4326"),isBaseLayer:!1,visibility:!1,singleTile:!0,ratio:1.1},serverType:"geoserver"}),visible:!1})]})],m=new e.default({controls:(0,t.defaults)().extend([f]),layers:w,target:"map",view:v});function d(e,r){var i=$(e+" input.visible");i.on("change",function(){r.setVisible(this.checked)}),i.prop("checked",r.getVisible());var s=$(e+" input.opacity");s.on("input change",function(){r.setOpacity(parseFloat(this.value))}),s.val(String(r.getOpacity()))}m.getLayers().forEach(function(e,r){d("#layer"+r,e),e instanceof i.Group&&e.getLayers().forEach(function(e,i){d("#layer"+r+i,e)})});
},{"./src/ol/Map.js":"hetI","./src/ol/View.js":"pzWF","./src/ol/layer.js":"GllG","./src/ol/proj.js":"5Zkk","./src/ol/source/OSM.js":"Gfg3","./src/ol/source/TileWMS.js":"DL1c","./src/ol/proj/Projection.js":"4/ua","./src/ol/control.js":"srnd","./src/ol/control/MousePosition.js":"OS00","./src/ol/coordinate.js":"Gkmg"}]},{},["Focm"], null)
//# sourceMappingURL=geovisor.0dc788a2.js.map